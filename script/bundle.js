!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t){
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
var i=Phaser.Renderer.WebGL.Utils;e.exports=function(e,t,s,r,n){if(0!==t.width&&0!==t.height){var a=t.frame,h=a.width,o=a.height,l=i.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,a.glTexture,h,o,t.x,t.y,h/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,h,o,l(t._tintTL,r.alpha*t._alphaTL),l(t._tintTR,r.alpha*t._alphaTR),l(t._tintBL,r.alpha*t._alphaBL),l(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,r,n)}}},function(e,t){e.exports=function(e,t,i,s,r){0!==t.width&&0!==t.height&&e.batchSprite(t,t.frame,s,r)}},function(e,t,i){"use strict";i.r(t);var s=class extends Phaser.Scene{constructor(){super("TitleScene")}preload(){this.load.image("background","assets/background.png"),this.load.image("title","assets/title.png"),this.load.image("start","assets/start.png"),this.load.image("start-active","assets/start_active.png"),this.load.image("tile_01","assets/tile_01.png"),this.load.image("tile_02","assets/tile_02.png"),this.load.image("tile_03","assets/tile_03.png"),this.load.image("tile_04","assets/tile_04.png")}create(){const e=this;this.add.image(400,400,"background");const t=this.add.graphics({fillStyle:{color:16777215}});t.setAlpha(0);const i=new Phaser.Geom.Rectangle(0,0,800,700);t.fillRectShape(i);const s=[];s.push({imageKey:"tile_01",xChange:"+=180",yChange:"+=180",angle:15,scale:.8}),s.push({imageKey:"tile_02",xChange:"+=200",yChange:"-=180",angle:15,scale:1}),s.push({imageKey:"tile_03",xChange:"-=180",yChange:"+=180",angle:-15,scale:.9}),s.push({imageKey:"tile_04",xChange:"-=200",yChange:"-=180",angle:-5,scale:.8}),s.push({imageKey:"tile_01",xChange:"+=0",yChange:"-=180",angle:-15,scale:.7}),s.push({imageKey:"tile_02",xChange:"+=0",yChange:"+=180",angle:-15,scale:1}),s.push({imageKey:"tile_03",xChange:"+=290",yChange:"+=30",angle:15,scale:.8}),s.push({imageKey:"tile_01",xChange:"-=290",yChange:"+=40",angle:-15,scale:.9}),s.forEach(t=>{t.tile=e.add.image(400,230,t.imageKey),t.tile.setAlpha(0),t.tile.setScale(.5,.5)});const r=this.add.image(400,230,"title");r.setAlpha(0),r.setScale(2,2);const n=this.add.image(400,550,"start");n.setInteractive({cursor:"pointer"}),n.setAlpha(0);const a=this.add.image(400,550,"start");a.setAlpha(0),a.setTintFill(16777215);const h=this.add.image(400,550,"start-active");h.setAlpha(0),n.on("pointerover",()=>{e.tweens.add({targets:h,alpha:1,duration:100,ease:"Sine.easeInOut"})}),n.on("pointerout",()=>{e.tweens.add({targets:h,alpha:0,duration:100,ease:"Sine.easeInOut"})}),n.on("pointerdown",()=>{e.scene.transition({target:"RoundScene",data:{level:0},remove:!0})});const o=this.tweens.createTimeline();o.add({delay:400,targets:r,alpha:1,scaleX:1,scaleY:1,duration:500,ease:"Quad.easeIn"}),s.forEach((e,t)=>{o.add({targets:e.tile,x:e.xChange,y:e.yChange,scaleX:1,scaleY:1,alpha:1,scaleX:e.scale,scaleY:e.scale,angle:e.angle,duration:300,ease:"Quad.easeOut",offset:0===t?"-=0":"-=300"})}),o.add({targets:t,alpha:1,duration:30,offset:"-=300"}),o.add({targets:t,alpha:0,duration:700,offset:1500,ease:"Quad.easeIn"}),o.add({targets:[n,a],alpha:1,offset:2200,duration:100}),o.add({targets:a,alpha:0,duration:300,offset:2300,ease:"Quad.easeOut"}),o.play()}},r=i(0),n=i.n(r),a=i(1),h=i.n(a),o={renderWebGL:n.a,renderCanvas:h.a};
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
const l=Phaser.Display.Canvas.CanvasPool;var d=function(e){var t=l.create(this),i=t.getContext("2d");e.syncFont(t,i);var s=Math.ceil(i.measureText(e.testString).width*e.baselineX),r=s,n=2*r;r=r*e.baselineY|0,t.width=s,t.height=n,i.fillStyle="#f00",i.fillRect(0,0,s,n),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,r);var a={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,s,n))return a.ascent=r,a.descent=r+6,a.fontSize=a.ascent+a.descent,l.remove(t),a;var h,o,d=i.getImageData(0,0,s,n).data,u=d.length,c=4*s,g=0,p=!1;for(h=0;h<r;h++){for(o=0;o<c;o+=4)if(255!==d[g+o]){p=!0;break}if(p)break;g+=c}for(a.ascent=r-h,g=u-c,p=!1,h=n;h>r;h--){for(o=0;o<c;o+=4)if(255!==d[g+o]){p=!0;break}if(p)break;g-=c}return a.descent=h-r,a.fontSize=a.ascent+a.descent,l.remove(t),a},u={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
const c=Phaser.Utils.Objects.GetAdvancedValue,g=Phaser.Utils.Objects.GetValue;var p={backgroundColor:["backgroundColor",null],fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],underlineColor:["underline.color","#000"],underlineThickness:["underline.thickness",0],underlineOffset:["underline.offset",0],halign:["halign","left"],valign:["valign","top"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],lineSpacing:["lineSpacing",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wrapMode:["wrap.mode",1],wrapWidth:["wrap.width",0]};const f={none:u.NO_WRAP,word:u.WORD_WRAP,char:u.CHAR_WRAP,character:u.CHAR_WRAP};var y=class{constructor(e,t){this.parent=e,this.backgroundColor,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(t,!1);var i=g(t,"metrics",!1);this.metrics=i?{ascent:g(i,"ascent",0),descent:g(i,"descent",0),fontSize:g(i,"fontSize",0)}:d(this)}setStyle(e,t){if(void 0===t&&(t=!0),e&&e.hasOwnProperty("wrap")){var i=e.wrap;if(i.hasOwnProperty("mode")){var s=i.mode;"string"==typeof s&&(i.mode=f[s])}else i.hasOwnProperty("width")&&(i.mode=1)}for(var r in e&&e.hasOwnProperty("fontSize")&&"number"==typeof e.fontSize&&(e.fontSize=e.fontSize.toString()+"px"),p)this[r]="wrapCallback"===r||"wrapCallbackScope"===r?g(e,p[r][0],p[r][1]):c(e,p[r][0],p[r][1]);var n=g(e,"font",null);this._font=null===n?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:n;var a=g(e,"fill",null);return null!==a&&(this.color=a),t?this.update(!0):this.parent}syncFont(e,t){t.font=this._font}syncStyle(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"}syncShadow(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)}update(e){return e&&(this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily,this.metrics=d(this)),this.parent.updateText(e)}buildFont(){var e=this.fontStyle+" "+this.fontSize+" "+this.fontFamily;return e!==this._font&&(this._font=e),this}setFont(e){return"string"==typeof e?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=g(e,"fontFamily","Courier"),this.fontSize=g(e,"fontSize","16px"),this.fontStyle=g(e,"fontStyle","")),this.update(!0)}setFontFamily(e){return this.fontFamily=e,this.update(!0)}setFontStyle(e){return this.fontStyle=e,this.update(!0)}setFontSize(e){return"number"==typeof e&&(e=e.toString()+"px"),this.fontSize=e,this.update(!0)}setTestString(e){return this.testString=e,this.update(!0)}setFixedSize(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(!1)}setResolution(e){return this.resolution=e,this.update(!1)}setLineSpacing(e){return this.lineSpacing=e,this.update(!1)}setBackgroundColor(e){return this.backgroundColor=e,this.update(!1)}setFill(e){return this.color=e,this.update(!1)}setColor(e){return this.color=e,this.update(!1)}setStroke(e,t){return void 0===e?this.strokeThickness=0:(void 0===t&&(t=this.strokeThickness),this.stroke=e,this.strokeThickness=t),this.update(!0)}setShadow(e,t,i,s,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="#000"),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===n&&(n=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=i,this.shadowBlur=s,this.shadowStroke=r,this.shadowFill=n,this.update(!1)}setShadowOffset(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)}setShadowColor(e){return void 0===e&&(e="#000"),this.shadowColor=e,this.update(!1)}setShadowBlur(e){return void 0===e&&(e=0),this.shadowBlur=e,this.update(!1)}setShadowStroke(e){return this.shadowStroke=e,this.update(!1)}setShadowFill(e){return this.shadowFill=e,this.update(!1)}setUnderline(e,t,i){return void 0===e&&(e="#000"),void 0===t&&(t=0),void 0===i&&(i=0),this.underlineColor=e,this.underlineThickness=t,this.underlineOffset=i,this.update(!1)}setUnderlineColor(e){return void 0===e&&(e="#000"),this.underlineColor=e,this.update(!1)}setUnderlineThickness(e){return void 0===e&&(e=0),this.underlineThickness=e,this.update(!1)}setUnderlineOffset(e){return void 0===e&&(e=0),this.underlineOffset=e,this.update(!1)}setWrapMode(e){return"string"==typeof e&&(e=f[e.toLowerCase()]||0),this.wrapMode=e,this.update(!0)}setWrapWidth(e){return this.wrapWidth=e,this.update(!1)}setAlign(e,t){return void 0===e&&(e="left"),void 0===t&&(t="top"),this.halign=e,this.valign=t,this.update(!1)}setHAlign(e){return void 0===e&&(e="left"),this.halign=e,this.update(!1)}setVAlign(e){return void 0===e&&(e="top"),this.valign=e,this.update(!1)}setMaxLines(e){return void 0===e&&(e=0),this.maxLines=e,this.update(!1)}getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var e={};for(var t in p)e[t]=this[t];return e.metrics=this.getTextMetrics(),e}destroy(){this.parent=void 0}},v={draw(e,t,i,s){var r=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save(),this.drawBackground(this.defatultStyle.backgroundColor);var a=this.defatultStyle;e+=this.startXOffset,t+=this.startYOffset;var h,o,l,d,u,c,g=a.halign,p=a.valign,f=a.lineHeight,y=r.lines,v=y.length,m=a.maxLines;m>0&&v>m?(o=m,l="center"===p?Math.floor((v-o)/2):"bottom"===p?v-o:0):(o=v,l=0),d=l+o,c="center"===p?Math.max((s-o*f)/2,0):"bottom"===p?Math.max(s-o*f-2,0):0,c+=t;for(var w=l;w<d;w++)if(0!==(h=r.getLineWidth(w))){u="center"===g?(i-h)/2:"right"===g?i-h:0,u+=e;for(var x=y[w],T=0,S=x.length;T<S;T++)this.drawPen(x[T],u,c)}n.restore()},drawPen(e,t,i){t+=e.x,i+=e.y;var s=this.canvas,r=this.context;r.save();var n=this.parser.propToContextStyle(this.defatultStyle,e.prop);n.buildFont(),n.syncFont(s,r),n.syncStyle(s,r),n.underlineThickness>0&&e.width>0&&this.drawUnderline(t,i,e.width,n),e.isTextPen&&this.drawText(t,i,e.text,n),e.isImagePen&&this.drawImage(t,i,e.prop.img,n),r.restore(),e.hasAreaMarker&&e.width>0&&this.hitAreaManager.add(e.prop.area,t,i-this.startYOffset,e.width,this.defatultStyle.lineHeight)},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawBackground(e){null!==e&&(this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height))},drawUnderline(e,t,i,s){t+=s.underlineOffset-s.underlineThickness/2,this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context,n=r.lineCap;r.lineCap="butt",r.beginPath(),r.strokeStyle=s.underlineColor,r.lineWidth=s.underlineThickness,r.moveTo(e,t),r.lineTo(e+i,t),r.stroke(),r.lineCap=n},drawText(e,t,i,s){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;s.strokeThickness&&(s.syncShadow(r,s.shadowStroke),r.strokeText(i,e,t)),s.color&&"none"!==s.color&&(s.syncShadow(r,s.shadowFill),r.fillText(i,e,t))},drawImage(e,t,i,s){var r=this.parent.imageManager,n=r.get(i),a=r.getFrame(i);e+=n.left,t+=-this.startYOffset+n.y,this.autoRound&&(e=Math.round(e),t=Math.round(t)),this.context.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,e,t,n.width,n.height)}};var m=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(e){return this.items.push(e),this}pushMultiple(e){return this.items.push.apply(this.items,e),e.length=0,this}clear(){return this.items.length=0,this}};const w=Phaser.Utils.Objects.GetValue,x=u.NO_NEWLINE,T=u.RAW_NEWLINE;var S=class{constructor(e){this.prop={},this.resetFromJSON(e)}resetFromJSON(e){this.text=w(e,"text",""),this.x=w(e,"x",0),this.y=w(e,"y",0),this.width=w(e,"width",0);var t=w(e,"prop",null);null===t&&(t={}),this.prop=t,this.newLineMode=w(e,"newLineMode",0),this.startIndex=w(e,"startIndex",0)}get plainText(){var e=this.text;return this.newLineMode===T&&(e+="\n"),e}get wrapText(){var e=this.text;return this.newLineMode!==x&&(e+="\n"),e}get rawTextLength(){var e=this.text.length;return this.newLineMode===T&&(e+=1),e}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return""!==this.text}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}},b=function(e){if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t]},k=function(e,t){var i=Array.isArray(e);if(void 0===t?t=i?[]:{}:b(t),i){t.length=e.length;for(var s=0,r=e.length;s<r;s++)t[s]=e[s]}else for(var n in e)t[n]=e[n];return t},P=function(){};const M=Phaser.Utils.Objects.GetFastValue,O=u.NO_NEWLINE,C=u.WRAPPED_NEWLINE;var _=new m,G=new m;class L{constructor(e){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=M(e,"pensPool",_),this.LinesPool=M(e,"linesPool",G),this.tagToText=M(e,"tagToText",P),this.tagToTextScope=M(e,"tagToTextScope",void 0)}destroy(){this.freePens(),this.tagToText=void 0,this.tagToTextScope=void 0}freePens(){for(var e=0,t=this.lines.length;e<t;e++)this.lines[e].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(e,t,i,s,r,n){var a=this.PensPool.pop();return null==a&&(a=new S),A.text=e,A.x=t,A.y=i,A.width=s,A.prop=r,A.newLineMode=n,a.resetFromJSON(A),this.addPen(a),this}addImagePen(e,t,i,s){return this.addTextPen("",e,t,i,s,O),this}addNewLinePen(){var e=this.lastPen,t=e?e.lastX:0,i=e?e.y:0,s=e?k(e.prop):null;return this.addTextPen("",t,i,0,s,C),this}addPen(e){var t=this.lastPen;e.startIndex=null==t?0:t.endIndex,this.pens.push(e);var i=this.lastLine;null==i&&(i=this.LinesPool.pop()||[],this.lines.push(i)),i.push(e),e.newLineMode!==O&&(i=this.LinesPool.pop()||[],this.lines.push(i)),this.maxLinesWidth=void 0}clone(e){null==e&&(e=new L),e.freePens();for(var t=0,i=this.lines.length;t<i;t++)for(var s=this.lines[t],r=0,n=s.length;r<n;r++){var a=s[r];e.addPen(a.text,a.x,a.y,a.width,k(a.prop),a.newLineMode)}return e}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(e){if(e>=this.lines.length)return this.getLineEndIndex(e);var t=this.lines[e];return t&&t[0]?t[0].startIndex:0}getLineEndIndex(e){e>=this.lines.length&&(e=this.lines.length-1);var t,i,s=!1;for(t=e;t>=0&&!(s=null!=(i=this.lines[t])&&i.length>0);t--);return s?i[i.length-1].endIndex:0}getLineWidth(e){var t=this.lines[e];if(!t)return 0;var i=t[t.length-1];return null==i?0:i.lastX}getMaxLineWidth(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var e,t=0,i=0,s=this.lines.length;i<s;i++)(e=this.getLineWidth(i))>t&&(t=e);return this.maxLinesWidth=t,t}getLineWidths(){for(var e=[],t=0,i=this.lines.length;t<i;t++)e.push(this.getLineWidth(t));return e}get linesCount(){return this.lines.length}get plainText(){for(var e="",t=this.pens,i=0,s=t.length;i<s;i++)e+=t[i].plainText;return e}get rawTextLength(){for(var e=0,t=this.pens,i=0,s=this.pens.length;i<s;i++)e+=t[i].rawTextLength;return e}getSliceTagText(e,t,i){if(void 0===e&&(e=0),void 0===t){var s=this.lastPen;if(null==s)return"";t=s.endIndex}void 0===i&&(i=!1);for(var r,n,a,h,o,l,d="",u=0,c=this.pens.length;u<c&&((h=(r=this.pens[u]).endIndex)<=e||(r=this.pens[u],n=i?r.wrapText:r.plainText,o=r.prop,(a=r.startIndex)>=e&&h<=t||(n=n.substring(e-a,t-a)),this.tagToTextScope?d+=this.tagToText.call(this.tagToTextScope,n,o,l):d+=this.tagToText(n,o,l),l=o,!(h>=t)));u++);return d}}var A={},E=L;const W=Phaser.Geom.Rectangle;var I=new m;var F=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return I.pushMultiple(this.hitAreas),this}add(e,t,i,s,r){var n=I.pop();return null===n?n=new W(t,i,s,r):n.setTo(t,i,s,r),n.key=e,this.hitAreas.push(n),this}getFirstHitArea(e,t){for(var i,s=this.hitAreas,r=0,n=s.length;r<n;r++)if((i=s[r]).contains(e,t))return i;return null}drawBounds(e,t,i){void 0===t&&(t=16777215),i&&e.save().scaleCanvas(i.scaleX,i.scaleY).rotateCanvas(i.rotation).translateCanvas(i.x,i.y);for(var s,r=this.hitAreas,n=0,a=r.length;n<a;n++)s=r[n],e.lineStyle(1,t).strokeRect(s.x,s.y,s.width,s.height);return i&&e.restore(),this}},R=function(e,t,i,s){var r=this.hitAreaManager.getFirstHitArea(i,s);if(null!==r){var n=r.key;this.parent.emit(`${e}-${n}`,t,i,s),this.parent.emit(e,n,t,i,s)}},z=function(){this.parent.on("pointerdown",(function(e,t,i,s){R.call(this,"areadown",e,t,i)}),this).on("pointerup",(function(e,t,i,s){R.call(this,"areaup",e,t,i)}),this)};const B=u.NO_NEWLINE,Y=u.RAW_NEWLINE,D=u.WRAPPED_NEWLINE,X=u.NO_WRAP,N=u.WORD_WRAP,H=u.SPLITREGEXP;var j=[],q=new m;q.newline=function(e,t,i){var s=this.pop();return null===s&&(s={}),s.text=e,s.width=t,s.newLineMode=i,s};var U=function(e,t,i,s,r){s<=0&&(i=X);var n=j;if(q.pushMultiple(n),!e||!e.length)return n;for(var a,h,o,l=e.split(H),d=0,u=l.length;d<u;d++)if(a=l[d],o=d===u-1?B:Y,i!==X){var c,g;if(h=0===d?s-r:s,a.length<=100)if((x=t(a))<=h){n.push(q.newline(a,x,o));continue}for(var p,f="",y="",v=0,m=0,w=(c=i===N?a.split(" "):a).length;m<w;m++)g=c[m],i===N?(f+=g,m<w-1&&(f+=" ")):f+=g,(p=t(f))>h&&(0===m?n.push(q.newline("",0,D)):(n.push(q.newline(y,v,D)),f=g,i===N&&m<w-1&&(f+=" "),p=t(f)),h=s),y=f,v=p;n.push(q.newline(y,v,o))}else{var x=t(a);n.push(q.newline(a,x,o))}return n};const K=Phaser.Utils.Objects.GetValue,V=u.NO_WRAP,J=u.NO_NEWLINE;class ${constructor(e){this.parent=e.parent,this.context=K(e,"context",null),this.canvas=this.context.canvas,this.parser=K(e,"parser",null),this.defatultStyle=K(e,"style",null),this.autoRound=!0,this.pensPool=K(e,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new F;var t=this.context;this.getTextWidth=function(e){return t.measureText(e).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defatultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(e,t,i,s,r){if(void 0===r&&(r=this.penManager),r.freePens(),""===e)return r;for(var n,a,h,o,l,d=this.canvas,u=this.context,c=0,g=0,p=this.parser.splitText(e),f=0,y=p.length;f<y;f++)if(n=(o=this.parser.tagTextToProp(p[f],a)).plainText,(a=o.prop).img){var v=this.imageManager.getOuterWidth(a.img);i>0&&t!==V&&i<c+v&&(r.addNewLinePen(),g+=s,c=0),r.addImagePen(c,g,v,k(a)),c+=v}else if(""!==n){var m;this.context.save(),(h=this.parser.propToContextStyle(this.defatultStyle,a)).buildFont(),h.syncFont(d,u),h.syncStyle(d,u);for(var w=0,x=(l=U(n,this.getTextWidth,t,i,c)).length;w<x;w++)m=l[w],r.addTextPen(m.text,c,g,m.width,k(a),m.newLineMode),m.newLineMode!==J?(c=0,g+=s):c+=m.width;this.context.restore()}return r}get startXOffset(){return this.defatultStyle.strokeThickness/2}get startYOffset(){var e=this.defatultStyle;return e.strokeThickness/2+e.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var e=this.penManager.linesCount,t=this.defatultStyle.maxLines;return t>0&&e>t&&(e=t),e}get linesWidth(){return this.penManager.getMaxLineWidth()}get linesHeight(){var e=this.desplayLinesCount,t=this.defatultStyle.lineHeight*e;return e>0&&(t-=this.defatultStyle.lineSpacing),t}get imageManager(){return this.parent.imageManager}newPenManager(){return new E({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(e,t,i){var s;if(null==e)s=this.penManager.plainText;else{var r=this.parser.splitText(e,1);s="";for(var n=0,a=r.length;n<a;n++)s+=r[n]}return null==t&&null==i||(null==t&&(t=0),null==i&&(i=s.length),s=s.substring(t,i)),s}getPenManager(e,t){if(void 0===e)return this.copyPenManager(t,this.penManager);void 0===t&&(t=this.newPenManager());var i=this.defatultStyle;return this.updatePenManager(e,i.wrapMode,i.wrapWidth,i.lineHeight,t),t}getText(e,t,i,s){if(null==e)return this.penManager.getSliceTagText(t,i,s);var r=this.tmpPenManager,n=this.defatultStyle;return this.updatePenManager(e,n.wrapMode,n.wrapWidth,n.lineHeight,r),r.getSliceTagText(t,i,s)}copyPenManager(e,t){return void 0===t&&(t=this.penManager),t.copy(e)}getTextWidth(e){return void 0===e&&(e=this.penManager),e.getMaxLineWidth()}getLastPen(e){return void 0===e&&(e=this.penManager),e.lastPen}}var Q={setInteractive:z};Object.assign($.prototype,v,Q);var Z=$;const ee=Phaser.Utils.Objects.GetValue;var te,ie=class{constructor(e){this.textureManager=e,this.images={}}add(e,t){if("string"==typeof e)this._add(e,t);else if(Array.isArray(e))for(var i=0,s=(r=e).length;i<s;i++)this._add(r[i]);else{var r=e;for(var e in r)this._add(e,r[e])}return this}_add(e,t){void 0===t&&(t={key:e});var i=t.key,s=t.frame,r=t.width,n=t.height;if(void 0===r||void 0===n){var a=this.textureManager.getFrame(i,s),h=a?a.cutWidth:0,o=a?a.cutHeight:0;void 0===r&&void 0===n?(r=h,n=o):void 0===r?r=h*(n/o):void 0===n&&(n=o*(r/h))}this.images[e]={key:i,frame:s,width:r,height:n,y:ee(t,"y",0),left:ee(t,"left",0),right:ee(t,"right",0)}}remove(e){return this.images.hasOwnProperty(e)&&delete this.images[e],this}get(e){return this.images.hasOwnProperty(e)||this.textureManager.exists(e)&&this.add(e),this.images[e]}getOuterWidth(e){var t=this.get(e);return t?t.width+t.left+t.right:0}getFrame(e){var t=this.get(e);return t?this.textureManager.getFrame(t.key,t.frame):void 0}hasTexture(e){return!!this.getFrame(e)}};const se=Phaser.DOM.AddToDOM,re=Phaser.Display.Canvas.CanvasPool,ne=Phaser.GameObjects.GameObject,ae=Phaser.Utils.Objects.GetValue,he=Phaser.DOM.RemoveFromDOM,oe=u.SPLITREGEXP;var le={};class de extends ne{constructor(e,t,i,s,r,n,a){if(void 0===t&&(t=0),void 0===i&&(i=0),super(e,n),this.renderer=e.sys.game.renderer,this.setPosition(t,i),this.setOrigin(0,0),this.initPipeline(),this.canvas=re.create(this),this.context=this.canvas.getContext("2d"),r){if(r.hasOwnProperty("align")){var h=r.align;delete r.align,r.halign=h}r.hasOwnProperty("stroke")&&!r.hasOwnProperty("strokeThickness")&&(r.strokeThickness=1)}this.style=new y(this,r),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=e.sys.game.config.resolution),this._crop=this.resetCropObject(),this.texture=e.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),le.hasOwnProperty(n)||(le[n]=new m),this.canvasText=new Z({parent:this,context:this.context,parser:a,style:this.style,pensPool:le[n]}),r&&r.padding&&this.setPadding(r.padding),this.setText(s),e.sys.game.events.on("contextrestored",(function(){this.dirty=!0}),this)}set text(e){this.setText(e)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",se(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(e){return e||0===e||(e=""),Array.isArray(e)&&(e=e.join("\n")),e!==this._text&&(this._text=e.toString(),this.updateText()),this}setStyle(e){return this.style.setStyle(e)}setFont(e){return this.style.setFont(e)}setFontFamily(e){return this.style.setFontFamily(e)}setFontSize(e){return this.style.setFontSize(e)}setFontStyle(e){return this.style.setFontStyle(e)}setFixedSize(e,t){return this.style.setFixedSize(e,t)}setBackgroundColor(e){return this.style.setBackgroundColor(e)}setFill(e){return this.style.setFill(e)}setColor(e){return this.style.setColor(e)}setStroke(e,t){return this.style.setStroke(e,t)}setShadow(e,t,i,s,r,n){return this.style.setShadow(e,t,i,s,r,n)}setShadowOffset(e,t){return this.style.setShadowOffset(e,t)}setShadowColor(e){return this.style.setShadowColor(e)}setShadowBlur(e){return this.style.setShadowBlur(e)}setShadowStroke(e){return this.style.setShadowStroke(e)}setShadowFill(e){return this.style.setShadowFill(e)}setWrapMode(e){return this.style.setWrapMode(e)}setWrapWidth(e){return this.style.setWrapWidth(e)}setAlign(e){return this.style.setHAlign(e)}setLineSpacing(e){return this.style.setLineSpacing(e)}setPadding(e,t,i,s){if("object"==typeof e){var r=e,n=ae(r,"x",null);null!==n?(e=n,i=n):(e=ae(r,"left",0),i=ae(r,"right",e));var a=ae(r,"y",null);null!==a?(t=a,s=a):(t=ae(r,"top",0),s=ae(r,"bottom",t))}else void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=e),void 0===s&&(s=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=s,this.updateText(!1)}setResolution(e){return this.style.setResolution(e)}setMaxLines(e){return this.style.setMaxLines(e)}updateText(e){void 0===e&&(e=!0);var t=this.canvasText,i=this.style;e&&t.updatePenManager(this._text,i.wrapMode,i.wrapWidth,i.lineHeight);var s,r,n=this.padding;0===i.fixedWidth?(this.width=t.linesWidth+n.left+n.right,s=t.linesWidth):(this.width=i.fixedWidth,(s=this.width-n.left-n.right)<t.linesWidth&&(s=t.linesWidth)),0===i.fixedHeight?(this.height=t.linesHeight+n.top+n.bottom,r=t.linesHeight):(this.height=i.fixedHeight,(r=this.height-n.top-n.bottom)<t.linesHeight&&(r=t.linesHeight));var a=this.width,h=this.height;this.updateDisplayOrigin();var o=i.resolution;a*=o,h*=o,a=Math.max(Math.ceil(a),1),h=Math.max(Math.ceil(h),1);var l=this.canvas,d=this.context;l.width!==a||l.height!==h?(l.width=a,l.height=h,this.frame.setSize(a,h)):d.clearRect(0,0,a,h),d.save(),d.scale(o,o),t.draw(n.left,n.top,s,r),d.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}toJSON(){var e=ue.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return e.data=t,e}preDestroy(){this.style.rtl&&he(this.canvas),re.remove(this.canvas),this.canvasText.destroy()}setInteractive(e,t,i){return ne.prototype.setInteractive.call(this,e,t,i),this.canvasText.setInteractive(),this}getWrappedText(e,t,i){return(e=this.canvasText.getText(e,t,i,!0)).split(oe)}getPlainText(e,t,i){return this.canvasText.getPlainText(e,t,i)}getText(e,t,i){return this.canvasText.getText(e,t,i,!1)}getSubString(e,t,i){return this.getText(e,t,i)}copyPenManager(e){return this.canvasText.copyPenManager(e)}getPenManager(e,t){return this.canvasText.getPenManager(e,t)}setSize(e,t){return this.setFixedSize(e,t)}resize(e,t){return this.setFixedSize(e,t)}set lineSpacing(e){this.setLineSpacing(e)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return e=this.scene.textures,void 0===te&&(te=new ie(e)),te;var e}addImage(e,t){return this.imageManager.add(e,t),this}drawAreaBounds(e,t){return this.canvasText.hitAreaManager.drawBounds(e,t,this),this}}const ue=Phaser.GameObjects.Components;Phaser.Class.mixin(de,[ue.Alpha,ue.BlendMode,ue.ComputedSize,ue.Crop,ue.Depth,ue.Flip,ue.GetBounds,ue.Mask,ue.Origin,ue.Pipeline,ue.ScrollFactor,ue.Tint,ue.Transform,ue.Visible,o]);var ce=de,ge={plainText:null,prevProp:null},pe=new y;var fe=function(e){for(var t,i,s,r={},n=0,a=(e=e.split(";")).length;n<a;n++)if(i=(t=e[n].split(":"))[0],s=t[1],!ye(i)&&!ye(s)){switch(i){case"stroke":var h=s.split(" ");s={},(l=h.length)>=1&&(s.color=h[0]),l>=2&&(s.thinkness=parseInt(h[1].replace("px","")));break;case"shadow":var o=s.split(" ");s={},(l=o.length)>=1&&(s.color=o[0]),l>=2&&(s.offsetX=parseInt(o[1].replace("px",""))),l>=3&&(s.offsetY=parseInt(o[2].replace("px",""))),l>=4&&(s.blur=parseInt(o[3].replace("px","")));break;case"u":case"underline":var l,d=s.split(" ");s={},(l=d.length)>=1&&(s.color=d[0]),l>=2&&(s.thinkness=parseInt(d[1].replace("px",""))),l>=3&&(s.offset=parseInt(d[2].replace("px","")))}r[i]=s}return r},ye=function(e){return 0===(e=e.replace(Se,"")).length},ve=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,me=/<\s*class=/i,we=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,xe=/<\s*style=/i,Te=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Se=/^\s+|\s+$/,be=class{constructor(e){void 0===e&&(e={}),this.tags=e}addTag(e,t){this.tags[e]=t}splitText(e,t){for(var i,s,r,n=[],a=0,h=e.length,o=h;i=ve.exec(e);)s=i[0],a<(o=ve.lastIndex-s.length)&&n.push(e.substring(a,o)),void 0===t?n.push(s):1===t&&(me.test(s)?(r=s.match(we),n.push(r[2])):xe.test(s)&&(r=s.match(Te),n.push(r[2]))),a=ve.lastIndex;return a<h&&n.push(e.substring(a,h)),n}tagTextToProp(e,t){var i,s;if(me.test(e)){if(null!=(a=e.match(we))){var r=a[1],n=this.tags;(s=n.hasOwnProperty(r)?n[r]:{})._class=r,i=a[2]}}else if(xe.test(e)){var a;if(null!=(a=e.match(Te))){var h=a[1];(s=fe(h))._style=h,i=a[2]}}null==i&&(i=e),null==s&&(s={});var o=ge;return o.plainText=i,o.prop=s,o}propToContextStyle(e,t){var i=pe;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")||t.hasOwnProperty("fontFamily")||t.hasOwnProperty("font-family")){var s=t.hasOwnProperty("family")?t.family:t.hasOwnProperty("fontFamily")?t.fontFamily:t["font-family"];i.fontFamily=s}else i.fontFamily=e.fontFamily;if(t.hasOwnProperty("size")||t.hasOwnProperty("fontSize")||t.hasOwnProperty("font-size")){var r=t.hasOwnProperty("size")?t.size:t.hasOwnProperty("fontSize")?t.fontSize:t["font-size"];"number"==typeof r&&(r=r.toString()+"px"),i.fontSize=r}else i.fontSize=e.fontSize;if(t.hasOwnProperty("style")||t.hasOwnProperty("fontStyle")||t.hasOwnProperty("font-style")){var n=t.hasOwnProperty("style")?t.style:t.hasOwnProperty("fontStyle")?t.fontStyle:t["font-style"];i.fontStyle=n}else i.fontStyle=e.fontStyle;if(t.hasOwnProperty("color")||t.hasOwnProperty("font-color")){var a=t.hasOwnProperty("color")?t.color:t["font-color"];i.color=a}else i.color=e.color;if(t.hasOwnProperty("stroke")){var h=t.stroke;i.stroke=h.hasOwnProperty("color")?h.color:e.stroke,i.strokeThickness=h.hasOwnProperty("thinkness")?h.thinkness:e.strokeThickness}else i.stroke=e.stroke,i.strokeThickness=e.strokeThickness}if(t.hasOwnProperty("shadow")){var o=t.shadow;i.shadowColor=o.hasOwnProperty("color")?o.color:e.shadowColor,i.shadowOffsetX=o.hasOwnProperty("offsetX")?o.offsetX:e.shadowOffsetX,i.shadowOffsetY=o.hasOwnProperty("offsetY")?o.offsetY:e.shadowOffsetY,i.shadowBlur=o.hasOwnProperty("blur")?o.blur:e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0}else i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=e.shadowStroke,i.shadowFill=e.shadowFill;if(t.hasOwnProperty("u")||t.hasOwnProperty("underline")){var l=t.hasOwnProperty("u")?t.u:t.underline;i.underlineColor=l.hasOwnProperty("color")?l.color:e.underlineColor,i.underlineThickness=l.hasOwnProperty("thinkness")?l.thinkness:e.underlineThickness,i.underlineOffset=l.hasOwnProperty("offset")?l.offset:e.underlineOffset}else i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset;return i}propToTagText(e,t,i){return t.hasOwnProperty("_class")?""===e&&this.isTextTag(t._class)?"":"<class='"+t._class+"'>"+e+"</class>":t.hasOwnProperty("_style")?"<style='"+t._style+"'>"+e+"</style>":void 0}destroy(){this.tags=void 0}isTextTag(e){var t=this.tags[e];return!!t&&null==t.img}};const ke=Phaser.Utils.Objects.GetValue;var Pe=class extends ce{constructor(e,t,i,s,r){var n=ke(r,"tags",void 0),a=new be(n);super(e,t,i,s,r,"rexTagText",a),this.parser=a}addTag(e,t){return this.parser.addTag(e,t),this.updateText(!0)}addTags(e){for(var t in e)this.parser.addTag(t,e[t]);return this.updateText(!0)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}};const Me=Phaser.Utils.Objects.GetAdvancedValue,Oe=Phaser.GameObjects.BuildGameObject;Phaser.GameObjects.GameObjectFactory.register("rexTagText",(function(e,t,i,s){var r=new Pe(this.scene,e,t,i,s);return this.scene.add.existing(r),r})),Phaser.GameObjects.GameObjectCreator.register("rexTagText",(function(e,t){var i=Me(e,"text",""),s=Me(e,"style",null),r=Me(e,"padding",null);null!==r&&(s.padding=r),void 0!==t&&(e.add=t);var n=new Pe(this.scene,0,0,i,s);return Oe(this.scene,n,e),n.autoRound=Me(e,"autoRound",!0),n.resolution=Me(e,"resolution",1),n}));var Ce=Pe,_e={setEventEmitter(e,t){return void 0===t&&(t=Phaser.Events.EventEmitter),this._privateEE=void 0===e,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]}};const Ge=Phaser.Scene;var Le=function(e){return e instanceof Ge},Ae=function(e){return Le(e)?e:e.scene&&Le(e.scene)?e.scene:e.parent&&e.parent.scene&&Le(e.parent.scene)?e.parent.scene:void 0};const Ee=Phaser.Utils.Objects.GetFastValue,We=Phaser.Utils.Objects.GetValue;class Ie{constructor(e,t){this.gameObject=e,this.scene=Ae(e),this.setEventEmitter(We(t,"eventEmitter",void 0)),this.timer=null,this.resetFromJSON(t),this.boot()}resetFromJSON(e){this.setTypeMode(We(e,"typeMode",0)),this.setTypeSpeed(We(e,"speed",333)),this.setTextCallback=Ee(e,"setTextCallback",null),this.setTextCallbackScope=Ee(e,"setTextCallbackScope",null),this.typingIdx=Ee(e,"typingIdx",0),this.text=Fe(Ee(e,"text","")),this.textLen=Ee(e,"textLen",0),this.insertIdx=Ee(e,"insertIdx",null);var t=Ee(e,"elapsed",null);return null!==t&&this.start(void 0,void 0,this.typingIdx,t),this}toJSON(){var e,t=this.getTimer();return e=t?t.elapsed:null,{typeMode:this.typeMode,speed:this.speed,setTextCallback:this.setTextCallback,setTextCallbackScope:this.setTextCallbackScope,typingIdx:this.typingIdx,text:this.text,textLen:this.textLen,insertIdx:this.insertIdx,elapsed:e}}boot(){return this.gameObject.once&&this.gameObject.on("destroy",this.destroy,this),this}shutdown(){return this.destroyEventEmitter(),this.freeTimer(),this.gameObject=void 0,this.scene=void 0,this}destroy(){return this.shutdown(),this}setTypeMode(e){return"string"==typeof e&&(e=Re[e]),this.typeMode=e,this}setTypeSpeed(e){return this.speed=e,this}get isTyping(){return null!==this.getTimer()}get isLastChar(){return this.typingIdx===this.textLen}start(e,t,i,s){return void 0!==e&&this.setTypingContent(e),void 0!==t&&(this.speed=t),void 0===i&&(i=0),this.typingIdx=i+1,0===this.speed?this.stop(!0):this.startTimer(s),this}appendText(e){var t=this.text.concat(Fe(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLen),this}stop(e){return this.getTimer()&&this.freeTimer(),e&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.gameObject)),this}pause(){var e=this.getTimer();return e&&(e.paused=!0),this}resume(){var e=this.getTimer();return e&&(e.paused=!1),this}setTypingContent(e){return this.text=Fe(e),this.textLen=this.getTextLength(this.text),this}onTyping(){var e=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(e),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.gameObject)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(e,t,i,s){var r;if(0===s){var n=0,a=t;this.insertIdx=a,r=this.getSubString(e,n,a)}else if(1===s){n=(a=i)-t;this.insertIdx=0,r=this.getSubString(e,n,a)}else if(2===s){var h=i/2;a=(n=Math.floor(h-t/2))+t;this.insertIdx=t%2?t:0,r=this.getSubString(e,n,a)}else if(3===s){var o,l=Math.floor(t/2);if(l>0){n=(a=i)-l;o=this.getSubString(e,n,a)}else o="";var d,u=t-l;if(u>0){a=(n=0)+u;this.insertIdx=a,d=this.getSubString(e,n,a)}else d="",this.insertIdx=0;r=d+o}return r}startTimer(e){var t;return this.timer&&this.freeTimer(),void 0===e?(0,t=0):(this.speed,t=e),this.timer=this.scene.time.addEvent({delay:0,startAt:t,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIdx):this.setTextCallback(e,this.isLastChar,this.insertIdx)),this.gameObject.setText(e)}getTextLength(e){var t=this.gameObject;return t.getPlainText?t.getPlainText(e).length:e.length}getSubString(e,t,i){var s=this.gameObject;return s.getSubString?s.getSubString(e,t,i):e.slice(t,i)}}Object.assign(Ie.prototype,_e);var Fe=function(e){return Array.isArray(e)?e=e.join("\n"):"number"==typeof e&&(e=e.toString()),e};const Re={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};var ze=Ie,Be=0,Ye=1,De=2,Xe=0,Ne=1,He=[{score:100,timer:0,behavior:Be},{score:200,timer:120,behavior:Be},{score:300,timer:30,behavior:De},{score:300,timer:120,behavior:Ye},{score:400,timer:300,behavior:Ye,handler:e=>{e.tileGrid.TileGenerationBehavior!==De&&e.score>He[e.level]/2&&(e.tileGrid.tileGenerationBehavior=De)}},{score:1e3,timer:300,behavior:De},{score:1e3,timer:300,behavior:De},{score:1e3,timer:300,behavior:Ye},{score:1e3,timer:300,behavior:Be}];const je=e=>e[Math.floor(Math.random()*e.length)];var qe=[{name:"Blue",imageKey:"tile_01"},{name:"Green",imageKey:"tile_02"},{name:"Red",imageKey:"tile_03"},{name:"Yellow",imageKey:"tile_04"}],Ue=class{constructor(e,t,i,s,r,n,a,h,o){this.isBlocked=!1,this.offsetX=s,this.offsetY=r,this.tileSize=i,this.tileGridHeight=t,this.tileGridWidth=e,this.tileGrid=[],this.tileImageContainer=null,this.playAreaOffset=this.tileGridHeight*this.tileSize,this.onTileSelect=n,this.onTileMatch=a,this.tileGenerationBehavior=h,this.queue=o;for(let i=0;i<2*t;i++){this.tileGrid[i]=[];for(let s=0;s<e;s++)this.tileGrid[i][s]=i<t?null:this.createTile(this.getTileType(s,i,Be),s,i)}}create(e){this.tileImageContainer=e.add.container(),this.forEachTile(t=>{null!==t&&(t.create(e),this.tileImageContainer.add(t.image))});const t=e.make.graphics();t.fillStyle(16777215,1),t.fillRect(this.offsetX-this.tileSize/2,this.offsetY+this.tileGridHeight*this.tileSize-this.tileSize/2,this.tileGridWidth*this.tileSize,this.tileGridHeight*this.tileSize),this.tileImageContainer.mask=new Phaser.Display.Masks.GeometryMask(e,t)}update(e){const t=this;if(t.queue.length>0)return;const i=t.getMatches();i.length>0&&t.onTileMatch(e,i);let s=[];i.forEach(t=>{s.push(t.destroy(e,this.tileImageContainer))}),s.length>0&&t.queue.push(()=>Promise.all(s)),t.forEachTile((e,i,s)=>{null!==e&&e.state===Ne&&(t.tileGrid[s][i]=null)});let r=[];for(let i=0;i<this.tileGridWidth;i++){let s=2*this.tileGridHeight-1;for(;s>=0;){if(null===t.tileGrid[s][i]){let n=s-1;for(;n>=0;){let a=t.tileGrid[n][i];null!==a&&(t.tileGrid[s][i]=a,t.tileGrid[n][i]=null,r.push(this.getTileDrop(e,a,i,s)),s--),n--}}s--}}t.forEachPlayableTile((i,s,r)=>{if(null===i){const i=r-t.tileGridHeight,n=t.createTile(t.getTileType(s,r,t.tileGenerationBehavior),s,i);t.tileGrid[i][s]=n,n.create(e),t.tileImageContainer.add(n.image)}}),r.length>0&&t.queue.push(()=>Promise.all(r))}swapTiles(e,t,i){let s=this;s.queue.push(()=>{let r=t.x,n=t.y,a=t.tileGridX,h=t.tileGridY,o=i.x,l=i.y,d=i.tileGridX,u=i.tileGridY,c=i.updatePosition(e,r,n,a,h);s.tileGrid[h][a]=i;let g=t.updatePosition(e,o,l,d,u);return s.tileGrid[u][d]=t,Promise.all([c,g])})}hasMatches(e,t){return this.getMatches(e,t).length>0}getMatches(e,t){const i=this,s=[];return i.forEachTile((r,n,a)=>{if(void 0!==e&&n!==e&&void 0!==t&&a!==t)return;if(!this.isPlayable(r))return;const h=r.tileType,o=[],l=[];let d=n+1;for(;d<i.tileGridWidth;){const e=i.tileGrid[a][d];if(null==e||h.name!==e.tileType.name)break;o.push(e),d++}for(d=n-1;d>0;){const e=i.tileGrid[a][d];if(null==e||h.name!==e.tileType.name)break;o.push(e),d--}let u=a+1;for(;u<i.tileGridHeight;){const e=i.tileGrid[u][n];if(null==e||h.name!==e.tileType.name)break;l.push(e),u++}for(u=a-1;u>0;){const e=i.tileGrid[u][n];if(null==e||h!==e.tileType)break;l.push(e),u--}l.length>1&&s.push(...l),o.length>1&&s.push(...o),(l.length>1||o.length>1)&&s.push(r)}),s}forEachTile(e){for(let t=0;t<2*this.tileGridHeight;t++)for(let i=0;i<this.tileGridWidth;i++)e(this.tileGrid[t][i],i,t)}forEachPlayableTile(e){for(let t=this.tileGridHeight;t<2*this.tileGridHeight;t++)for(let i=0;i<this.tileGridWidth;i++)e(this.tileGrid[t][i],i,t)}createTile(e,t,i){return new class{constructor(e,t,i,s,r,n){this.tileType=e,this.x=t,this.y=i,this.tileGridX=s,this.tileGridY=r,this.onTileSelect=n,this.image=null,this.state=Xe,this.isActivated=!1,this.isDestroying=!1}create(e){this.image=e.add.image(this.x,this.y,this.tileType.imageKey),this.image.setInteractive(),this.image.on("pointerdown",()=>{this.onTileSelect(e,this)})}activate(){this.isActivated=!0,this.image.setTintFill(16777215)}deactivate(){this.isActivated=!1,this.image.clearTint()}updatePosition(e,t,i,s,r){let n=this;return new Promise((a,h)=>{n.x=t,n.y=i,n.tileGridX=s,n.tileGridY=r,e.tweens.add({targets:n.image,x:t,y:i,ease:"Power1",duration:500,onComplete:()=>{a()}})})}destroy(e,t){let i=this;if(i.isDestroying)return;i.isDestroying=!0;const s=e.add.image(i.x,i.y,i.tileType.imageKey);s.setTintFill(16777215),s.alpha=0;const r=[];for(let t=0;t<4;t++){const t=e.add.graphics({fillStyle:{color:16777215},alpha:0}),i=new Phaser.Geom.Circle(this.x,this.y,Phaser.Math.Between(0,10));t.fillCircleShape(i),r.push(t)}return new Promise((n,a)=>{e.tweens.add({targets:s,alpha:1,duration:200,onComplete:()=>{t.remove(i.image),i.image.destroy(),i.state=Ne,t.remove(s),s.destroy(),r.forEach(e=>{t.remove(e),e.destroy()}),n()}}),r.forEach((t,i)=>{let s="",r="";switch(i){case 1:s="-",r="-";break;case 2:s="+",r="+";break;case 3:s="+",r="-";break;case 4:s="-",r="+"}e.tweens.add({targets:t,x:s+"=35",y:r+"=35",alpha:1,duration:200,ease:"Cubic.easeOut"})})})}block(e){this.isBlocked=!0,e.tweens.add({targets:this.image,alpha:.5,duration:100})}unblock(e){this.isBlocked=!1,e.tweens.add({targets:this.image,alpha:1,duration:100})}}(e,this.getTileX(t),this.getTileY(i),t,i,this.onTileSelect)}getTileDrop(e,t,i,s){return t.updatePosition(e,this.getTileX(i),this.getTileY(s),i,s)}getTileX(e){return this.offsetX+this.tileSize*e}getTileY(e){return this.offsetY+this.tileSize*e}canSelect(e){return this.isPlayable(e)}isPlayable(e){return null!=e&&e.tileGridY>this.tileGridHeight-1}getTileType(e,t,i){const s=t<1?null:this.tileGrid[t-1][e],r=t>self.tileGridHeight-1||!this.tileGrid[t+1]?null:this.tileGrid[t+1][e],n=e<1?null:this.tileGrid[t][e-1],a=e>self.tileGridWidth-1?null:this.tileGrid[t][e+1];return je(i!==Ye||null==s&&null==r&&null==n&&null==a?i===De?qe.filter(e=>!(null!==r&&e.name===r.tileType.name||null!==a&&e.name===a.tileType.name||null!==n&&e.name===n.tileType.name)):qe.filter(e=>!(null!==s&&e.name===s.tileType.name||null!==n&&e.name===n.tileType.name)):[s,r,n,a].filter(e=>null!=e).map(e=>e.tileType))}block(e){this.isBlocked=!0,this.forEachTile(t=>t&&t.block(e))}unblock(e){this.isBlocked=!1,this.forEachTile(t=>t&&t.unblock(e))}},Ke=class extends Phaser.Scene{constructor(){super("RoundScene"),this.isAwaitingRoundTransition=!1,this.isReadyForRoundTransition=!1,this.isTransitioningRounds=!1,this.score=null,this.queue=null,this.selectedTiles=null,this.tileGrid=null,this.scoreDisplay=null,this.timer=null,this.levelClearMessage=null,this.levelClearMessageHighlight=null,this.guide=null,this.level=null,this.totalMatches=null}preload(){this.load.image("tile_01","assets/tile_01.png"),this.load.image("tile_02","assets/tile_02.png"),this.load.image("tile_03","assets/tile_03.png"),this.load.image("tile_04","assets/tile_04.png"),this.load.image("guide_character","assets/guide.png"),this.load.image("background","assets/background.png"),this.load.image("round_clear","assets/round_clear.png")}init(e){this.level=e.level||0}create(){this.isAwaitingRoundTransition=!1,this.isReadyForRoundTransition=!1,this.isTransitioningRounds=!1,this.score=0,this.totalMatches=0,this.queue=new class{constructor(){this.queuedActions=[],this.currentAction=null}isActionRunning(){return null!=this.currentAction}hasActions(){return this.queuedActions.length>0}next(){this.currentAction=this.queuedActions.shift(),this.currentAction()}push(e){var t=this;t.queuedActions.push(()=>{e().then(()=>{t.currentAction=null})})}},this.add.image(400,400,"background");const e=He[this.level].behavior;this.selectedTiles=[],this.tileGrid=new Ue(6,6,80,325,-265,this.onTileSelect,this.onTileMatch,e,this.queue),this.scoreDisplay=new class{constructor(e,t){this.x=e,this.y=t,this.scoreText=null,this.score=0}create(e){e.add.graphics({fillStyle:{color:14414079}}).setAlpha(.5).fillRoundedRect(this.x-150,this.y-10,300,80,10);this.scoreText=e.add.text(this.x,this.y,this.score,{color:"#000",fontFamily:'"Baloo Thambi 2"',fontStyle:"bold",fontSize:"30px"}),this.updateScore(this.score)}updateScore(e){this.score=e,this.scoreText.setText(e+" drops")}}(110,585);const t=He[this.level].timer;this.timer=t>0?new class{constructor(e,t,i){this.x=e,this.y=t,this.text=null,this.seconds=i,this.isPaused=!0}create(e){this.text=e.add.text(this.x,this.y,this.score),this.tick(),e.time.addEvent({delay:1e3,callback:this.tick,callbackScope:this,loop:!0})}tick(){if(this.seconds<=0||this.isPaused)return;this.seconds--;const e=Math.floor(this.seconds/60);let t=this.seconds%60;t<10&&(t="0"+t),this.text.setText(`${e}:${t}`)}start(){this.isPaused=!1}}(5,570,t):null;const i=(new class{getScript(e){const t=new class{constructor(){this.introMessages=[],this.getDisplayTileMatchMessages=()=>{}}};switch(e){case 0:t.introMessages=["*Oh, doozle, you made it!* You're here! (Click or tap anywhere!)","The Dew Drop Kingdom is in trouble!","We lost all of our dew drops and now we'll starve!","But you can help us by collecting as many dew drops as you can!","If you match three or more dew drops of the same color, we can collect them!","To make a match, select two dew drops and swap their places!"],t.getDisplayTileMatchMessages=e=>{if(1===e.totalMatches)return["You got it! That's it!","See if you can collect 100 dew drops!"]};break;case 1:t.introMessages=["*Oh, doozle!* You're so good at this!","But, we'll have to hurry this time!","We only have two minutes before the sun dries up all the dew drops!","Collect at least 200 dew drops in two minutes!"];break;case 2:t.introMessages=["Wow, we're so proud of you!","This round you'll only have 30 seconds to collect at least 300 dew drops!"],t.getGameOverMessages=()=>["Wait, wait, sorry, hold on.",'It\'s too early for the *"Lose in a Panic"* scenario.',"So sorry about that.","You've been really great so far, honestly.","You know, what, let's just go to the next round and we'll take it from the top."];break;case 3:t.introMessages=["Alright, I think we've got everything figured out.","Okay, for this next round, let me set you up:","Remember, you've been winning the last few rounds and you're gaining confidence.","In this round, it's going to be easy for you to get combos.","So the idea here is that you're going to get a little *too* confident, right?","Like a little full of yourself, alright?","Okay, great! Let's do this:","...","*Oh doozle woozle!*","You're so amazing!","You have two minutes again, but this time you'll have to collect 300 dew drops.","Can you do it?","Who am I kidding? Of course you can!"];break;case 4:t.introMessages=["Okay, okay, great stuff.","For this round, you're bringing all of that pride, all of that hubris.","And, when the round starts, things are still going your way.","But guess what?","Halfway through this round, things start getting a little harder.","So this is where we begin to chip away at your pride as the player.","Alright, that's your set up: now let me get into the right headspace.","...oh doozle woo-","...no, no, it's doozy-woozy here...","...yeah, doozy-woozy, you're our hero, blah, blah...","Alright! Got it!","...","*Doozy-woozy!*","You're our hero!","You've done so much for us, but we still need your help!","We need you to collect 500 dew drops in five minutes!"];break;case 5:t.introMessages=["Wow, such moving work.","It really feels so authentic.","It's been a joy working with you.","Okay, here we go, this is a pivotal scene:","This round will not go your way at all. At all.","This is your fall from grace.","(Ahem)","...","*Doozle!*","*Woozle!*","I can't believe you did it!","We've got a bigger challenge ahead, but I know you can do it!","You can do anything!","We need you to collect 1000 dew drops in five minutes!"];break;case 6:t.introMessages=["Okay, let's move right into the next scene:","Here, you are wallowing, right?","You are in the pit of despair and you can't see a way out.","This round won't be particularly hard, but you can't seem to find any matches.","Got it?","Alright, great: let me find my place here...","Yes, okay, I believed in you, but now my faith is faltering...","I'm keeping a brave face, but I'm really starting to lose confidence...","Okay, I'm ready!","...","Oh no!","*Whoopsie whoozle!*","Don't worry, that was a tough one!","Let's try again! I know you can do it!","We need you to collect 1000 dew drops in five minutes!"],t.getDisplayTileMatchMessages=e=>["(Oh, hey: remember, you're not going to find any matches this round)"];break;case 7:t.introMessages=["Now, you've been wallowing. You've feeling really low.","You're in such despair, that in this round...","There's an obvious combo.","Right there, right in front of your face.","But you can't see it through the despair.","But then, in the last ten seconds of the round, you see it.","Boom, it's the perfect match.","And the pheonix rises once again!"];break;case 8:t.introMessages=["Our hero is back!","This final scene is our victory lap.","However, we don't want too many combos in this round, right?","This is a round the player wins on their own.","No assistance from the game.","A true hero's victory!","Alright, let's do this: I've got an appointment after this."]}return t}}).getScript(this.level);this.guide=new class{constructor(e,t,i){this.x=e,this.y=t,this.script=i,this.queuedMessages=null,this.isPaused=!1,this.isBlockingGameplay=!1,this.endDialogueMarkerGraphics=null}create(e){const t=this,i=e.add.graphics({fillStyle:{color:16777215}}).setAlpha(0);i.fillRoundedRect(this.x,this.y-40,760,130,10),i.fillTriangle(this.x+120,this.y+130+20-40,this.x+105,this.y+130-40,this.x+135,this.y+130-40),this.endDialogueMarkerGraphics=e.add.graphics({fillStyle:{color:13421772}}),this.hideEndDialogueMarker();const s=new Phaser.Geom.Circle(this.x+760-10-15,this.y+130-10-15,10);this.endDialogueMarkerGraphics.fillCircleShape(s),e.tweens.add({targets:this.endDialogueMarkerGraphics,alpha:0,duration:500,repeat:-1,yoyo:!0});const r={color:"#000",fontFamily:'"Baloo Thambi 2"',fontSize:"30px",wrap:{mode:"word",width:760},tags:{exclamation:{fontStyle:"bold"}}};this.speechBubbleText=new Ce(e,this.x+15,this.y+15,"",r),e.add.existing(this.speechBubbleText),this.speechBubbleTextTyping=new ze(this.speechBubbleText,{speed:30}),this.speechBubbleTextTyping.on("complete",()=>{t.onMessageComplete.call(t)});const n=e.add.image(this.x-250,this.y+130+230,"guide_character"),a=e.tweens.createTimeline();a.add({delay:200,targets:n,x:this.x+125,duration:400,angle:15,ease:"Power1"}),a.add({targets:n,duration:400,angle:-7,ease:"Power1"}),a.add({targets:n,duration:400,angle:0,ease:"Power1"}),a.add({offset:"-=300",targets:i,props:{y:{value:"+=40",duration:500,ease:"Bounce.easeOut"},alpha:{value:1,duration:300,ease:"Linear"}},onComplete:()=>{t.queueMessages(e,this.script.introMessages)}}),a.play()}queueMessages(e,t){if(!t)return;const i=this;null===i.queuedMessages&&(i.queuedMessages=[]),i.queuedMessages.push(...t),i.speechBubbleTextTyping.isTyping||(i.isBlockingGameplay=!0,i.progressDialogue())}onMessageComplete(){this.showEndDialogueMarker(),0!==this.queuedMessages.length||(this.isBlockingGameplay=!1)}displayTileMatchMessage(e,t){const i=this.script.getDisplayTileMatchMessages(t);this.queueMessages(e,i)}displayGameOverMessage(e){const t=this.script.getGameOverMessages();t.push(" "),this.queueMessages(e,t)}progressDialogue(){if(this.hideEndDialogueMarker(),this.queuedMessages.length>0){const e=this.convertDialogToTagText(this.queuedMessages.shift());this.speechBubbleTextTyping.start(e)}}showEndDialogueMarker(){this.endDialogueMarkerGraphics.setVisible(!0)}hideEndDialogueMarker(){this.endDialogueMarkerGraphics.setVisible(!1)}convertDialogToTagText(e){const t=[{token:"*",className:"exclamation"},{token:"_",className:"underline"}];let i="",s="";for(let r=0;r<e.length;r++){const n=e[r],a=t.some(e=>e.token===n);if(0!==r||a||(i+='<class="normal">',s="normal"),r!==e.length-1||!a)if(a){const e=t.find(e=>e.token===n);s===e.className?(i+="</class>",i+='<class="normal">',s="normal"):(0!==r&&(i+="</class>"),i+=`<class="${e.className}">`,s=e.className)}else i+=e[r]}return i+="</class>",i}}(20,20,i),this.tileGrid.create(this),this.scoreDisplay.create(this),this.timer&&this.timer.create(this),this.guide.create(this),this.levelClearMessage=this.add.image(400,400,"round_clear"),this.levelClearMessage.setAlpha(0),this.levelClearMessageHighlight=this.add.image(400,400,"round_clear"),this.levelClearMessageHighlight.setAlpha(0),this.levelClearMessageHighlight.setTintFill(16777215);const s=this;this.input.on("pointerdown",()=>{s.guide.progressDialogue()})}update(){if(this.guide.isBlockingGameplay&&!this.tileGrid.isBlocked?this.tileGrid.block(this):!this.guide.isBlockingGameplay&&this.tileGrid.isBlocked&&this.tileGrid.unblock(this),!this.isAwaitingRoundTransition)return this.handleSpecialLevelBehavior(),!this.guide.isBlockingGameplay&&this.timer&&this.timer.isPaused&&this.timer.start(),null!=this.timer&&this.timer.seconds<=0?(this.guide.displayGameOverMessage(),void(this.isAwaitingRoundTransition=!0)):this.isLevelComplete()?(this.endLevel(),void(this.isAwaitingRoundTransition=!0)):void(this.queue.isActionRunning()||(this.queue.hasActions()?this.queue.next():this.tileGrid.update(this)));this.isReadyForRoundTransition&&!this.isTransitioningRounds&&this.nextLevel()}onTileSelect(e,t){if(!e.queue.isActionRunning()&&!e.guide.isBlockingGameplay&&e.tileGrid.canSelect(t)){if(t.isActivated)return e.selectedTiles=[],void t.deactivate();if(0===e.selectedTiles.length)return e.selectedTiles.push(t),void t.activate();if(1===e.selectedTiles.length){const i=e.selectedTiles[0],s=Math.abs(i.tileGridX-t.tileGridX),r=Math.abs(i.tileGridY-t.tileGridY);if(1===s&&0===r||0===s&&1===r){e.selectedTiles.push(t);let i=e.selectedTiles[0],s=e.selectedTiles[1];e.tileGrid.swapTiles(e,i,s),e.queue.push(()=>(e.tileGrid.hasMatches(i.tileGridX,i.tileGridY)||e.tileGrid.hasMatches(s.tileGridX,s.tileGridY)||e.tileGrid.swapTiles(e,i,s),Promise.resolve())),e.selectedTiles.forEach(e=>{e.deactivate()}),e.selectedTiles=[]}}}}onTileMatch(e,t){e.totalMatches++,e.score+=t.length,e.scoreDisplay.updateScore(e.score)}isLevelComplete(){return this.score>=He[this.level].score}handleSpecialLevelBehavior(){const e=He[this.level].handler;e&&e({tileGrid:this.tileGrid,score:this.score,level:this.level})}endLevel(){const e=this;e.isTransitioningRounds=!0,this.levelClearMessageHighlight.setAlpha(1),e.tweens.add({targets:this.levelClearMessageHighlight,alpha:0,duration:1e3}),e.tweens.add({targets:this.levelClearMessage,alpha:1,duration:1e3,completeDelay:2e3,onComplete:()=>{e.isReadyForRoundTransition=!0,e.isTransitioningRounds=!1}})}nextLevel(){this.scene.restart({level:this.level+1})}};const Ve={type:Phaser.AUTO,width:800,height:700,scene:[s,Ke]};new Phaser.Game(Ve)}]);
//# sourceMappingURL=bundle.js.map