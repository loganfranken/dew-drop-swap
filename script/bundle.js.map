{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/WebGLRenderer.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/CanvasRenderer.js","webpack:///./node_modules/webfontloader/webfontloader.js","webpack:///./script/FontStyleManifest.js","webpack:///./script/scenes/LoadingScene.js","webpack:///./script/TileGenerationBehavior.js","webpack:///./script/LevelManifest.js","webpack:///./script/ActionScriptManifest.js","webpack:///./script/EventEmitter.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/Render.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/textstyle/MeasureText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/const.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/textstyle/TextStyle.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/DrawMethods.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/struct/Stack.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/pool.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/penmanger/Pen.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/Clear.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/Clone.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/NOOP.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/penmanger/PenManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/hitareamanager/HitAreaManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/SetInteractive.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/WrapText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/CanvasText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/imagemanager/ImageManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/imagemanager/GetGlobImageManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/Text.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Parser.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/TagText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Creator.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/tagtext.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Factory.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/eventemitter/EventEmitterMethods.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/system/IsSceneObject.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/system/GetSceneObject.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/behaviors/texttyping/TextTyping.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/texttyping.js","webpack:///./script/Guide.js","webpack:///./script/MuteControl.js","webpack:///./script/Utility.js","webpack:///./script/TileState.js","webpack:///./script/TileType.js","webpack:///./script/TileGrid.js","webpack:///./script/Tile.js","webpack:///./script/Timer.js","webpack:///./script/scenes/RoundScene.js","webpack:///./script/ActionQueue.js","webpack:///./script/ScoreDisplay.js","webpack:///./script/Director.js","webpack:///./script/scenes/TitleScene.js","webpack:///./script/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Utils","Phaser","Renderer","WebGL","renderer","src","interpolationPercentage","camera","parentMatrix","width","height","frame","getTint","getTintAppendFloatAlpha","this","pipeline","batchTexture","glTexture","x","y","style","resolution","scaleX","scaleY","rotation","flipX","flipY","scrollFactorX","scrollFactorY","displayOriginX","displayOriginY","_tintTL","alpha","_alphaTL","_tintTR","_alphaTR","_tintBL","_alphaBL","_tintBR","_alphaBR","_isTinted","tintFill","batchSprite","aa","a","b","apply","arguments","ba","Error","length","Array","slice","unshift","Function","toString","indexOf","q","Date","now","ca","document","da","window","FontFace","createElement","e","cssText","setAttribute","appendChild","createTextNode","u","getElementsByTagName","documentElement","insertBefore","lastChild","v","parentNode","removeChild","w","className","split","f","g","push","join","replace","z","rel","href","media","onload","onerror","setTimeout","A","onreadystatechange","readyState","tagName","B","C","D","E","F","G","match","parseInt","I","test","J","H","ga","substr","toLowerCase","ha","h","j","events","classes","L","K","ja","M","N","O","P","Q","start","Promise","fonts","load","fa","then","race","clearTimeout","R","S","T","exec","navigator","userAgent","la","U","offsetWidth","serif","V","ma","W","X","na","oa","qa","k","xa","vendor","ra","sa","ta","ua","context","timeout","ia","ka","pa","projectId","version","api","fontfamily","fontStyle","fontWeight","id","urls","families","testStrings","ya","za","latin","cyrillic","greek","khmer","Hanuman","Aa","thin","extralight","ultralight","light","regular","book","medium","semibold","demibold","bold","extrabold","ultrabold","black","heavy","Ba","italic","normal","Ca","Ea","Fa","Arimo","Cousine","Tinos","Ga","Ha","text","pop","va","isNaN","Da","encodeURIComponent","wa","Typekit","config","fn","async","__webfontfontdeckmodule__","weight","location","hostname","ea","Y","custom","fontdeck","monotype","typekit","google","Z","color","fontFamily","googleFontName","fontSize","super","FontStyleManifest","image","audio","background","add","graphics","fillStyle","fillRect","progressBox","self","progressBar","on","clear","tweens","targets","duration","startBtn","setInteractive","cursor","setAlpha","scene","transition","target","remove","score","behavior","TileGenerationBehavior","timer","blockMatching","Math","Infinity","level","do","filter","state","matches","actions","LevelManifest","ticks","isBlockingMatches","persist","subscriptions","eventName","callback","subscription","forEach","renderWebGL","renderCanvas","CanvasPool","Display","Canvas","textStyle","canvas","getContext","syncFont","ceil","measureText","testString","baselineX","baseline","baselineY","font","_font","textBaseline","fillText","output","ascent","descent","getImageData","imagedata","data","pixels","line","idx","stop","NO_NEWLINE","RAW_NEWLINE","WRAPPED_NEWLINE","NO_WRAP","WORD_WRAP","CHAR_WRAP","SPLITREGEXP","GetAdvancedValue","Objects","GetValue","propertyMap","backgroundColor","stroke","strokeThickness","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","shadowStroke","shadowFill","underlineColor","underlineThickness","underlineOffset","halign","valign","maxLines","fixedWidth","fixedHeight","lineSpacing","rtl","wrapMode","wrapWidth","WRAPMODE","none","word","char","character","parent","setStyle","metrics","updateText","undefined","wrap","fill","update","strokeStyle","lineWidth","lineCap","lineJoin","enabled","recalculateMetrics","newFont","family","size","string","thickness","blur","offset","max","getTextMetrics","startX","startY","boxWidth","boxHeight","penManager","hitAreaManager","save","drawBackground","defatultStyle","startXOffset","startYOffset","drawLinesNum","drawLineStartIdx","drawLineEndIdx","offsetX","offsetY","lineHeight","lines","totalLinesNum","floor","lineIdx","getLineWidth","pens","penIdx","pensLen","drawPen","restore","pen","curStyle","parser","propToContextStyle","prop","buildFont","syncStyle","drawUnderline","isTextPen","drawText","isImagePen","drawImage","img","hasAreaMarker","area","clearRect","autoRound","round","savedLineCap","beginPath","moveTo","lineTo","syncShadow","strokeText","imgKey","imageManager","imgData","getFrame","left","source","cutX","cutY","cutWidth","cutHeight","items","arr","resetFromJSON","newLineMode","startIndex","txt","len","rawTextLength","obj","isArray","out","objIsArray","cnt","GetFastValue","PensPool","LinesPool","maxLinesWidth","tagToText","tagToTextScope","freePens","pushMultiple","PEN_CONFIG","addPen","addTextPen","previousPen","lastPen","lastX","endIndex","lastLine","targetPenManager","li","llen","pi","plen","getLineEndIndex","hasLastPen","maxW","result","plainText","end","penTxt","penStartIdx","penEndIdx","currentProp","previousProp","wrapText","substring","Rectangle","Geom","RectanglePool","hitAreas","rectangle","setTo","hitArea","contains","scaleCanvas","rotateCanvas","translateCanvas","lineStyle","strokeRect","FireEvent","pointer","localX","localY","getFirstHitArea","emit","event","splitRegExp","WRAP_RESULT","newline","getTextWidth","retLines","remainWidth","linesLen","tokenArray","token","textWidth","currLineWidth","curLineText","lineText","tokenLen","pensPool","newPenManager","_tmpPenManager","destroy","curProp","wrapLines","cursorX","cursorY","splitText","tagTextToProp","imgWidth","getOuterWidth","addNewLinePen","addImagePen","jLen","linesCount","getMaxLineWidth","desplayLinesCount","linesHeight","propToTagText","retPenManager","copyPenManager","updatePenManager","getSliceTagText","tmpPenManager","ret","copy","methods","assign","DrawMethods","globImageManager","textureManager","images","_add","textureKey","frameKey","frameWidth","frameHeight","right","exists","AddToDOM","DOM","GameObject","GameObjects","RemoveFromDOM","PensPools","type","sys","game","setPosition","setOrigin","initPipeline","align","_text","padding","top","bottom","dirty","_crop","resetCropObject","texture","textures","addCanvas","gl","deleteTexture","canvasText","setPadding","setText","dir","direction","display","originX","setFont","setFontFamily","setFontSize","setFontStyle","setFixedSize","setBackgroundColor","setFill","setColor","setStroke","setShadow","setShadowOffset","setShadowColor","setShadowBlur","setShadowStroke","setShadowFill","setWrapMode","setWrapWidth","setHAlign","setLineSpacing","setResolution","setMaxLines","runWrap","textHeight","linesWidth","updateDisplayOrigin","setSize","scale","draw","canvasToTexture","input","customHitArea","Components","ToJSON","toJSON","shape","dropZone","getText","getPlainText","getPenManager","drawBounds","Class","mixin","Alpha","BlendMode","ComputedSize","Crop","Depth","Flip","GetBounds","Mask","Origin","Pipeline","ScrollFactor","Tint","Transform","Visible","Render","GETPROP_RESULT","prevProp","STYLE_RESULT","styleToProp","slen","isEmpty","thinkness","shadow","RE_SPACE","RE_SPLITTEXT","RE_CLASS_HEADER","RE_CLASS","RE_STYLE_HEADER","RE_STYLE","tags","innerMatch","charIdx","totalLen","matchStart","lastIndex","propOut","_class","_style","defaultStyle","underline","isTextTag","tag","Parser","addTag","preDestroy","BuildGameObject","GameObjectFactory","register","gameObject","existing","GameObjectCreator","content","addToScene","eventEmitter","EventEmitterClass","Events","EventEmitter","_privateEE","_eventEmitter","shutdown","once","off","addListener","removeListener","removeAllListeners","listenerCount","listeners","SceneClass","Scene","setEventEmitter","boot","setTypeMode","setTypeSpeed","setTextCallback","setTextCallbackScope","typingIdx","transferText","textLen","insertIdx","elapsed","getTimer","typeMode","speed","destroyEventEmitter","freeTimer","TYPEMODE","startIdx","timerStartAt","setTypingContent","startTimer","newText","concat","isTyping","showAllText","paused","getTextLength","getTypingString","isLastChar","delay","typeIdx","endIdx","getSubString","midIdx","lowerResult","lowerLen","upperResult","upperLen","startAt","time","addEvent","loop","onTyping","callbackScope","EventEmitterMethods","isIntro","hideEndDialogueMarkerOnMessageComplete","endDialogueMarkerGraphics","characterWidth","characterExpression","speechBubbleGraphics","speechBubbleText","expressions","default","faceY","bodyAngle","surprise","sadness","despair","glee","nervous","confused","neutral","amused","thoughtful","isTalking","speechBubbleGraphicsY","speechBubbleGraphicsTriangleY1","speechBubbleGraphicsTriangleY2","setDepth","fillRoundedRect","fillTriangle","hideEndDialogueMarker","endDialogueMarker","Circle","fillCircleShape","repeat","yoyo","speechBubbleTextStyle","speechBubbleWidth","exclamation","speechBubbleTextTyping","messageCompleted","characterX","container","characterImage","startingExpression","characterExpressionY","sprite","addCounter","loopDelay","from","to","onUpdate","tween","currOffset","getValue","setCrop","introTimeline","createTimeline","angle","ease","props","onComplete","play","message","convMessage","convertDialogToTagText","showEndDialogueMarker","setVisible","setTexture","isCropped","expressionInfo","styles","currClass","currChar","isStyleToken","some","targetStyle","find","muteIcon","isMuted","baseIcon","toggleMute","sound","mute","getRandomItem","random","imageKey","tileGridWidth","tileGridHeight","tileSize","onTileSelect","onTileMatch","tileGenerationBehavior","queue","isInitialized","isBlocked","tileGrid","tileImageContainer","playAreaOffset","gridBackground","matchSound","swapSound","preSetTileGrid","maskShape","make","mask","Masks","GeometryMask","matchSounds","matchedTiles","getMatches","hasMatched","destroys","all","forEachTile","tile","TileState","drops","closestY","closestTile","getTileDrop","forEachPlayableTile","adjustedY","createTile","getTileType","firstTile","secondTile","firstTileX","firstTileY","firstTileGridX","tileGridX","firstTileGridY","tileGridY","secondTileX","secondTileY","secondTileGridX","secondTileGridY","firstSwap","updatePosition","secondSwap","targetGridX","targetGridY","isPlayable","targetTileType","tileType","matchedXTiles","matchedYTiles","currX","currTile","currY","uniqueMatchedTiles","initialDrag","isActivated","hasDragged","setTintFill","clearTint","isDrop","yDiff","abs","resolve","reject","tweenInfo","fadeOutCover","particleGraphics","explodeParticleGraphics","explodeParticle","Between","index","xSign","ySign","getTileX","getTileY","aboveTile","belowTile","leftTile","rightTile","TileType","map","exceptions","exception","block","unblock","getPreSetTileType","intensity","icon","warningTweens","warningIcon","warningSound","timerRunOutSound","isPaused","isDisplayingWarning","getTimeOutput","tick","displayWarning","seconds","repeatDelay","isAwaitingRoundTransition","isReadyForRoundTransition","isTransitioningRounds","comboCount","selectedTiles","scoreDisplay","levelClearMessage","levelClearMessageHighlight","director","guide","emitter","totalMatches","tileSelectSound","lightsOffSound","roundClearSound","isRoundTransitionComplete","queuedActions","currentAction","shift","action","TileGrid","scoreBackground","scoreIcon","scoreText","updateScore","timerSeconds","Timer","Guide","actionScript","ActionScriptManifest","getScript","script","gameOverSubscriptions","isGuideReady","isWaiting","next","queueActions","isLastMessage","every","handleMessage","handleAction","handleEvent","wait","hideEndDialogMarker","displayMessage","updateTileGenerationBehavior","updateExpression","hide","levelInfo","getScoreRelativeTicks","show","endLevel","turnOffLights","pauseBackgroundMusic","resumeBackgroundMusic","setUpEvent","wrapFilter","getCurrentState","targetTicks","currScore","targetScore","trunc","MuteControl","isLevelComplete","isActionRunning","hasActions","nextLevel","isBlockingGameplay","canSelect","updateMatchSound","deactivate","activate","selectedTile","xDiff","firstSelectedTile","secondSelectedTile","swapTiles","hasMatches","clearSelectedTiles","endLevelTimeline","setScale","flashBackdropGraphics","flashBackdrop","fillRectShape","levelClearBackdrop","completeDelay","disappear","restart","lights","enable","setAmbientColor","setPipeline","addLight","setIntensity","backgroundMusic","pause","resume","startingLevel","isExiting","tileInfos","title","startBtnOverlay","xChange","yChange","tileInfo","tileFlash","startBtnFlash","selectSound","transitionToNextScene","introSlideSound","flashTiles","exitTimeline","AUTO","LoadingScene","TitleScene","RoundScene","Game"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nvar Utils = Phaser.Renderer.WebGL.Utils;\r\n\r\n/**\r\n * Renders this Game Object with the WebGL Renderer to the given Camera.\r\n * The object will not render if any of its renderFlags are set or it is being actively filtered out by the Camera.\r\n * This method should not be called directly. It is a utility function of the Render module.\r\n *\r\n * @method Phaser.GameObjects.Text#renderWebGL\r\n * @since 3.0.0\r\n * @private\r\n *\r\n * @param {Phaser.Renderer.WebGL.WebGLRenderer} renderer - A reference to the current active WebGL renderer.\r\n * @param {Phaser.GameObjects.Text} src - The Game Object being rendered in this call.\r\n * @param {number} interpolationPercentage - Reserved for future use and custom pipelines.\r\n * @param {Phaser.Cameras.Scene2D.Camera} camera - The Camera that is rendering the Game Object.\r\n * @param {Phaser.GameObjects.Components.TransformMatrix} parentMatrix - This transform matrix is defined if the game object is nested\r\n */\r\nvar TextWebGLRenderer = function (renderer, src, interpolationPercentage, camera, parentMatrix) {\r\n    if ((src.width === 0) || (src.height === 0)) {\r\n        return;\r\n    }\r\n\r\n    var frame = src.frame;\r\n    var width = frame.width;\r\n    var height = frame.height;\r\n    var getTint = Utils.getTintAppendFloatAlpha;\r\n\r\n    this.pipeline.batchTexture(\r\n        src,\r\n        frame.glTexture,\r\n        width, height,\r\n        src.x, src.y,\r\n        width / src.style.resolution, height / src.style.resolution,\r\n        src.scaleX, src.scaleY,\r\n        src.rotation,\r\n        src.flipX, src.flipY,\r\n        src.scrollFactorX, src.scrollFactorY,\r\n        src.displayOriginX, src.displayOriginY,\r\n        0, 0, width, height,\r\n        getTint(src._tintTL, camera.alpha * src._alphaTL),\r\n        getTint(src._tintTR, camera.alpha * src._alphaTR),\r\n        getTint(src._tintBL, camera.alpha * src._alphaBL),\r\n        getTint(src._tintBR, camera.alpha * src._alphaBR),\r\n        (src._isTinted && src.tintFill),\r\n        0, 0,\r\n        camera,\r\n        parentMatrix\r\n    );\r\n};\r\n\r\nmodule.exports = TextWebGLRenderer;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\n/**\r\n * Renders this Game Object with the Canvas Renderer to the given Camera.\r\n * The object will not render if any of its renderFlags are set or it is being actively filtered out by the Camera.\r\n * This method should not be called directly. It is a utility function of the Render module.\r\n *\r\n * @method Phaser.GameObjects.Text#renderCanvas\r\n * @since 3.0.0\r\n * @private\r\n *\r\n * @param {Phaser.Renderer.Canvas.CanvasRenderer} renderer - A reference to the current active Canvas renderer.\r\n * @param {Phaser.GameObjects.Text} src - The Game Object being rendered in this call.\r\n * @param {number} interpolationPercentage - Reserved for future use and custom pipelines.\r\n * @param {Phaser.Cameras.Scene2D.Camera} camera - The Camera that is rendering the Game Object.\r\n * @param {Phaser.GameObjects.Components.TransformMatrix} parentMatrix - This transform matrix is defined if the game object is nested\r\n */\r\nvar TextCanvasRenderer = function (renderer, src, interpolationPercentage, camera, parentMatrix) {\r\n    if ((src.width === 0) || (src.height === 0)) {\r\n        return;\r\n    }\r\n\r\n    renderer.batchSprite(src, src.frame, camera, parentMatrix);\r\n};\r\n\r\nmodule.exports = TextCanvasRenderer;\r\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","export default {\r\n\r\n    Default: {\r\n        color: '#000',\r\n        fontFamily: '\"Baloo Thambi 2\"',\r\n        googleFontName: 'Baloo Thambi 2:500;700',\r\n        fontSize: '30px'\r\n    }\r\n\r\n};","\r\nimport FontStyleManifest from '../FontStyleManifest';\r\nimport WebFontLoader from 'webfontloader';\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('LoadingScene');\r\n    }\r\n\r\n    preload()\r\n    {\r\n        WebFontLoader.load({\r\n            google: {\r\n                families: [FontStyleManifest.Default.googleFontName]\r\n            }\r\n        });\r\n\r\n        // Images: Tiles\r\n        this.load.image('tile_01', 'assets/images/tile_01.png');\r\n        this.load.image('tile_02', 'assets/images/tile_02.png');\r\n        this.load.image('tile_03', 'assets/images/tile_03.png');\r\n        this.load.image('tile_04', 'assets/images/tile_04.png');\r\n\r\n        // Images: Guide\r\n        this.load.image('guide_character', 'assets/images/guide.png');\r\n\r\n        // Images: Background\r\n        this.load.image('background', [ 'assets/images/background.png', 'assets/images/background_n.png' ]);\r\n\r\n        // Images: Load\r\n        this.load.image('load_start', 'assets/images/load_start.png');\r\n\r\n        // Images: Title\r\n        this.load.image('title', 'assets/images/title.png');\r\n        this.load.image('start', 'assets/images/start.png');\r\n        this.load.image('start-active', 'assets/images/start_active.png');\r\n\r\n        // Images: Round Clear\r\n        this.load.image('round_clear', 'assets/images/round_clear.png');\r\n        this.load.image('round_clear_backdrop', 'assets/images/round_clear_backdrop.png');\r\n\r\n        // Images: Icons\r\n        this.load.image('icon_tile', 'assets/images/icon_tile.png');\r\n        this.load.image('icon_timer', 'assets/images/icon_timer.png');\r\n        this.load.image('icon_timer_warning', 'assets/images/icon_timer_warning.png');\r\n        this.load.image('icon_audio', 'assets/images/icon_audio.png');\r\n        this.load.image('icon_audio_mute', 'assets/images/icon_audio_mute.png');\r\n\r\n        // Images: Expressions\r\n        this.load.image('expression_default', 'assets/images/expression_default.png');\r\n        this.load.image('expression_surprise', 'assets/images/expression_surprise.png');\r\n        this.load.image('expression_sadness', 'assets/images/expression_sadness.png');\r\n        this.load.image('expression_despair', 'assets/images/expression_despair.png');\r\n        this.load.image('expression_glee', 'assets/images/expression_glee.png');\r\n        this.load.image('expression_nervous', 'assets/images/expression_nervous.png');\r\n        this.load.image('expression_confused', 'assets/images/expression_confused.png');\r\n        this.load.image('expression_neutral', 'assets/images/expression_neutral.png');\r\n        this.load.image('expression_amused', 'assets/images/expression_amused.png');\r\n        this.load.image('expression_thoughtful', 'assets/images/expression_thoughtful.png');\r\n\r\n        // Music\r\n        this.load.audio('background_music', 'assets/sounds/background_music.mp3');\r\n\r\n        // Sound Effects\r\n        this.load.audio('match', 'assets/sounds/match.mp3');\r\n        this.load.audio('match_combo_01', 'assets/sounds/match_combo_01.mp3');\r\n        this.load.audio('match_combo_02', 'assets/sounds/match_combo_02.mp3');\r\n        this.load.audio('match_combo_03', 'assets/sounds/match_combo_03.mp3');\r\n        this.load.audio('match_combo_04', 'assets/sounds/match_combo_04.mp3');\r\n        this.load.audio('match_combo_05', 'assets/sounds/match_combo_05.mp3');\r\n        this.load.audio('swap', 'assets/sounds/swap.mp3');\r\n        this.load.audio('tile_select', 'assets/sounds/tile_select.mp3');\r\n        this.load.audio('warning_tick', 'assets/sounds/warning_tick.mp3');\r\n        this.load.audio('timer_run_out', 'assets/sounds/timer_run_out.mp3');\r\n        this.load.audio('lights_off', 'assets/sounds/lights_out.mp3');\r\n        this.load.audio('round_clear', 'assets/sounds/intro_slide.mp3');\r\n        this.load.audio('select', 'assets/sounds/select.mp3');\r\n        this.load.audio('intro_slide', 'assets/sounds/intro_slide.mp3');\r\n\r\n        // Loading Graphics\r\n        // Based on: https://gamedevacademy.org/creating-a-preloading-screen-in-phaser-3/\r\n\r\n        const background = this.add.graphics();\r\n        background.fillStyle(0x111111);\r\n        background.fillRect(0, 0, 800, 700);\r\n\r\n        this.progressBox = this.add.graphics();\r\n        this.progressBox.fillStyle(0x222222, 0.8);\r\n        this.progressBox.fillRect(240, 330, 320, 50);\r\n\r\n        const self = this;\r\n        this.progressBar = this.add.graphics();\r\n        this.load.on('progress', function (value) {\r\n            self.progressBar.clear();\r\n            self.progressBar.fillStyle(0xffffff, 0.8);\r\n            self.progressBar.fillRect(250, 340, 300 * value, 30);\r\n        });\r\n    }\r\n\r\n    create()\r\n    {\r\n        this.tweens.add({\r\n            targets: [this.progressBox, this.progressBar],\r\n            alpha: 0,\r\n            duration: 200\r\n        });\r\n\r\n        const self = this;\r\n        this.startBtn = this.add.image(400, 350, 'load_start');\r\n        this.startBtn.setInteractive({ cursor: 'pointer' });\r\n        this.startBtn.setAlpha(0);\r\n        this.startBtn.on('pointerdown', () => {\r\n            self.scene.transition({ target: 'TitleScene', remove: true });\r\n        });\r\n\r\n        this.tweens.add({\r\n            targets: [this.startBtn],\r\n            alpha: 1,\r\n            duration: 200\r\n        });\r\n    }\r\n}","export default {\r\n    None: 0,\r\n    EasyWin: 1,\r\n    Hard: 2,\r\n    PreSet: 3\r\n};","import TileGenerationBehavior from \"./TileGenerationBehavior\";\r\n\r\nexport default [\r\n\r\n    // 0\r\n    {\r\n        score: 50,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 1\r\n    {\r\n        score: 100,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 2\r\n    {\r\n        score: 100,\r\n        timer: 30,\r\n        behavior: TileGenerationBehavior.Hard\r\n    },\r\n\r\n    // 3\r\n    {\r\n        score: 200,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.EasyWin\r\n    },\r\n\r\n    // 4\r\n    {\r\n        score: 250,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.EasyWin\r\n    },\r\n\r\n    // 5\r\n    {\r\n        score: 300,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.Hard\r\n    },\r\n\r\n    // 6\r\n    {\r\n        score: 100,\r\n        timer: 60,\r\n        behavior: TileGenerationBehavior.None,\r\n        blockMatching: true\r\n    },\r\n\r\n    // 7\r\n    {\r\n        score: 30,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.PreSet,\r\n        blockMatching: true\r\n    },\r\n\r\n    // 8\r\n    {\r\n        score: 300,\r\n        timer: 180,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 9\r\n    {\r\n        score: Math.Infinity,\r\n        behavior: TileGenerationBehavior.None\r\n    }\r\n];","import LevelManifest from './LevelManifest';\r\nimport TileGenerationBehavior from './TileGenerationBehavior';\r\n\r\nexport default {\r\n\r\n    getScript(level)\r\n    {\r\n        switch(level)\r\n        {\r\n            // Level 0 (Intro)\r\n            case 0:\r\n                \r\n                return [\r\n\r\n                    // Script\r\n                    `*Oh, doozle, you made it!* You're here! (Click or tap anywhere!)`,\r\n                    { do: 'updateGuideExpression', value: 'sadness' },\r\n                    `The Dew Drop Kingdom is in trouble!`,\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `We lost all of our dew drops and now we'll starve!`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    { do: 'dropTiles' },\r\n                    `But you can help us by collecting as many dew drops as you can!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `If you match three or more dew drops of the same color, we can collect them!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    `To make a match, select two dew drops and swap their places!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches >= 1),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `You got it! That's it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                            { do: 'showScoreDisplay' },\r\n                            `See if you can collect *50 dew drops*!`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches > 1),\r\n                        actions: [\r\n                            { do: 'showScoreDisplay' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches === 5),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Wow!* Look at you go!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[0].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Doozle!* You're almost there!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n\r\n                ];\r\n\r\n            // Level 1 (Timer Intro)\r\n            case 1:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Oh, doozle!* You're so good at this!`,\r\n                    { do: 'updateGuideExpression', value: 'nervous' },\r\n                    `But, we'll have to hurry this time!`,\r\n                    { do: 'dropTiles' },\r\n                    `We only have two minutes before the sun dries up all the dew drops!`,\r\n                    { do: 'showTimerDisplay' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `Collect at least *100 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches === 5),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Doozle!* What a match!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `You're halfway there! You can do it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `Only *30 seconds* left! You can do this!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Uhh?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `I think there's been a mix-up.`,\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Did you get the wrong script?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `You're supposed to win this time.`,\r\n                            `Well, whatever, I'm sure we can just fix it up in post.`,\r\n                            `Let's just move onto the next round.`,\r\n                            { do: 'endLevel' },\r\n                            { do: 'resumeBackgroundMusic' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 2 (Breaking the Fourth Wall)\r\n            case 2:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Wow, we're so proud of you!`,\r\n                    `How did you get so goo...`,\r\n                    { do: 'updateGuideExpression', value: 'nervous' },\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Eezle!* That sun is hot!`,\r\n                    `You're going to have to move even quicker this time!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `But we know you can do it!`,\r\n                    `This round you'll only have *30 seconds* to collect *100 dew drops*!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Wait, wait, sorry, hold on.`,\r\n                            `We're not doing the *\\\"Lose in a Panic\\\"* scenario today.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `So sorry about that.`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `You've been really great so far, honestly.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Let's just go ahead and take it from the top.`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Wait, is that...`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, I think you were supposed to lose here.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Yeah, hmm. This was the *\\\"Lose in a Panic\\\"* scenario.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `You know what, that's fine.`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Let's roll with it.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `We'll just move to the next round.`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 3 (Easy Win)\r\n            case 3:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, I think we've got everything figured out.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, for this next round, let me set you up:`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Remember, you've been winning the last few rounds and you're gaining confidence.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `In this round, it's going to be easy for you to get combos.`,\r\n                    `So you're going to get a little *too* confident, right?`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Like a little full of yourself, yeah?`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, great! Let's do this:`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    \"...\",\r\n                    \"...\",\r\n                    \"...\",\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `*Oh doozle woozle!*`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `You're so amazing!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'dropTiles' },\r\n                    `You have *two minutes* again, but this time you'll have to collect *200 dew drops*.`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Can you do it?`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Who am I kidding? Of course you can!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Oh, uhh?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, you win this round too.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Uhh, hmm...`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Okay, here's what we'll do:`,\r\n                            { do: 'revokeLevelTransition' },\r\n                            { do: 'updateTimer', value: 1 },\r\n                            { do: 'stopTimer' },\r\n                            { do: 'unblockTileGrid' },\r\n                            { do: 'resumeBackgroundMusic' },\r\n                            `Go ahead and finish out the round and we'll edit it together later.`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.25)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `Look at you go! You're our hero!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `*Wow!* You're unstoppable!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.75)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Oozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.85)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Woozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.95)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `*Doozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 4 (Losing Confidence)\r\n            case 4:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, okay, great stuff.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `For this round, you're bringing all of that pride, all of that hubris.`,\r\n                    `And, when the round starts, things are still going your way.`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `But guess what?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Halfway through this round, things start getting a little harder.`,\r\n                    `So this is where we begin to chip away at your pride as the player.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright, that's your set up: now let me get into the right headspace.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...oh doozle woo-`,\r\n                    `...oh wait...`,\r\n                    `...no, doozy-woozy...`,\r\n                    `...yeah, doozy-woozy, you're our hero...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright! Got it!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Doozy-woozy!*`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `You're our hero!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `You've done so much for us, but we still need your help!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `We need you to collect *250 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.25) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `Nothing can stop you!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.5) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            { do: 'updateTileGenerationBehavior', value: TileGenerationBehavior.Hard },\r\n                            `Alright, we're going to crank up that difficulty now.`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.75) },\r\n                        actions: [\r\n                            `Come on! You can do it!`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Oh, a game over?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `We had a win penciled in here.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Maybe a game over could work?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, you know what:`,\r\n                            { do: 'revokeLevelTransition' },\r\n                            { do: 'updateTimer', value: 1 },\r\n                            { do: 'stopTimer' },\r\n                            { do: 'unblockTileGrid' },\r\n                            { do: 'resumeBackgroundMusic' },\r\n                            `Just go ahead and finish this off as a win.`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 5 (Fall From Grace)\r\n            case 5:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Wow, great stuff.`,\r\n                    `I know this is cliché, but it really feels so authentic.`,\r\n                    `It's been great working with you. You really sell it.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay, here we go, this is a pivotal scene:`,\r\n                    `This round will not go your way at all. At all.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `This is your fall from grace.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `(Ahem)`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Doozle!*`,\r\n                    `*Woozle!*`,\r\n                    `I can't believe you did it!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `We've got a bigger challenge ahead, but I know you can do it!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `You can do anything!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `We need you to collect *300 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `Oh no!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `*Whoopsie whoozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `You didn't make it in time!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `It's okay, though!`,\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `It's okay!`,\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                            `You can try again!`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.75) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Oh, wait, hold on: you're not supposed to be doing well this round, remember?`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Hey, I know it can be tough when you get in the flow.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Let's just lock the tiles until the end.`,\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 15),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `You're so close! Don't give up!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 6 (Wallowing)\r\n            case 6:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay, let's move right into the next scene:`,\r\n                    `Here, you are wallowing, right?`,\r\n                    `You are in the pit of despair and you can't see a way out.`,\r\n                    `This round won't be particularly hard, but you can't seem to find any matches.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Got it?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, great: let me find my place here...`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...yes, yes, my faith is faltering...`,\r\n                    `...keeping a brave face...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, I'm ready!`,\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `Don't worry, that was a tough one!`,\r\n                    { do: 'dropTiles' },\r\n                    `Let's try again! We believe in you!`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `We know you can do it!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `This time, you just need to get *100 dew drops* in *one minute!*`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'swap',\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Hey, remember: you don't get any matches this round.`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 45),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `Don't worry! You can do it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `You just need to get a few matches!`,\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 15),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `Please, we're running out of time!`,\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `Oh no!`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `*Eezle weezle!*`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `You didn't collect any dew drops!`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `We'll starve!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `*Please!* You have to save us!`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 7 (Pheonix Rises)\r\n            case 7:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Wow, I'm really feeling it.`,\r\n                    `How about you?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, next up:`,\r\n                    `You've been wallowing.`,\r\n                    `You're feeling really low.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `And, you're in such despair, that in this round...`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `There's an obvious combo.`,\r\n                    `Right there, right in front of your face.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `But you can't see it through the despair.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `But then, in the last 30 seconds of the round, you see it!`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `The perfect match.`,\r\n                    `And the pheonix rises once again!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright! Here we go!`,\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `Oh, boozle...`,\r\n                    `What will we do?`,\r\n                    { do: 'updateGuideExpression', value: 'sadness' },\r\n                    `Please, you're our only hope!`,\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `We have one more chance...`,\r\n                    { do: 'dropTiles' },\r\n                    `Please! Save our kingdom! Just get *30 dew drops* in *two minutes*!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'swap',\r\n                        filter: (state) => (state.ticks > 30 && state.isBlockingMatches),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Hold on, it's not time to swap yet.`,\r\n                            `Wait until there's only *30 seconds* left.`,\r\n                            { do: 'updateGuideExpression', value: 'despair' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks <= 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            { do: 'stopTimer' },\r\n                            `Alright, here we go.`,\r\n                            `Just to make sure we get this right, we'll stop the timer.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `And we'll highlight the match you'll want to make.`,\r\n                            { do: 'blockTileGrid', value: [ [9, 2], [9, 3] ] },\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `And the rest is up to you!`,\r\n                            { do: 'revokeBlockMatching' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'swap',\r\n                        filter: (state) => (!state.isBlockingMatches),\r\n                        actions: [\r\n                            { do: 'unblockTileGrid' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 8 (Victory Lap)\r\n            case 8:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Hey, our hero is back!`,\r\n                    `Very moving work.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay: this next scene is the last one.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `It's your victory lap.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `To sell this one, we really need to get the pacing right.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `We want you getting a steady flow of matches the whole time.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `If you win too early, it's no fun to watch, you know?`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `But don't worry, we got your back.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `We'll just advance the timer as you get matches, yeah?`,\r\n                    `And then we can edit it all together later.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright! Let's wrap this up!`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Oh doozie woozie!*`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `I knew you could do it!`,\r\n                    `You're our hero!`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Oozle!*`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Look at all of those dew drops!`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Now's our chance!`,\r\n                    `If you can gather up a big haul, we can save the kingdom!`,\r\n                    `I know it's a lot to ask, but please help us one more time!`,\r\n                    `*300 dew drops* in *3 minutes!*`,\r\n                    { do: 'unblockTileGrid' },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        actions: [\r\n                            { do: 'updateTimerRelativeToScore' }\r\n                        ],\r\n                        persist: true\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            /*\r\n            // Epilogue\r\n            case 9:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `And that's a wrap!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `I think it went pretty well today, right?`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    { do: 'hideScoreDisplay' },\r\n                    `Huh?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Oh, looks like they're shutting things down.`,\r\n                    `...`,\r\n                    `...`,\r\n                    `So, any-`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Oh, whoops, tiles must have dropped on accident.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    `...`,\r\n                    `Yeah, so, anyway.`,\r\n                    `I've gotta head out.`,\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Nice working with you today!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    { do: 'hideGuide' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { wait: 30000 },\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { wait: 30000 },\r\n                    { do: 'turnOffLights' }\r\n                ];\r\n                */\r\n        }\r\n    }\r\n\r\n}","export default class {\r\n\r\n    constructor()\r\n    {\r\n        this.subscriptions = [];\r\n    }\r\n\r\n    on(eventName, filter, callback, persist)\r\n    {\r\n        this.subscriptions.push({ eventName, filter, callback, persist });\r\n    }\r\n\r\n    emit(eventName)\r\n    {\r\n        this.subscriptions\r\n            .filter(subscription => subscription.eventName === eventName)\r\n            .filter(subscription => subscription.filter === null || subscription.filter())\r\n            .forEach(subscription => {\r\n                subscription.callback && subscription.callback();\r\n\r\n                if(subscription.persist)\r\n                {\r\n                    return;\r\n                }\r\n\r\n                subscription.callback = null;\r\n            });\r\n    }\r\n}","import WebGLRenderer from './WebGLRenderer.js';\r\nimport CanvasRenderer from './CanvasRenderer.js';\r\n\r\nexport default {\r\n    renderWebGL: WebGLRenderer,\r\n    renderCanvas: CanvasRenderer\r\n\r\n};","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2018 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\r\n\r\n/**\r\n * Calculates the ascent, descent and fontSize of a given font style.\r\n *\r\n * @function Phaser.GameObjects.Text.MeasureText\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.GameObjects.Text.TextStyle} textStyle - The TextStyle object to measure.\r\n *\r\n * @return {object} An object containing the ascent, descent and fontSize of the TextStyle.\r\n */\r\nvar MeasureText = function (textStyle) {\r\n    // @property {HTMLCanvasElement} canvas - The canvas element that the text is rendered.\r\n    var canvas = CanvasPool.create(this);\r\n\r\n    // @property {HTMLCanvasElement} context - The context of the canvas element that the text is rendered to.\r\n    var context = canvas.getContext('2d');\r\n\r\n    textStyle.syncFont(canvas, context);\r\n\r\n    var width = Math.ceil(context.measureText(textStyle.testString).width * textStyle.baselineX);\r\n    var baseline = width;\r\n    var height = 2 * baseline;\r\n\r\n    baseline = baseline * textStyle.baselineY | 0;\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    context.fillStyle = '#f00';\r\n    context.fillRect(0, 0, width, height);\r\n\r\n    context.font = textStyle._font;\r\n\r\n    context.textBaseline = 'alphabetic';\r\n    context.fillStyle = '#000';\r\n    context.fillText(textStyle.testString, 0, baseline);\r\n\r\n    var output = {\r\n        ascent: 0,\r\n        descent: 0,\r\n        fontSize: 0\r\n    };\r\n\r\n    if (!context.getImageData(0, 0, width, height)) {\r\n        output.ascent = baseline;\r\n        output.descent = baseline + 6;\r\n        output.fontSize = output.ascent + output.descent;\r\n\r\n        CanvasPool.remove(canvas);\r\n\r\n        return output;\r\n    }\r\n\r\n    var imagedata = context.getImageData(0, 0, width, height).data;\r\n    var pixels = imagedata.length;\r\n    var line = width * 4;\r\n    var i;\r\n    var j;\r\n    var idx = 0;\r\n    var stop = false;\r\n\r\n    // ascent. scan from top to bottom until we find a non red pixel\r\n    for (i = 0; i < baseline; i++) {\r\n        for (j = 0; j < line; j += 4) {\r\n            if (imagedata[idx + j] !== 255) {\r\n                stop = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!stop) {\r\n            idx += line;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    output.ascent = baseline - i;\r\n\r\n    idx = pixels - line;\r\n    stop = false;\r\n\r\n    // descent. scan from bottom to top until we find a non red pixel\r\n    for (i = height; i > baseline; i--) {\r\n        for (j = 0; j < line; j += 4) {\r\n            if (imagedata[idx + j] !== 255) {\r\n                stop = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!stop) {\r\n            idx -= line;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    output.descent = (i - baseline);\r\n    output.fontSize = output.ascent + output.descent;\r\n\r\n    CanvasPool.remove(canvas);\r\n\r\n    return output;\r\n};\r\n\r\nexport default MeasureText;","var CONST = {\r\n    // new line mode\r\n    NO_NEWLINE: 0,\r\n    RAW_NEWLINE: 1,\r\n    WRAPPED_NEWLINE: 2,\r\n\r\n    // wrap mode\r\n    NO_WRAP: 0,\r\n    WORD_WRAP: 1,\r\n    CHAR_WRAP: 2,\r\n\r\n    // split lines\r\n    SPLITREGEXP: /(?:\\r\\n|\\r|\\n)/\r\n};\r\n\r\nexport default CONST;","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2018 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nimport MeasureText from './MeasureText.js';\r\nimport CONST from '../const.js';\r\n\r\nconst GetAdvancedValue = Phaser.Utils.Objects.GetAdvancedValue;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\n//  Key: [ Object Key, Default Value ]\r\n\r\n/**\r\n * A custom function that will be responsible for wrapping the text.\r\n * @callback TextStyleWordWrapCallback\r\n *\r\n * @param {string} text - The string to wrap.\r\n * @param {Phaser.GameObjects.Text} textObject - The Text instance.\r\n *\r\n * @return {(string|string[])} Should return the wrapped lines either as an array of lines or as a string with\r\n * newline characters in place to indicate where breaks should happen.\r\n */\r\n\r\nvar propertyMap = {\r\n    // background\r\n    backgroundColor: ['backgroundColor', null],\r\n\r\n    // font\r\n    fontFamily: ['fontFamily', 'Courier'],\r\n    fontSize: ['fontSize', '16px'],\r\n    fontStyle: ['fontStyle', ''],\r\n    color: ['color', '#fff'],\r\n    stroke: ['stroke', '#fff'],\r\n    strokeThickness: ['strokeThickness', 0],\r\n    shadowOffsetX: ['shadow.offsetX', 0],\r\n    shadowOffsetY: ['shadow.offsetY', 0],\r\n    shadowColor: ['shadow.color', '#000'],\r\n    shadowBlur: ['shadow.blur', 0],\r\n    shadowStroke: ['shadow.stroke', false],\r\n    shadowFill: ['shadow.fill', false],\r\n\r\n    // underline\r\n    underlineColor: ['underline.color', '#000'],\r\n    underlineThickness: ['underline.thickness', 0],\r\n    underlineOffset: ['underline.offset', 0],\r\n\r\n    // align\r\n    halign: ['halign', 'left'],\r\n    valign: ['valign', 'top'],\r\n\r\n    // size\r\n    maxLines: ['maxLines', 0],\r\n    fixedWidth: ['fixedWidth', 0],\r\n    fixedHeight: ['fixedHeight', 0],\r\n    resolution: ['resolution', 0],\r\n    lineSpacing: ['lineSpacing', 0],\r\n\r\n    rtl: ['rtl', false],\r\n    testString: ['testString', '|MÃ‰qgy'],\r\n    baselineX: ['baselineX', 1.2],\r\n    baselineY: ['baselineY', 1.4],\r\n\r\n    // wrap\r\n    wrapMode: ['wrap.mode', 1],\r\n    wrapWidth: ['wrap.width', 0]\r\n    //wrapCallback: ['wrap.callback', null],\r\n    //wrapCallbackScope: ['wrap.callbackScope', null]\r\n};\r\n\r\nclass TextStyle {\r\n    constructor(text, style) {\r\n        this.parent = text;\r\n\r\n        this.backgroundColor;\r\n\r\n        this.fontFamily;\r\n        this.fontSize;\r\n        this.fontStyle;\r\n        this.color;\r\n        this.stroke;\r\n        this.strokeThickness;\r\n        this.shadowOffsetX;\r\n        this.shadowOffsetY;\r\n        this.shadowColor;\r\n        this.shadowBlur;\r\n        this.shadowStroke;\r\n        this.shadowFill;\r\n\r\n        this.underlineColor;\r\n        this.underlineThickness;\r\n        this.underlineOffset;\r\n\r\n        this.halign;\r\n        this.valign;\r\n\r\n        this.maxLines;\r\n        this.fixedWidth;\r\n        this.fixedHeight;\r\n        this.resolution;\r\n        this.lineSpacing;\r\n\r\n        this.rtl;\r\n        this.testString;\r\n\r\n\r\n        this.baselineX;\r\n        this.baselineY;\r\n\r\n        this._font;\r\n\r\n        //  Set to defaults + user style\r\n        this.setStyle(style, false);\r\n\r\n        var metrics = GetValue(style, 'metrics', false);\r\n\r\n        //  Provide optional TextMetrics in the style object to avoid the canvas look-up / scanning\r\n        //  Doing this is reset if you then change the font of this TextStyle after creation\r\n        if (metrics) {\r\n            this.metrics = {\r\n                ascent: GetValue(metrics, 'ascent', 0),\r\n                descent: GetValue(metrics, 'descent', 0),\r\n                fontSize: GetValue(metrics, 'fontSize', 0)\r\n            };\r\n        } else {\r\n            this.metrics = MeasureText(this);\r\n        }\r\n    }\r\n\r\n    setStyle(style, updateText) {\r\n        if (updateText === undefined) {\r\n            updateText = true;\r\n        }\r\n\r\n        if (style && style.hasOwnProperty('wrap')) {\r\n            var wrap = style.wrap;\r\n            if (wrap.hasOwnProperty('mode')) {\r\n                var mode = wrap.mode;\r\n                if (typeof mode === 'string') {\r\n                    wrap.mode = WRAPMODE[mode];\r\n                }\r\n            } else {\r\n                if (wrap.hasOwnProperty('width')) {\r\n                    wrap.mode = 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        //  Avoid type mutation\r\n        if (style && style.hasOwnProperty('fontSize') && typeof style.fontSize === 'number') {\r\n            style.fontSize = style.fontSize.toString() + 'px';\r\n        }\r\n\r\n        for (var key in propertyMap) {\r\n            if (key === 'wrapCallback' || key === 'wrapCallbackScope') {\r\n                // Callback & scope should be set without processing the values\r\n                this[key] = GetValue(style, propertyMap[key][0], propertyMap[key][1]);\r\n            } else {\r\n                this[key] = GetAdvancedValue(style, propertyMap[key][0], propertyMap[key][1]);\r\n            }\r\n        }\r\n\r\n        //  Allow for 'font' override\r\n        var font = GetValue(style, 'font', null);\r\n\r\n        if (font === null) {\r\n            this._font = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n        } else {\r\n            this._font = font;\r\n        }\r\n\r\n        //  Allow for 'fill' to be used in place of 'color'\r\n        var fill = GetValue(style, 'fill', null);\r\n\r\n        if (fill !== null) {\r\n            this.color = fill;\r\n        }\r\n\r\n        if (updateText) {\r\n            return this.update(true);\r\n        } else {\r\n            return this.parent;\r\n        }\r\n    }\r\n\r\n    syncFont(canvas, context) {\r\n        context.font = this._font;\r\n    }\r\n\r\n    syncStyle(canvas, context) {\r\n        context.textBaseline = 'alphabetic';\r\n\r\n        context.fillStyle = this.color;\r\n        context.strokeStyle = this.stroke;\r\n\r\n        context.lineWidth = this.strokeThickness;\r\n        context.lineCap = 'round';\r\n        context.lineJoin = 'round';\r\n    }\r\n\r\n    syncShadow(context, enabled) {\r\n        if (enabled) {\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n        } else {\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n            context.shadowColor = 0;\r\n            context.shadowBlur = 0;\r\n        }\r\n    }\r\n\r\n    update(recalculateMetrics) {\r\n        if (recalculateMetrics) {\r\n            this._font = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n\r\n            this.metrics = MeasureText(this);\r\n        }\r\n\r\n        return this.parent.updateText(recalculateMetrics);\r\n    }\r\n\r\n    buildFont() {\r\n        var newFont = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n        if (newFont !== this._font) {\r\n            this._font = newFont;\r\n            //this.metrics = MeasureText(this);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    setFont(font) {\r\n        if (typeof font === 'string') {\r\n            this.fontFamily = font;\r\n            this.fontSize = '';\r\n            this.fontStyle = '';\r\n        } else {\r\n            this.fontFamily = GetValue(font, 'fontFamily', 'Courier');\r\n            this.fontSize = GetValue(font, 'fontSize', '16px');\r\n            this.fontStyle = GetValue(font, 'fontStyle', '');\r\n        }\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontFamily(family) {\r\n        this.fontFamily = family;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontStyle(style) {\r\n        this.fontStyle = style;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontSize(size) {\r\n        if (typeof size === 'number') {\r\n            size = size.toString() + 'px';\r\n        }\r\n\r\n        this.fontSize = size;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setTestString(string) {\r\n        this.testString = string;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFixedSize(width, height) {\r\n        this.fixedWidth = width;\r\n        this.fixedHeight = height;\r\n\r\n        if (width) {\r\n            this.parent.width = width;\r\n        }\r\n\r\n        if (height) {\r\n            this.parent.height = height;\r\n        }\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setResolution(value) {\r\n        this.resolution = value;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setLineSpacing(value) {\r\n        this.lineSpacing = value;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setBackgroundColor(color) {\r\n        this.backgroundColor = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setFill(color) {\r\n        this.color = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setColor(color) {\r\n        this.color = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setStroke(color, thickness) {\r\n        if (color === undefined) {\r\n            //  Reset the stroke to zero (disabling it)\r\n            this.strokeThickness = 0;\r\n        } else {\r\n            if (thickness === undefined) {\r\n                thickness = this.strokeThickness;\r\n            }\r\n\r\n            this.stroke = color;\r\n            this.strokeThickness = thickness;\r\n        }\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setShadow(x, y, color, blur, shadowStroke, shadowFill) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n        if (blur === undefined) {\r\n            blur = 0;\r\n        }\r\n        if (shadowStroke === undefined) {\r\n            shadowStroke = false;\r\n        }\r\n        if (shadowFill === undefined) {\r\n            shadowFill = true;\r\n        }\r\n\r\n        this.shadowOffsetX = x;\r\n        this.shadowOffsetY = y;\r\n        this.shadowColor = color;\r\n        this.shadowBlur = blur;\r\n        this.shadowStroke = shadowStroke;\r\n        this.shadowFill = shadowFill;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowOffset(x, y) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = x;\r\n        }\r\n\r\n        this.shadowOffsetX = x;\r\n        this.shadowOffsetY = y;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowColor(color) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n\r\n        this.shadowColor = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowBlur(blur) {\r\n        if (blur === undefined) {\r\n            blur = 0;\r\n        }\r\n\r\n        this.shadowBlur = blur;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowStroke(enabled) {\r\n        this.shadowStroke = enabled;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowFill(enabled) {\r\n        this.shadowFill = enabled;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderline(color, thickness, offset) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n        if (thickness === undefined) {\r\n            thickness = 0;\r\n        }\r\n        if (offset === undefined) {\r\n            offset = 0;\r\n        }\r\n\r\n        this.underlineColor = color;\r\n        this.underlineThickness = thickness;\r\n        this.underlineOffset = offset;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineColor(color) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n\r\n        this.underlineColor = color;\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineThickness(thickness) {\r\n        if (thickness === undefined) {\r\n            thickness = 0;\r\n        }\r\n\r\n        this.underlineThickness = thickness;\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineOffset(offset) {\r\n        if (offset === undefined) {\r\n            offset = 0;\r\n        }\r\n\r\n        this.underlineOffset = offset;\r\n        return this.update(false);\r\n    }\r\n\r\n    setWrapMode(mode) {\r\n        if (typeof mode === 'string') {\r\n            mode = WRAPMODE[mode.toLowerCase()] || 0;\r\n        }\r\n        this.wrapMode = mode;\r\n        return this.update(true);\r\n    }\r\n\r\n    setWrapWidth(width) {\r\n        this.wrapWidth = width;\r\n        return this.update(false);\r\n    }\r\n\r\n    setAlign(halign, valign) {\r\n        if (halign === undefined) {\r\n            halign = 'left';\r\n        }\r\n        if (valign === undefined) {\r\n            valign = 'top';\r\n        }\r\n        this.halign = halign;\r\n        this.valign = valign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setHAlign(halign) {\r\n        if (halign === undefined) {\r\n            halign = 'left';\r\n        }\r\n        this.halign = halign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setVAlign(valign) {\r\n        if (valign === undefined) {\r\n            valign = 'top';\r\n        }\r\n        this.valign = valign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setMaxLines(max) {\r\n        if (max === undefined) {\r\n            max = 0;\r\n        }\r\n\r\n        this.maxLines = max;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    getTextMetrics() {\r\n        var metrics = this.metrics;\r\n\r\n        return {\r\n            ascent: metrics.ascent,\r\n            descent: metrics.descent,\r\n            fontSize: metrics.fontSize\r\n        };\r\n    }\r\n\r\n    get lineHeight() {\r\n        return this.metrics.fontSize + this.strokeThickness + this.lineSpacing;\r\n    }\r\n\r\n    toJSON() {\r\n        var output = {};\r\n\r\n        for (var key in propertyMap) {\r\n            output[key] = this[key];\r\n        }\r\n\r\n        output.metrics = this.getTextMetrics();\r\n\r\n        return output;\r\n    }\r\n\r\n    destroy() {\r\n        this.parent = undefined;\r\n    }\r\n\r\n}\r\n\r\nconst HALIGNMODE = {\r\n    left: CONST.hleft,\r\n    center: CONST.hcenter,\r\n    right: CONST.hright,\r\n};\r\nconst VALIGNMODE = {\r\n    top: CONST.vtop,\r\n    center: CONST.vcenter,\r\n    bottom: CONST.vbottom,\r\n};\r\nconst WRAPMODE = {\r\n    none: CONST.NO_WRAP,\r\n    word: CONST.WORD_WRAP,\r\n    char: CONST.CHAR_WRAP,\r\n    character: CONST.CHAR_WRAP\r\n};\r\n\r\nexport default TextStyle;","export default {\r\n    draw(startX, startY, boxWidth, boxHeight) {\r\n        var penManager = this.penManager;\r\n        this.hitAreaManager.clear();\r\n\r\n        var context = this.context;\r\n        context.save();\r\n\r\n        // this.clear();\r\n        this.drawBackground(this.defatultStyle.backgroundColor);\r\n\r\n        // draw lines\r\n        var defatultStyle = this.defatultStyle;\r\n        startX += this.startXOffset;\r\n        startY += this.startYOffset;\r\n        var halign = defatultStyle.halign,\r\n            valign = defatultStyle.valign;\r\n\r\n        var lineWidth, lineHeight = defatultStyle.lineHeight;\r\n        var lines = penManager.lines;\r\n        var totalLinesNum = lines.length,\r\n            maxLines = defatultStyle.maxLines;\r\n        var drawLinesNum, drawLineStartIdx, drawLineEndIdx;\r\n        if ((maxLines > 0) && (totalLinesNum > maxLines)) {\r\n            drawLinesNum = maxLines;\r\n            if (valign === 'center') { // center\r\n                drawLineStartIdx = Math.floor((totalLinesNum - drawLinesNum) / 2);\r\n            } else if (valign === 'bottom') { // bottom\r\n                drawLineStartIdx = totalLinesNum - drawLinesNum;\r\n            } else {\r\n                drawLineStartIdx = 0;\r\n            }\r\n        } else {\r\n            drawLinesNum = totalLinesNum;\r\n            drawLineStartIdx = 0;\r\n        }\r\n        drawLineEndIdx = drawLineStartIdx + drawLinesNum;\r\n\r\n        var offsetX, offsetY;\r\n        if (valign === 'center') { // center\r\n            offsetY = Math.max((boxHeight - (drawLinesNum * lineHeight)) / 2, 0);\r\n        } else if (valign === 'bottom') { // bottom\r\n            offsetY = Math.max(boxHeight - (drawLinesNum * lineHeight) - 2, 0);\r\n        } else {\r\n            offsetY = 0;\r\n        }\r\n        offsetY += startY;\r\n        for (var lineIdx = drawLineStartIdx; lineIdx < drawLineEndIdx; lineIdx++) {\r\n            lineWidth = penManager.getLineWidth(lineIdx);\r\n            if (lineWidth === 0) {\r\n                continue;\r\n            }\r\n\r\n            if (halign === 'center') { // center\r\n                offsetX = (boxWidth - lineWidth) / 2;\r\n            } else if (halign === 'right') { // right\r\n                offsetX = boxWidth - lineWidth;\r\n            } else {\r\n                offsetX = 0;\r\n            }\r\n            offsetX += startX;\r\n\r\n            var pens = lines[lineIdx];\r\n            for (var penIdx = 0, pensLen = pens.length; penIdx < pensLen; penIdx++) {\r\n                this.drawPen(pens[penIdx], offsetX, offsetY);\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    },\r\n\r\n    drawPen(pen, offsetX, offsetY) {\r\n        offsetX += pen.x;\r\n        offsetY += pen.y;\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n        context.save();\r\n\r\n        var curStyle = this.parser.propToContextStyle(\r\n            this.defatultStyle,\r\n            pen.prop\r\n        );\r\n        curStyle.buildFont();\r\n        curStyle.syncFont(canvas, context);\r\n        curStyle.syncStyle(canvas, context);\r\n\r\n        // Underline\r\n        if ((curStyle.underlineThickness > 0) && (pen.width > 0)) {\r\n            this.drawUnderline(offsetX, offsetY, pen.width, curStyle);\r\n        }\r\n\r\n        // Text\r\n        if (pen.isTextPen) {\r\n            this.drawText(offsetX, offsetY, pen.text, curStyle);\r\n        }\r\n\r\n        // Image\r\n        if (pen.isImagePen) {\r\n            this.drawImage(offsetX, offsetY, pen.prop.img, curStyle);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        if (pen.hasAreaMarker && (pen.width > 0)) {\r\n            this.hitAreaManager.add(\r\n                pen.prop.area, // key\r\n                offsetX, // x\r\n                (offsetY - this.startYOffset), // y\r\n                pen.width, // width\r\n                this.defatultStyle.lineHeight // height\r\n            );\r\n        }\r\n    },\r\n\r\n    clear() {\r\n        var canvas = this.canvas;\r\n        this.context.clearRect(0, 0, canvas.width, canvas.height);\r\n    },\r\n\r\n    drawBackground(color) {\r\n        if (color === null) {\r\n            return;\r\n        }\r\n        this.context.fillStyle = color;\r\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    },\r\n\r\n    drawUnderline(x, y, width, style) {\r\n        y += style.underlineOffset - (style.underlineThickness / 2);\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        var savedLineCap = context.lineCap;\r\n        context.lineCap = 'butt';\r\n        context.beginPath();\r\n        context.strokeStyle = style.underlineColor;\r\n        context.lineWidth = style.underlineThickness;\r\n        context.moveTo(x, y);\r\n        context.lineTo((x + width), y);\r\n        context.stroke();\r\n        context.lineCap = savedLineCap;\r\n    },\r\n\r\n    drawText(x, y, text, style) {\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        if (style.strokeThickness) {\r\n            style.syncShadow(context, style.shadowStroke);\r\n            context.strokeText(text, x, y);\r\n        }\r\n\r\n        if (style.color && (style.color !== 'none')) {\r\n            style.syncShadow(context, style.shadowFill);\r\n            context.fillText(text, x, y);\r\n        }\r\n    },\r\n\r\n    drawImage(x, y, imgKey, style) {\r\n        var imageManager = this.parent.imageManager;\r\n        var imgData = imageManager.get(imgKey);\r\n        var frame = imageManager.getFrame(imgKey);\r\n\r\n        x += imgData.left;\r\n        y += - this.startYOffset + imgData.y;\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        context.drawImage(\r\n            frame.source.image,\r\n            frame.cutX, frame.cutY, frame.cutWidth, frame.cutHeight,\r\n            x, y, imgData.width, imgData.height\r\n        );\r\n    }\r\n\r\n}","class Stack {\r\n    constructor() {\r\n        this.items = [];\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.items = undefined;\r\n    }\r\n\r\n    pop() {\r\n        return (this.items.length > 0) ? this.items.pop() : null;\r\n    }\r\n\r\n    push(l) {\r\n        this.items.push(l);\r\n        return this;\r\n    }\r\n\r\n    pushMultiple(arr) {\r\n        this.items.push.apply(this.items, arr);\r\n        arr.length = 0;\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.items.length = 0;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default Stack;","import Pool from './utils/struct/Stack.js';\r\nexport default Pool;","import CONST from '../const.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst RAW_NEWLINE = CONST.RAW_NEWLINE;\r\n\r\nclass Pen {\r\n    constructor(config) {\r\n        this.prop = {};\r\n        this.resetFromJSON(config);\r\n    }\r\n\r\n    resetFromJSON(o) { // (txt, x, y, width, prop, newLineMode, startIndex)\r\n        this.text = GetValue(o, 'text', '');\r\n        this.x = GetValue(o, 'x', 0);\r\n        this.y = GetValue(o, 'y', 0);\r\n        this.width = GetValue(o, 'width', 0);\r\n\r\n        var prop = GetValue(o, 'prop', null);\r\n        if (prop === null) {\r\n            prop = {};\r\n        }\r\n        this.prop = prop;\r\n        this.newLineMode = GetValue(o, 'newLineMode', 0);\r\n        this.startIndex = GetValue(o, 'startIndex', 0);\r\n    }\r\n\r\n    get plainText() {\r\n        var txt = this.text\r\n        if (this.newLineMode === RAW_NEWLINE) {\r\n            txt += \"\\n\";\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get wrapText() {\r\n        var txt = this.text;\r\n        if (this.newLineMode !== NO_NEWLINE) {\r\n            txt += \"\\n\";\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get rawTextLength() {\r\n        var len = this.text.length;\r\n        if (this.newLineMode === RAW_NEWLINE) {\r\n            len += 1;\r\n        }\r\n        return len;\r\n    }\r\n\r\n    get endIndex() {\r\n        return this.startIndex + this.rawTextLength;\r\n    }\r\n\r\n    get lastX() {\r\n        return this.x + this.width;\r\n    }\r\n\r\n    get isTextPen() {\r\n        return (this.text !== '');\r\n    }\r\n\r\n    get isImagePen() {\r\n        return !!this.prop.img;\r\n    }\r\n\r\n    get hasAreaMarker() {\r\n        return !!this.prop.area;\r\n    }\r\n};\r\n\r\nexport default Pen;","var Clear = function (obj) {\r\n    if (Array.isArray(obj)) {\r\n        obj.length = 0;\r\n    } else {\r\n        for (var key in obj) {\r\n            delete obj[key];\r\n        }\r\n    }\r\n}\r\nexport default Clear;","import Clear from './Clear.js';\r\n\r\n/**\r\n * Shallow Object Clone. Will not out nested objects.\r\n * @param {object} obj JSON object\r\n * @param {object} ret JSON object to return, set null to return a new object\r\n * @returns {object} this object\r\n */\r\nvar Clone = function (obj, out) {\r\n    var objIsArray = Array.isArray(obj);\r\n\r\n    if (out === undefined) {\r\n        out = (objIsArray) ? [] : {};\r\n    } else {\r\n        Clear(out);\r\n    }\r\n\r\n    if (objIsArray) {\r\n        out.length = obj.length;\r\n        for (var i = 0, cnt = obj.length; i < cnt; i++) {\r\n            out[i] = obj[i];\r\n        }\r\n    } else {\r\n        for (var key in obj) {\r\n            out[key] = obj[key];\r\n        }\r\n    }\r\n\r\n    return out;\r\n};\r\n\r\nexport default Clone;\r\n","var NOOP = function () {\r\n    //  NOOP\r\n};\r\n\r\nexport default NOOP;","import Pool from '../../../../pool.js';\r\nimport Pen from './Pen.js';\r\nimport CONST from '../const.js';\r\nimport Clone from '../../../../utils/object/Clone.js';\r\nimport NOOP from '../../../../utils/object/NOOP.js';\r\n\r\nconst GetFastValue = Phaser.Utils.Objects.GetFastValue;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst WRAPPED_NEWLINE = CONST.WRAPPED_NEWLINE;\r\n\r\nvar PensPool = new Pool(); // default pens pool\r\nvar LinesPool = new Pool(); // default lines pool\r\nclass PenManager {\r\n    constructor(config) {\r\n        this.pens = []; // all pens\r\n        this.lines = []; // pens in lines [ [],[],[],.. ]\r\n        this.maxLinesWidth = undefined;\r\n\r\n        this.PensPool = GetFastValue(config, 'pensPool', PensPool);\r\n        this.LinesPool = GetFastValue(config, 'linesPool', LinesPool);\r\n        this.tagToText = GetFastValue(config, 'tagToText', NOOP);\r\n        this.tagToTextScope = GetFastValue(config, 'tagToTextScope', undefined);\r\n    }\r\n\r\n    destroy() {\r\n        this.freePens();\r\n        this.tagToText = undefined;\r\n        this.tagToTextScope = undefined;\r\n    }\r\n\r\n    freePens() {\r\n        for (var i = 0, len = this.lines.length; i < len; i++)\r\n            this.lines[i].length = 0;\r\n\r\n        this.PensPool.pushMultiple(this.pens);\r\n        this.LinesPool.pushMultiple(this.lines);\r\n        this.maxLinesWidth = undefined;\r\n    }\r\n\r\n    addTextPen(text, x, y, width, prop, newLineMode) {\r\n        var pen = this.PensPool.pop();\r\n        if (pen == null) {\r\n            pen = new Pen();\r\n        }\r\n        PEN_CONFIG.text = text;\r\n        PEN_CONFIG.x = x;\r\n        PEN_CONFIG.y = y;\r\n        PEN_CONFIG.width = width;\r\n        PEN_CONFIG.prop = prop;\r\n        PEN_CONFIG.newLineMode = newLineMode;\r\n        pen.resetFromJSON(PEN_CONFIG);\r\n        this.addPen(pen);\r\n        return this;\r\n    }\r\n\r\n    addImagePen(x, y, width, prop) {\r\n        this.addTextPen('', x, y, width, prop, NO_NEWLINE);\r\n        return this;\r\n    }\r\n\r\n    addNewLinePen() {\r\n        var previousPen = this.lastPen;\r\n        var x = (previousPen) ? previousPen.lastX : 0;\r\n        var y = (previousPen) ? previousPen.y : 0;\r\n        var prop = (previousPen) ? Clone(previousPen.prop) : null;\r\n        this.addTextPen('', x, y, 0, prop, WRAPPED_NEWLINE);\r\n        return this;\r\n    }\r\n\r\n    addPen(pen) {\r\n        var previousPen = this.lastPen;\r\n        if (previousPen == null) {\r\n            pen.startIndex = 0;\r\n        } else {\r\n            pen.startIndex = previousPen.endIndex;\r\n        }\r\n        this.pens.push(pen);\r\n\r\n        // maintan lines\r\n        var line = this.lastLine;\r\n        if (line == null) {\r\n            line = this.LinesPool.pop() || [];\r\n            this.lines.push(line);\r\n        }\r\n        line.push(pen);\r\n\r\n        // new line, add an empty line\r\n        if (pen.newLineMode !== NO_NEWLINE) {\r\n            line = this.LinesPool.pop() || [];\r\n            this.lines.push(line);\r\n        }\r\n        this.maxLinesWidth = undefined;\r\n    }\r\n\r\n    clone(targetPenManager) {\r\n        if (targetPenManager == null)\r\n            targetPenManager = new PenManager();\r\n\r\n        targetPenManager.freePens();\r\n\r\n        for (var li = 0, llen = this.lines.length; li < llen; li++) {\r\n            var pens = this.lines[li];\r\n            for (var pi = 0, plen = pens.length; pi < plen; pi++) {\r\n                var pen = pens[pi];\r\n                targetPenManager.addPen(\r\n                    pen.text,\r\n                    pen.x,\r\n                    pen.y,\r\n                    pen.width,\r\n                    Clone(pen.prop),\r\n                    pen.newLineMode\r\n                );\r\n            }\r\n        }\r\n\r\n        return targetPenManager;\r\n    }\r\n\r\n    get lastPen() {\r\n        return this.pens[this.pens.length - 1];\r\n    }\r\n\r\n    get lastLine() {\r\n        return this.lines[this.lines.length - 1];\r\n    }\r\n\r\n    getLineStartIndex(i) {\r\n        if (i >= this.lines.length) {\r\n            return this.getLineEndIndex(i);\r\n        } else {\r\n            var line = this.lines[i];\r\n            return (line && line[0]) ? line[0].startIndex : 0;\r\n        }\r\n    }\r\n\r\n    getLineEndIndex(i) {\r\n        if (i >= this.lines.length) {\r\n            i = this.lines.length - 1;\r\n        }\r\n        var li, hasLastPen = false,\r\n            line;\r\n        for (li = i; li >= 0; li--) {\r\n            line = this.lines[li];\r\n            hasLastPen = (line != null) && (line.length > 0);\r\n            if (hasLastPen) {\r\n                break;\r\n            }\r\n        }\r\n        if (!hasLastPen) {\r\n            return 0;\r\n        }\r\n\r\n        var lastPen = line[line.length - 1];\r\n        return lastPen.endIndex;\r\n    }\r\n\r\n    getLineWidth(i) {\r\n        var line = this.lines[i];\r\n        if (!line) {\r\n            return 0;\r\n        }\r\n\r\n        var lastPen = line[line.length - 1];\r\n        if (lastPen == null) {\r\n            return 0;\r\n        }\r\n\r\n        var lineWidth = lastPen.lastX; // start from 0\r\n        return lineWidth;\r\n    }\r\n\r\n    getMaxLineWidth() {\r\n        if (this.maxLinesWidth !== undefined) {\r\n            return this.maxLinesWidth;\r\n        }\r\n        var w, maxW = 0;\r\n        for (var i = 0, len = this.lines.length; i < len; i++) {\r\n            w = this.getLineWidth(i);\r\n            if (w > maxW) {\r\n                maxW = w;\r\n            }\r\n        }\r\n        this.maxLinesWidth = maxW;\r\n        return maxW;\r\n    }\r\n\r\n    getLineWidths() {\r\n        var result = [];\r\n        for (var i = 0, len = this.lines.length; i < len; i++) {\r\n            result.push(this.getLineWidth(i));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    get linesCount() {\r\n        return this.lines.length;\r\n    }\r\n\r\n    get plainText() {\r\n        var txt = \"\",\r\n            pens = this.pens;\r\n        for (var i = 0, len = pens.length; i < len; i++) {\r\n            txt += pens[i].plainText;\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get rawTextLength() {\r\n        var l = 0,\r\n            pens = this.pens;\r\n        for (var i = 0, len = this.pens.length; i < len; i++) {\r\n            l += pens[i].rawTextLength;\r\n        }\r\n\r\n        return l;\r\n    }\r\n\r\n    getSliceTagText(start, end, wrap) {\r\n        if (start === undefined) {\r\n            start = 0;\r\n        }\r\n        if (end === undefined) {\r\n            var lastPen = this.lastPen;\r\n            if (lastPen == null) {\r\n                return \"\";\r\n            }\r\n\r\n            end = lastPen.endIndex;\r\n        }\r\n        if (wrap === undefined) {\r\n            wrap = false;\r\n        }\r\n\r\n        var txt = \"\",\r\n            formatTxt,\r\n            pen, penTxt, penStartIdx, penEndIdx, isInRange;\r\n        var currentProp, previousProp;\r\n        for (var i = 0, len = this.pens.length; i < len; i++) {\r\n            pen = this.pens[i];\r\n            penEndIdx = pen.endIndex;\r\n            if (penEndIdx <= start) {\r\n                continue;\r\n            }\r\n            pen = this.pens[i];\r\n            penTxt = (!wrap) ? pen.plainText : pen.wrapText;\r\n            currentProp = pen.prop;\r\n            penStartIdx = pen.startIndex;\r\n\r\n            isInRange = (penStartIdx >= start) && (penEndIdx <= end);\r\n            if (!isInRange) {\r\n                penTxt = penTxt.substring(start - penStartIdx, end - penStartIdx);\r\n            }\r\n\r\n            if (this.tagToTextScope) {\r\n                txt += this.tagToText.call(this.tagToTextScope, penTxt, currentProp, previousProp);\r\n            } else {\r\n                txt += this.tagToText(penTxt, currentProp, previousProp);\r\n            }\r\n\r\n            previousProp = currentProp;\r\n            if (penEndIdx >= end) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return txt;\r\n    }\r\n};\r\n\r\nvar PEN_CONFIG = {};\r\n\r\nexport default PenManager;","import Pool from '../../../../pool.js';\r\n\r\nconst Rectangle = Phaser.Geom.Rectangle;\r\n\r\nvar RectanglePool = new Pool();\r\nclass HitAreaManager {\r\n    constructor() {\r\n        this.hitAreas = [];\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n    }\r\n\r\n    clear() {\r\n        RectanglePool.pushMultiple(this.hitAreas);\r\n        return this;\r\n    }\r\n\r\n    add(key, x, y, width, height) {\r\n        var rectangle = RectanglePool.pop();\r\n        if (rectangle === null) {\r\n            rectangle = new Rectangle(x, y, width, height);\r\n        } else {\r\n            rectangle.setTo(x, y, width, height);\r\n        }\r\n        rectangle.key = key;\r\n        this.hitAreas.push(rectangle);\r\n        return this;\r\n    }\r\n\r\n    getFirstHitArea(x, y) {\r\n        var hitAreas = this.hitAreas, hitArea;\r\n        for (var i = 0, cnt = hitAreas.length; i < cnt; i++) {\r\n            hitArea = hitAreas[i];\r\n            if (hitArea.contains(x, y)) {\r\n                return hitArea;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    drawBounds(graphics, color, parent) {\r\n        if (color === undefined) {\r\n            color = 0xffffff;\r\n        }\r\n\r\n        if (parent) {\r\n            graphics\r\n                .save()\r\n                .scaleCanvas(parent.scaleX, parent.scaleY)\r\n                .rotateCanvas(parent.rotation)\r\n                .translateCanvas(parent.x, parent.y)\r\n        }\r\n\r\n        var hitAreas = this.hitAreas, hitArea;\r\n        for (var i = 0, cnt = hitAreas.length; i < cnt; i++) {\r\n            hitArea = hitAreas[i];\r\n            graphics.lineStyle(1, color).strokeRect(hitArea.x, hitArea.y, hitArea.width, hitArea.height);\r\n        }\r\n\r\n        if (parent) {\r\n            graphics\r\n                .restore()\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexport default HitAreaManager;","var SetInteractive = function () {\r\n    this.parent\r\n        .on('pointerdown', function (pointer, localX, localY, event) {\r\n            FireEvent.call(this, 'areadown', pointer, localX, localY);\r\n        }, this)\r\n        .on('pointerup', function (pointer, localX, localY, event) {\r\n            FireEvent.call(this, 'areaup', pointer, localX, localY);\r\n        }, this)\r\n}\r\n\r\nvar FireEvent = function (eventName, pointer, localX, localY) {\r\n    var area = this.hitAreaManager.getFirstHitArea(localX, localY);\r\n    if (area === null) {\r\n        return;\r\n    }\r\n    var key = area.key;\r\n    this.parent.emit(`${eventName}-${key}`, pointer, localX, localY)\r\n    this.parent.emit(eventName, key, pointer, localX, localY)\r\n}\r\nexport default SetInteractive;","import Pool from '../../../../pool.js';\r\nimport CONST from '../const.js';\r\n\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst RAW_NEWLINE = CONST.RAW_NEWLINE;\r\nconst WRAPPED_NEWLINE = CONST.WRAPPED_NEWLINE;\r\nconst NO_WRAP = CONST.NO_WRAP;\r\nconst WORD_WRAP = CONST.WORD_WRAP;\r\nconst CHAR_WRAP = CONST.CHAR_WRAP;\r\nconst splitRegExp = CONST.SPLITREGEXP;\r\n\r\nvar WRAP_RESULT = [];\r\nvar WrapText = function (text, getTextWidth, wrapMode, wrapWidth, offset) {\r\n    if (wrapWidth <= 0) {\r\n        wrapMode = NO_WRAP;\r\n    }\r\n\r\n    var retLines = WRAP_RESULT;\r\n    LinesPool.pushMultiple(retLines);\r\n\r\n    if (!text || !text.length) {\r\n        return retLines;\r\n    }\r\n\r\n    var lines = text.split(splitRegExp),\r\n        line, remainWidth, isLaseLine, newLineMode;\r\n    for (var i = 0, linesLen = lines.length; i < linesLen; i++) {\r\n        line = lines[i];\r\n        newLineMode = (i === (linesLen - 1)) ? NO_NEWLINE : RAW_NEWLINE;\r\n\r\n        if (wrapMode === NO_WRAP) {\r\n            var textWidth = getTextWidth(line);\r\n            retLines.push(LinesPool.newline(line, textWidth, newLineMode));\r\n            continue;\r\n        } else {\r\n            if (i === 0) {\r\n                remainWidth = wrapWidth - offset;\r\n            } else {\r\n                remainWidth = wrapWidth;\r\n            }\r\n        }\r\n\r\n        // short string testing\r\n        if (line.length <= 100) {\r\n            var textWidth = getTextWidth(line);\r\n            if (textWidth <= remainWidth) {\r\n                retLines.push(LinesPool.newline(line, textWidth, newLineMode));\r\n                continue;\r\n            }\r\n        }\r\n\r\n        // character mode\r\n        var tokenArray;\r\n        if (wrapMode === WORD_WRAP) {\r\n            // word mode\r\n            tokenArray = line.split(' ');\r\n        } else {\r\n            tokenArray = line;\r\n        }\r\n        var token;\r\n        var curLineText = '',\r\n            lineText = '',\r\n            currLineWidth, lineWidth = 0;\r\n        for (var j = 0, tokenLen = tokenArray.length; j < tokenLen; j++) {\r\n            token = tokenArray[j];\r\n\r\n            if (wrapMode === WORD_WRAP) {\r\n                curLineText += token;\r\n\r\n                if (j < (tokenLen - 1)) {\r\n                    curLineText += ' ';\r\n                }\r\n            } else {\r\n                curLineText += token;\r\n            }\r\n\r\n            currLineWidth = getTextWidth(curLineText);\r\n            if (currLineWidth > remainWidth) {\r\n                // new line\r\n                if (j === 0) {\r\n                    retLines.push(LinesPool.newline('', 0, WRAPPED_NEWLINE));\r\n                } else {\r\n                    retLines.push(LinesPool.newline(lineText, lineWidth, WRAPPED_NEWLINE));\r\n                    curLineText = token;\r\n                    if (wrapMode === WORD_WRAP) {\r\n                        if (j < (tokenLen - 1)) {\r\n                            curLineText += ' ';\r\n                        }\r\n                    }\r\n                    currLineWidth = getTextWidth(curLineText);\r\n                }\r\n\r\n                remainWidth = wrapWidth;\r\n            }\r\n\r\n            lineText = curLineText;\r\n            lineWidth = currLineWidth;\r\n        } // for token in tokenArray\r\n\r\n        // flush remain text\r\n        retLines.push(LinesPool.newline(lineText, lineWidth, newLineMode));\r\n\r\n    } // for each line in lines\r\n\r\n    return retLines;\r\n};\r\n\r\nvar LinesPool = new Pool();\r\nLinesPool.newline = function (text, width, newLineMode) {\r\n    var l = this.pop();\r\n    if (l === null) {\r\n        l = {};\r\n    }\r\n    l.text = text;\r\n    l.width = width;\r\n    l.newLineMode = newLineMode;\r\n    return l;\r\n};\r\n\r\nexport default WrapText;","import DrawMethods from './DrawMethods.js';\r\nimport PenManager from '../penmanger/PenManager.js';\r\nimport HitAreaManager from '../hitareamanager/HitAreaManager.js';\r\nimport SetInteractive from './SetInteractive.js';\r\nimport CONST from '../const.js';\r\nimport WrapText from './WrapText.js';\r\nimport Clone from '../../../../utils/object/Clone.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst NO_WRAP = CONST.NO_WRAP;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\n\r\nclass CanvasText {\r\n    constructor(config) {\r\n        this.parent = config.parent;\r\n        this.context = GetValue(config, 'context', null);\r\n        this.canvas = this.context.canvas;\r\n        this.parser = GetValue(config, 'parser', null);\r\n        this.defatultStyle = GetValue(config, 'style', null);\r\n        this.autoRound = true;\r\n\r\n        this.pensPool = GetValue(config, 'pensPool', null);\r\n        this.penManager = this.newPenManager();\r\n        this._tmpPenManager = null;\r\n\r\n        this.hitAreaManager = new HitAreaManager();\r\n\r\n        var context = this.context;\r\n        this.getTextWidth = function (text) {\r\n            return context.measureText(text).width;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.context = undefined;\r\n        this.canvas = undefined;\r\n        this.parser = undefined;\r\n        this.defatultStyle = undefined;\r\n\r\n        if (this.penManager) {\r\n            this.penManager.destroy();\r\n            this.penManager = undefined;\r\n        }\r\n        if (this._tmpPenManager) {\r\n            this._tmpPenManager.destroy();\r\n            this._tmpPenManager = undefined;\r\n        }\r\n        if (this.hitAreaManager) {\r\n            this.hitAreaManager.destroy();\r\n            this.hitAreaManager = undefined;\r\n        }\r\n    }\r\n\r\n    updatePenManager(text, wrapMode, wrapWidth, lineHeight, penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n        penManager.freePens();\r\n        if (text === \"\") {\r\n            return penManager;\r\n        }\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n\r\n        var cursorX = 0,\r\n            cursorY = 0;\r\n\r\n        var plainText, curProp, curStyle;\r\n        var match = this.parser.splitText(text),\r\n            result, wrapLines;\r\n        for (var i = 0, len = match.length; i < len; i++) {\r\n            result = this.parser.tagTextToProp(match[i], curProp);\r\n            plainText = result.plainText;\r\n            curProp = result.prop;\r\n\r\n            if (curProp.img) { // Image tag                \r\n                var imgWidth = this.imageManager.getOuterWidth(curProp.img);\r\n                if ((wrapWidth > 0) && (wrapMode !== NO_WRAP)) {  // Wrap mode\r\n                    if (wrapWidth < (cursorX + imgWidth)) {\r\n                        penManager.addNewLinePen();\r\n                        cursorY += lineHeight;\r\n                        cursorX = 0;\r\n                    }\r\n                }\r\n                penManager.addImagePen(cursorX, cursorY, imgWidth, Clone(curProp));\r\n                cursorX += imgWidth;\r\n\r\n            } else if (plainText !== '') {\r\n                // wrap text to lines\r\n                // Save the current context.\r\n                this.context.save();\r\n                curStyle = this.parser.propToContextStyle(\r\n                    this.defatultStyle,\r\n                    curProp\r\n                );\r\n                curStyle.buildFont();\r\n                curStyle.syncFont(canvas, context);\r\n                curStyle.syncStyle(canvas, context);\r\n                wrapLines = WrapText(plainText, this.getTextWidth, wrapMode, wrapWidth, cursorX);\r\n\r\n                // add pens\r\n                var n;\r\n                for (var j = 0, jLen = wrapLines.length; j < jLen; j++) {\r\n                    n = wrapLines[j];\r\n                    penManager.addTextPen(n.text, cursorX, cursorY, n.width, Clone(curProp), n.newLineMode);\r\n\r\n                    if (n.newLineMode !== NO_NEWLINE) {\r\n                        cursorX = 0;\r\n                        cursorY += lineHeight;\r\n                    } else {\r\n                        cursorX += n.width;\r\n                    }\r\n\r\n                }\r\n                this.context.restore();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return penManager;\r\n    }\r\n\r\n    get startXOffset() {\r\n        var defatultStyle = this.defatultStyle;\r\n        return (defatultStyle.strokeThickness / 2);\r\n    }\r\n\r\n    get startYOffset() {\r\n        var defatultStyle = this.defatultStyle;\r\n        return (defatultStyle.strokeThickness / 2) + defatultStyle.metrics.ascent;\r\n    }\r\n\r\n    get lines() {\r\n        return this.penManager.lines;\r\n    }\r\n\r\n    get desplayLinesCount() {\r\n        var linesCount = this.penManager.linesCount,\r\n            maxLines = this.defatultStyle.maxLines;\r\n        if ((maxLines > 0) && (linesCount > maxLines)) {\r\n            linesCount = maxLines;\r\n        }\r\n        return linesCount;\r\n    }\r\n\r\n    get linesWidth() {\r\n        return this.penManager.getMaxLineWidth();\r\n    }\r\n\r\n    get linesHeight() {\r\n        var linesCount = this.desplayLinesCount;\r\n        var linesHeight = (this.defatultStyle.lineHeight * linesCount);\r\n        if (linesCount > 0) {\r\n            linesHeight -= this.defatultStyle.lineSpacing;\r\n        }\r\n        return linesHeight;\r\n    }\r\n\r\n    get imageManager() {\r\n        return this.parent.imageManager;\r\n    }\r\n\r\n    newPenManager() {\r\n        return new PenManager({\r\n            pensPool: this.pensPool,\r\n            tagToText: this.parser.propToTagText,\r\n            tagToTextScope: this.parser\r\n        });\r\n    }\r\n\r\n    get tmpPenManager() {\r\n        if (this._tmpPenManager === null) {\r\n            this._tmpPenManager = this.newPenManager();\r\n        }\r\n        return this._tmpPenManager;\r\n    }\r\n\r\n    getPlainText(text, start, end) {\r\n        var plainText;\r\n        if (text == null) {\r\n            plainText = this.penManager.plainText;\r\n        } else {\r\n            var m, match = this.parser.splitText(text, 1); // PLAINTEXTONLY_MODE\r\n            plainText = \"\";\r\n            for (var i = 0, len = match.length; i < len; i++) {\r\n                plainText += match[i];\r\n            }\r\n        }\r\n\r\n        if ((start != null) || (end != null)) {\r\n            if (start == null) {\r\n                start = 0;\r\n            }\r\n            if (end == null) {\r\n                end = plainText.length;\r\n            }\r\n            plainText = plainText.substring(start, end);\r\n        }\r\n\r\n        return plainText;\r\n    }\r\n\r\n    getPenManager(text, retPenManager) {\r\n        if (text === undefined) {\r\n            return this.copyPenManager(retPenManager, this.penManager);\r\n        }\r\n\r\n        if (retPenManager === undefined) {\r\n            retPenManager = this.newPenManager();\r\n        }\r\n\r\n        var defatultStyle = this.defatultStyle;\r\n        this.updatePenManager(\r\n            text,\r\n            defatultStyle.wrapMode,\r\n            defatultStyle.wrapWidth,\r\n            defatultStyle.lineHeight,\r\n            retPenManager\r\n        );\r\n        return retPenManager;\r\n    }\r\n\r\n    getText(text, start, end, wrap) {\r\n        if (text == null) {\r\n            return this.penManager.getSliceTagText(start, end, wrap);\r\n        }\r\n\r\n        var penManager = this.tmpPenManager;\r\n        var defatultStyle = this.defatultStyle;\r\n        this.updatePenManager(\r\n            text,\r\n            defatultStyle.wrapMode,\r\n            defatultStyle.wrapWidth,\r\n            defatultStyle.lineHeight,\r\n            penManager\r\n        );\r\n\r\n        return penManager.getSliceTagText(start, end, wrap);\r\n    }\r\n\r\n    copyPenManager(ret, src) {\r\n        if (src === undefined) {\r\n            src = this.penManager;\r\n        }\r\n        return src.copy(ret);\r\n    }\r\n\r\n    getTextWidth(penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n\r\n        return penManager.getMaxLineWidth();\r\n    }\r\n\r\n    getLastPen(penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n\r\n        return penManager.lastPen;\r\n    }\r\n};\r\n\r\nvar methods = {\r\n    setInteractive: SetInteractive,\r\n}\r\n\r\nObject.assign(\r\n    CanvasText.prototype,\r\n    DrawMethods,\r\n    methods\r\n);\r\n\r\nexport default CanvasText;","const GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass ImageManager {\r\n    constructor(textureManager) {\r\n        this.textureManager = textureManager;\r\n        this.images = {};\r\n    }\r\n\r\n    add(key, config) {\r\n        if (typeof (key) === 'string') {\r\n            this._add(key, config);\r\n        } else if (Array.isArray(key)) {\r\n            var data = key;\r\n            for (var i = 0, cnt = data.length; i < cnt; i++) {\r\n                this._add(data[i]);\r\n            }\r\n        } else {\r\n            var data = key;\r\n            for (var key in data) {\r\n                this._add(key, data[key]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    _add(key, config) {\r\n        if (config === undefined) {\r\n            config = {\r\n                key: key\r\n            }\r\n        }\r\n\r\n        var textureKey = config.key, frameKey = config.frame;\r\n        var width = config.width, height = config.height;\r\n\r\n        if ((width === undefined) || (height === undefined)) {\r\n            var frame = this.textureManager.getFrame(textureKey, frameKey);\r\n            var frameWidth = (frame) ? frame.cutWidth : 0;\r\n            var frameHeight = (frame) ? frame.cutHeight : 0;\r\n            if ((width === undefined) && (height === undefined)) {\r\n                width = frameWidth;\r\n                height = frameHeight;\r\n            } else if (width === undefined) {\r\n                width = frameWidth * (height / frameHeight);\r\n            } else if (height === undefined) {\r\n                height = frameHeight * (width / frameWidth);\r\n            }\r\n        }\r\n\r\n        this.images[key] = {\r\n            key: textureKey,\r\n            frame: frameKey,\r\n            width: width,\r\n            height: height,\r\n            y: GetValue(config, 'y', 0),\r\n            left: GetValue(config, 'left', 0),\r\n            right: GetValue(config, 'right', 0)\r\n        }\r\n    }\r\n\r\n    remove(key) {\r\n        if (this.images.hasOwnProperty(key)) {\r\n            delete this.images[key];\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get(key) {\r\n        if (!this.images.hasOwnProperty(key)) {\r\n            if (this.textureManager.exists(key)) {\r\n                this.add(key);\r\n            }\r\n        }\r\n        return this.images[key];\r\n    }\r\n\r\n    getOuterWidth(key) {\r\n        var data = this.get(key);\r\n        return (data) ? (data.width + data.left + data.right) : 0;\r\n    }\r\n\r\n    getFrame(key) {\r\n        var data = this.get(key);\r\n        return (data) ? this.textureManager.getFrame(data.key, data.frame) : undefined;\r\n    }\r\n\r\n    hasTexture(key) {\r\n        return !!this.getFrame(key);\r\n    }\r\n}\r\nexport default ImageManager;","import ImageManager from './ImageManager.js';\r\n\r\nvar globImageManager;\r\n\r\nexport default function(textureManager) {\r\n    if (globImageManager === undefined) {\r\n        globImageManager = new ImageManager(textureManager);\r\n    }\r\n    return globImageManager;\r\n}","import Render from './render/Render.js';\r\nimport TextStyle from './textstyle/TextStyle.js'; // extended\r\nimport CanvasTextKlass from './canvastext/CanvasText.js';\r\nimport Pool from '../../../pool.js';\r\nimport CONST from './const.js';\r\nimport GetGlobImageManager from './imagemanager/GetGlobImageManager.js';\r\n\r\nconst AddToDOM = Phaser.DOM.AddToDOM;\r\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\r\nconst GameObject = Phaser.GameObjects.GameObject;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst RemoveFromDOM = Phaser.DOM.RemoveFromDOM;\r\nconst SPLITREGEXP = CONST.SPLITREGEXP;\r\n\r\nvar PensPools = {};\r\n\r\nclass Text extends GameObject {\r\n    constructor(scene, x, y, text, style, type, parser) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n\r\n        super(scene, type);\r\n\r\n        this.renderer = scene.sys.game.renderer;\r\n\r\n        this.setPosition(x, y);\r\n        this.setOrigin(0, 0);\r\n        this.initPipeline();\r\n\r\n        this.canvas = CanvasPool.create(this);\r\n\r\n        this.context = this.canvas.getContext('2d');\r\n\r\n        if (style) {\r\n            // Override align\r\n            if (style.hasOwnProperty('align')) {\r\n                var halign = style.align;\r\n                delete style.align;\r\n                style.halign = halign;\r\n            }\r\n            // Has Stroke color but stroke thinkness, set stroke thinkness to 1\r\n            if (style.hasOwnProperty('stroke') && !style.hasOwnProperty('strokeThickness')) {\r\n                style.strokeThickness = 1;\r\n            }\r\n        }\r\n        this.style = new TextStyle(this, style);\r\n\r\n        this.autoRound = true;\r\n\r\n        this._text = undefined;\r\n\r\n        this.padding = {\r\n            left: 0,\r\n            right: 0,\r\n            top: 0,\r\n            bottom: 0\r\n        };\r\n\r\n        this.width = 1;\r\n\r\n        this.height = 1;\r\n\r\n        this.dirty = false;\r\n\r\n        //  If resolution wasn't set, then we get it from the game config\r\n        if (this.style.resolution === 0) {\r\n            this.style.resolution = scene.sys.game.config.resolution;\r\n        }\r\n\r\n        this._crop = this.resetCropObject();\r\n\r\n        //  Create a Texture for this Text object\r\n        this.texture = scene.sys.textures.addCanvas(null, this.canvas, true);\r\n\r\n        //  Get the frame\r\n        this.frame = this.texture.get();\r\n\r\n        //  Set the resolution\r\n        this.frame.source.resolution = this.style.resolution;\r\n\r\n        if (this.renderer.gl) {\r\n            //  Clear the default 1x1 glTexture, as we override it later\r\n\r\n            this.renderer.deleteTexture(this.frame.source.glTexture);\r\n\r\n            this.frame.source.glTexture = null;\r\n        }\r\n\r\n        if (!PensPools.hasOwnProperty(type)) {\r\n            PensPools[type] = new Pool();\r\n        }\r\n        this.canvasText = new CanvasTextKlass({\r\n            parent: this,\r\n            context: this.context,\r\n            parser: parser,\r\n            style: this.style,\r\n            pensPool: PensPools[type]\r\n        });\r\n\r\n        //this.initRTL();\r\n\r\n        if (style && style.padding) {\r\n            this.setPadding(style.padding);\r\n        }\r\n\r\n        this.setText(text);\r\n\r\n        scene.sys.game.events.on('contextrestored', function () {\r\n            this.dirty = true;\r\n        }, this);\r\n    }\r\n\r\n    set text(value) {\r\n        this.setText(value);\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n\r\n    initRTL() {\r\n        if (!this.style.rtl) {\r\n            return;\r\n        }\r\n\r\n        //  Here is where the crazy starts.\r\n        //\r\n        //  Due to browser implementation issues, you cannot fillText BiDi text to a canvas\r\n        //  that is not part of the DOM. It just completely ignores the direction property.\r\n\r\n        this.canvas.dir = 'rtl';\r\n\r\n        //  Experimental atm, but one day ...\r\n        this.context.direction = 'rtl';\r\n\r\n        //  Add it to the DOM, but hidden within the parent canvas.\r\n        this.canvas.style.display = 'none';\r\n\r\n        AddToDOM(this.canvas, this.scene.sys.canvas);\r\n\r\n        //  And finally we set the x origin\r\n        this.originX = 1;\r\n    }\r\n\r\n    setText(value) {\r\n        if (!value && value !== 0) {\r\n            value = '';\r\n        }\r\n\r\n        if (Array.isArray(value)) {\r\n            value = value.join('\\n');\r\n        }\r\n\r\n        if (value !== this._text) {\r\n            this._text = value.toString();\r\n\r\n            this.updateText();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setStyle(style) {\r\n        return this.style.setStyle(style);\r\n    }\r\n\r\n    setFont(font) {\r\n        return this.style.setFont(font);\r\n    }\r\n\r\n    setFontFamily(family) {\r\n        return this.style.setFontFamily(family);\r\n    }\r\n\r\n    setFontSize(size) {\r\n        return this.style.setFontSize(size);\r\n    }\r\n\r\n    setFontStyle(style) {\r\n        return this.style.setFontStyle(style);\r\n    }\r\n\r\n    setFixedSize(width, height) {\r\n        return this.style.setFixedSize(width, height);\r\n    }\r\n\r\n    setBackgroundColor(color) {\r\n        return this.style.setBackgroundColor(color);\r\n    }\r\n\r\n    setFill(color) {\r\n        return this.style.setFill(color);\r\n    }\r\n\r\n    setColor(color) {\r\n        return this.style.setColor(color);\r\n    }\r\n\r\n    setStroke(color, thickness) {\r\n        return this.style.setStroke(color, thickness);\r\n    }\r\n\r\n    setShadow(x, y, color, blur, shadowStroke, shadowFill) {\r\n        return this.style.setShadow(x, y, color, blur, shadowStroke, shadowFill);\r\n    }\r\n\r\n    setShadowOffset(x, y) {\r\n        return this.style.setShadowOffset(x, y);\r\n    }\r\n\r\n    setShadowColor(color) {\r\n        return this.style.setShadowColor(color);\r\n    }\r\n\r\n    setShadowBlur(blur) {\r\n        return this.style.setShadowBlur(blur);\r\n    }\r\n\r\n    setShadowStroke(enabled) {\r\n        return this.style.setShadowStroke(enabled);\r\n    }\r\n\r\n    setShadowFill(enabled) {\r\n        return this.style.setShadowFill(enabled);\r\n    }\r\n\r\n    setWrapMode(mode) {\r\n        return this.style.setWrapMode(mode);\r\n    }\r\n\r\n    setWrapWidth(width) {\r\n        return this.style.setWrapWidth(width);\r\n    }\r\n\r\n    setAlign(align) {\r\n        return this.style.setHAlign(align);\r\n    }\r\n\r\n    setLineSpacing(value) {\r\n        return this.style.setLineSpacing(value);\r\n    }\r\n\r\n    setPadding(left, top, right, bottom) {\r\n        if (typeof left === 'object') {\r\n            var config = left;\r\n\r\n            //  If they specify x and/or y this applies to all\r\n            var x = GetValue(config, 'x', null);\r\n\r\n            if (x !== null) {\r\n                left = x;\r\n                right = x;\r\n            } else {\r\n                left = GetValue(config, 'left', 0);\r\n                right = GetValue(config, 'right', left);\r\n            }\r\n\r\n            var y = GetValue(config, 'y', null);\r\n\r\n            if (y !== null) {\r\n                top = y;\r\n                bottom = y;\r\n            } else {\r\n                top = GetValue(config, 'top', 0);\r\n                bottom = GetValue(config, 'bottom', top);\r\n            }\r\n        } else {\r\n            if (left === undefined) {\r\n                left = 0;\r\n            }\r\n            if (top === undefined) {\r\n                top = left;\r\n            }\r\n            if (right === undefined) {\r\n                right = left;\r\n            }\r\n            if (bottom === undefined) {\r\n                bottom = top;\r\n            }\r\n        }\r\n\r\n        this.padding.left = left;\r\n        this.padding.top = top;\r\n        this.padding.right = right;\r\n        this.padding.bottom = bottom;\r\n\r\n        return this.updateText(false);\r\n    }\r\n\r\n    setResolution(value) {\r\n        return this.style.setResolution(value);\r\n    }\r\n\r\n    setMaxLines(max) {\r\n        return this.style.setMaxLines(max);\r\n    }\r\n\r\n    updateText(runWrap) {\r\n        if (runWrap === undefined) {\r\n            runWrap = true;\r\n        }\r\n        var canvasText = this.canvasText;\r\n\r\n        // wrap text to pens\r\n        var style = this.style;\r\n        if (runWrap) {\r\n            canvasText.updatePenManager(\r\n                this._text,\r\n                style.wrapMode,\r\n                style.wrapWidth,\r\n                style.lineHeight\r\n            );\r\n        }\r\n\r\n        // resize\r\n        var padding = this.padding;\r\n        var textWidth, textHeight;\r\n        if (style.fixedWidth === 0) {\r\n            this.width = canvasText.linesWidth + padding.left + padding.right;\r\n            textWidth = canvasText.linesWidth;\r\n        }\r\n        else {\r\n            this.width = style.fixedWidth;\r\n            textWidth = this.width - padding.left - padding.right;\r\n            if (textWidth < canvasText.linesWidth) {\r\n                textWidth = canvasText.linesWidth;\r\n            }\r\n        }\r\n        if (style.fixedHeight === 0) {\r\n            this.height = canvasText.linesHeight + padding.top + padding.bottom;\r\n            textHeight = canvasText.linesHeight;\r\n        }\r\n        else {\r\n            this.height = style.fixedHeight;\r\n            textHeight = this.height - padding.top - padding.bottom;\r\n            if (textHeight < canvasText.linesHeight) {\r\n                textHeight = canvasText.linesHeight;\r\n            }\r\n        }\r\n\r\n        var w = this.width;\r\n        var h = this.height;\r\n\r\n        this.updateDisplayOrigin();\r\n\r\n        var resolution = style.resolution;\r\n        w *= resolution;\r\n        h *= resolution;\r\n\r\n        w = Math.max(Math.ceil(w), 1);\r\n        h = Math.max(Math.ceil(h), 1);\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n        if (canvas.width !== w || canvas.height !== h) {\r\n            canvas.width = w;\r\n            canvas.height = h;\r\n            this.frame.setSize(w, h);\r\n        } else {\r\n            context.clearRect(0, 0, w, h);\r\n        }\r\n\r\n        context.save();\r\n        context.scale(resolution, resolution);\r\n\r\n        // draw\r\n        canvasText.draw(\r\n            padding.left,\r\n            padding.top,\r\n            textWidth,\r\n            textHeight\r\n        );\r\n\r\n        context.restore();\r\n\r\n        if (this.renderer.gl) {\r\n            this.frame.source.glTexture = this.renderer.canvasToTexture(canvas, this.frame.source.glTexture, true);\r\n            this.frame.glTexture = this.frame.source.glTexture;\r\n        }\r\n\r\n        this.dirty = true;\r\n\r\n        var input = this.input;\r\n\r\n        if (input && !input.customHitArea) {\r\n            input.hitArea.width = this.width;\r\n            input.hitArea.height = this.height;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    getTextMetrics() {\r\n        return this.style.getTextMetrics();\r\n    }\r\n\r\n    toJSON() {\r\n        var out = Components.ToJSON(this);\r\n\r\n        //  Extra Text data is added here\r\n\r\n        var data = {\r\n            autoRound: this.autoRound,\r\n            text: this._text,\r\n            style: this.style.toJSON(),\r\n            resolution: this.resolution,\r\n            padding: {\r\n                left: this.padding.left,\r\n                right: this.padding.right,\r\n                top: this.padding.top,\r\n                bottom: this.padding.bottom\r\n            }\r\n        };\r\n\r\n        out.data = data;\r\n\r\n        return out;\r\n    }\r\n\r\n    preDestroy() {\r\n        if (this.style.rtl) {\r\n            RemoveFromDOM(this.canvas);\r\n        }\r\n\r\n        CanvasPool.remove(this.canvas);\r\n        this.canvasText.destroy();\r\n    }\r\n\r\n    setInteractive(shape, callback, dropZone) {\r\n        GameObject.prototype.setInteractive.call(this, shape, callback, dropZone);\r\n        this.canvasText.setInteractive();\r\n        return this;\r\n    }\r\n\r\n    getWrappedText(text, start, end) {\r\n        text = this.canvasText.getText(text, start, end, true);\r\n        return text.split(SPLITREGEXP);\r\n    }\r\n\r\n    getPlainText(text, start, end) {\r\n        return this.canvasText.getPlainText(text, start, end);\r\n    }\r\n\r\n    getText(text, start, end) {\r\n        return this.canvasText.getText(text, start, end, false);\r\n    }\r\n\r\n    getSubString(text, start, end) {\r\n        return this.getText(text, start, end);\r\n    }\r\n\r\n    copyPenManager(penManager) {\r\n        return this.canvasText.copyPenManager(penManager);\r\n    }\r\n\r\n    getPenManager(text, penManager) {\r\n        return this.canvasText.getPenManager(text, penManager);\r\n    }\r\n\r\n    setSize(width, height) {\r\n        return this.setFixedSize(width, height);\r\n    }\r\n\r\n    resize(width, height) {\r\n        return this.setFixedSize(width, height);\r\n    }\r\n\r\n    set lineSpacing(value) {\r\n        this.setLineSpacing(value);\r\n    }\r\n    get lineSpacing() {\r\n        return this.style.lineSpacing;\r\n    }\r\n\r\n    get imageManager() {\r\n        return GetGlobImageManager(this.scene.textures);\r\n    }\r\n\r\n    addImage(key, config) {\r\n        this.imageManager.add(key, config);\r\n        return this;\r\n    }\r\n\r\n    drawAreaBounds(graphics, color) {\r\n        this.canvasText.hitAreaManager.drawBounds(graphics, color, this);\r\n        return this;\r\n    }\r\n}\r\n\r\nconst Components = Phaser.GameObjects.Components;\r\nPhaser.Class.mixin(Text,\r\n    [\r\n        Components.Alpha,\r\n        Components.BlendMode,\r\n        Components.ComputedSize,\r\n        Components.Crop,\r\n        Components.Depth,\r\n        Components.Flip,\r\n        Components.GetBounds,\r\n        Components.Mask,\r\n        Components.Origin,\r\n        Components.Pipeline,\r\n        Components.ScrollFactor,\r\n        Components.Tint,\r\n        Components.Transform,\r\n        Components.Visible,\r\n        Render\r\n    ]\r\n);\r\n\r\nexport default Text;","import TextStyle from '../textbase/textstyle/TextStyle.js';\r\n\r\nvar GETPROP_RESULT = {\r\n    plainText: null,\r\n    prevProp: null\r\n};\r\n\r\nvar STYLE_RESULT = new TextStyle();\r\nvar PROPLIST = [];\r\n\r\nclass parser {\r\n    constructor(tags) {\r\n        if (tags === undefined) {\r\n            tags = {};\r\n        }\r\n        this.tags = tags;\r\n    }\r\n\r\n    addTag(name, prop) {\r\n        this.tags[name] = prop;\r\n    }\r\n\r\n    splitText(text, mode) {\r\n        var result = [];\r\n        var arr, m, charIdx = 0,\r\n            totalLen = text.length,\r\n            matchStart = totalLen;\r\n        var innerMatch;\r\n        while (true) {\r\n            arr = RE_SPLITTEXT.exec(text);\r\n            if (!arr) {\r\n                break;\r\n            }\r\n\r\n            m = arr[0];\r\n            matchStart = RE_SPLITTEXT.lastIndex - m.length;\r\n\r\n            if (charIdx < matchStart) {\r\n                result.push(text.substring(charIdx, matchStart));\r\n            }\r\n            if (mode === undefined) {\r\n                result.push(m);\r\n            } else if (mode === 1) { // RAWTEXTONLY_MODE\r\n                if (RE_CLASS_HEADER.test(m)) {\r\n                    innerMatch = m.match(RE_CLASS);\r\n                    result.push(innerMatch[2]);\r\n                } else if (RE_STYLE_HEADER.test(m)) {\r\n                    innerMatch = m.match(RE_STYLE);\r\n                    result.push(innerMatch[2]);\r\n                }\r\n            }\r\n\r\n            charIdx = RE_SPLITTEXT.lastIndex;\r\n        }\r\n\r\n\r\n        if (charIdx < totalLen) {\r\n            result.push(text.substring(charIdx, totalLen));\r\n        }\r\n        return result; // [text,...]\r\n    }\r\n\r\n    tagTextToProp(text, prevProp) {\r\n        var plainText, propOut;\r\n        if (RE_CLASS_HEADER.test(text)) {\r\n            var innerMatch = text.match(RE_CLASS);\r\n            if (innerMatch != null) {\r\n                var name = innerMatch[1];\r\n                var tags = this.tags;\r\n                if (tags.hasOwnProperty(name)) {\r\n                    propOut = tags[name];\r\n                } else {\r\n                    propOut = {};\r\n                }\r\n                propOut._class = name;\r\n                plainText = innerMatch[2];\r\n            }\r\n        } else if (RE_STYLE_HEADER.test(text)) {\r\n            var innerMatch = text.match(RE_STYLE);\r\n            if (innerMatch != null) {\r\n                var style = innerMatch[1];\r\n                propOut = styleToProp(style);\r\n                propOut._style = style;\r\n                plainText = innerMatch[2];\r\n            }\r\n        }\r\n\r\n        if (plainText == null) {\r\n            plainText = text;\r\n        }\r\n\r\n        if (propOut == null) {\r\n            propOut = {};\r\n        }\r\n\r\n        var result = GETPROP_RESULT;\r\n        result.plainText = plainText;\r\n        result.prop = propOut;\r\n        return result;\r\n    }\r\n\r\n    propToContextStyle(defaultStyle, prop) {\r\n        var result = STYLE_RESULT;\r\n        if (!prop.hasOwnProperty('img')) {\r\n            result.image = null;\r\n\r\n            if (prop.hasOwnProperty('family') || prop.hasOwnProperty('fontFamily') || prop.hasOwnProperty('font-family')) {\r\n                var family = (prop.hasOwnProperty('family')) ? prop.family :\r\n                    (prop.hasOwnProperty('fontFamily')) ? prop.fontFamily :\r\n                    prop['font-family'];\r\n                result.fontFamily = family;\r\n            } else {\r\n                result.fontFamily = defaultStyle.fontFamily;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('size') || prop.hasOwnProperty('fontSize') || prop.hasOwnProperty('font-size')) {\r\n                var size = (prop.hasOwnProperty('size')) ? prop.size :\r\n                    (prop.hasOwnProperty('fontSize')) ? prop.fontSize :\r\n                    prop['font-size'];\r\n                if (typeof (size) === 'number') {\r\n                    size = size.toString() + 'px';\r\n                }\r\n                result.fontSize = size;\r\n            } else {\r\n                result.fontSize = defaultStyle.fontSize;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('style') || prop.hasOwnProperty('fontStyle') || prop.hasOwnProperty('font-style')) {\r\n                var fontStyle = (prop.hasOwnProperty('style')) ? prop.style :\r\n                    (prop.hasOwnProperty('fontStyle')) ? prop.fontStyle :\r\n                    prop['font-style'];\r\n                result.fontStyle = fontStyle;\r\n            } else {\r\n                result.fontStyle = defaultStyle.fontStyle;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('color') || prop.hasOwnProperty('font-color')) {\r\n                var color = (prop.hasOwnProperty('color')) ? prop.color : prop['font-color'];\r\n                result.color = color;\r\n            } else {\r\n                result.color = defaultStyle.color;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('stroke')) {\r\n                var stroke = prop.stroke; // {color, thinkness}\r\n                result.stroke = (stroke.hasOwnProperty('color')) ? stroke.color : defaultStyle.stroke;\r\n                result.strokeThickness = (stroke.hasOwnProperty('thinkness')) ? stroke.thinkness : defaultStyle.strokeThickness;\r\n            } else {\r\n                result.stroke = defaultStyle.stroke;\r\n                result.strokeThickness = defaultStyle.strokeThickness;\r\n            }\r\n        } else {\r\n            result.image = prop.img;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('shadow')) {\r\n            var shadow = prop.shadow; // {color, offsetX, offsetY, blur}\r\n            result.shadowColor = (shadow.hasOwnProperty('color')) ? shadow.color : defaultStyle.shadowColor;\r\n            result.shadowOffsetX = (shadow.hasOwnProperty('offsetX')) ? shadow.offsetX : defaultStyle.shadowOffsetX;\r\n            result.shadowOffsetY = (shadow.hasOwnProperty('offsetY')) ? shadow.offsetY : defaultStyle.shadowOffsetY;\r\n            result.shadowBlur = (shadow.hasOwnProperty('blur')) ? shadow.blur : defaultStyle.shadowBlur;\r\n            result.shadowStroke = true;\r\n            result.shadowFill = true;\r\n        } else {\r\n            result.shadowColor = defaultStyle.shadowColor;\r\n            result.shadowOffsetX = defaultStyle.shadowOffsetX;\r\n            result.shadowOffsetY = defaultStyle.shadowOffsetY;\r\n            result.shadowBlur = defaultStyle.shadowBlur;\r\n            result.shadowStroke = defaultStyle.shadowStroke;\r\n            result.shadowFill = defaultStyle.shadowFill;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('u') || prop.hasOwnProperty('underline')) {\r\n            var u = (prop.hasOwnProperty('u')) ? prop.u : prop.underline; // {color, thinkness, offset}\r\n            result.underlineColor = (u.hasOwnProperty('color')) ? u.color : defaultStyle.underlineColor;\r\n            result.underlineThickness = (u.hasOwnProperty('thinkness')) ? u.thinkness : defaultStyle.underlineThickness;\r\n            result.underlineOffset = (u.hasOwnProperty('offset')) ? u.offset : defaultStyle.underlineOffset;\r\n        } else {\r\n            result.underlineColor = defaultStyle.underlineColor;\r\n            result.underlineThickness = defaultStyle.underlineThickness;\r\n            result.underlineOffset = defaultStyle.underlineOffset;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    propToTagText(text, prop, prevProp) {\r\n        if (prop.hasOwnProperty('_class')) { // class mode\r\n            if (text === '') {\r\n                if (this.isTextTag(prop._class)) {\r\n                    return '';\r\n                }\r\n            }\r\n            return \"<class='\" + prop._class + \"'>\" + text + \"</class>\";\r\n        } else if (prop.hasOwnProperty('_style')) { // class mode\r\n            return \"<style='\" + prop._style + \"'>\" + text + \"</style>\";\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.tags = undefined;\r\n    }\r\n\r\n    isTextTag(tagName) {\r\n        var tag = this.tags[tagName];\r\n        if (tag) {\r\n            return (tag.img == null);\r\n        } else { // tag not found\r\n            return false;\r\n        }\r\n    }\r\n};\r\n\r\nvar styleToProp = function (s) {\r\n    s = s.split(\";\");\r\n\r\n    var result = {},\r\n        prop, k, v;\r\n    for (var i = 0, slen = s.length; i < slen; i++) {\r\n        prop = s[i].split(\":\");\r\n        k = prop[0], v = prop[1];\r\n        if (isEmpty(k) || isEmpty(v)) {\r\n            continue;\r\n        }\r\n\r\n        switch (k) {\r\n            case 'stroke':\r\n                var stroke = v.split(' '); // stroke:blue 1px\r\n                var len = stroke.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = stroke[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.thinkness = parseInt(stroke[1].replace('px', ''));\r\n                }\r\n                break;\r\n            case 'shadow':\r\n                var shadow = v.split(' '); // shadow:blue 2px 2px 2px\r\n                var len = shadow.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = shadow[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.offsetX = parseInt(shadow[1].replace('px', ''));\r\n                }\r\n                if (len >= 3) {\r\n                    v.offsetY = parseInt(shadow[2].replace('px', ''));\r\n                }\r\n                if (len >= 4) {\r\n                    v.blur = parseInt(shadow[3].replace('px', ''));\r\n                }\r\n                break;\r\n            case 'u':\r\n            case 'underline': // underline:blue 3px -1px\r\n                var u = v.split(' ');\r\n                var len = u.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = u[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.thinkness = parseInt(u[1].replace('px', ''));\r\n                }\r\n                if (len >= 3) {\r\n                    v.offset = parseInt(u[2].replace('px', ''));\r\n                }\r\n                break;\r\n        }\r\n        result[k] = v;\r\n    }\r\n    return result;\r\n};\r\n\r\nvar isEmpty = function (s) {\r\n    // Remove white spaces.\r\n    s = s.replace(RE_SPACE, '');\r\n    return (s.length === 0);\r\n};\r\n\r\nvar RE_SPLITTEXT = /<\\s*class=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/class\\s*\\>|<\\s*style=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/style\\s*\\>/g;\r\nvar RE_CLASS_HEADER = /<\\s*class=/i;\r\nvar RE_CLASS = /<\\s*class=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/class\\s*\\>/;\r\nvar RE_STYLE_HEADER = /<\\s*style=/i;\r\nvar RE_STYLE = /<\\s*style=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/style\\s*\\>/;\r\nvar RE_SPACE = /^\\s+|\\s+$/;\r\n\r\nexport default parser;","import Text from '../textbase/Text.js';\r\nimport ParserKlass from './Parser.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass TagText extends Text {\r\n    constructor(scene, x, y, text, style) {\r\n        var tags = GetValue(style, 'tags', undefined);\r\n        var parser = new ParserKlass(tags);\r\n        super(scene, x, y, text, style, 'rexTagText', parser);\r\n        this.parser = parser;\r\n    }\r\n\r\n    addTag(name, prop) {\r\n        this.parser.addTag(name, prop);\r\n        return this.updateText(true);\r\n    }\r\n\r\n    addTags(tags) {\r\n        for(var name in tags){\r\n            this.parser.addTag(name, tags[name]);\r\n        }\r\n        return this.updateText(true);\r\n    }\r\n\r\n    preDestroy() {\r\n        super.preDestroy();\r\n        this.parser.destroy();\r\n        this.parser = undefined;\r\n    }\r\n}\r\n\r\nexport default TagText;","import TagText from './TagText.js';\r\n\r\nconst GetAdvancedValue = Phaser.Utils.Objects.GetAdvancedValue;\r\nconst BuildGameObject = Phaser.GameObjects.BuildGameObject;\r\n\r\nexport default function (config, addToScene) {\r\n    // style Object = {\r\n    //     font: [ 'font', '16px Courier' ],\r\n    //     backgroundColor: [ 'backgroundColor', null ],\r\n    //     fill: [ 'fill', '#fff' ],\r\n    //     stroke: [ 'stroke', '#fff' ],\r\n    //     strokeThickness: [ 'strokeThickness', 0 ],\r\n    //     shadowOffsetX: [ 'shadow.offsetX', 0 ],\r\n    //     shadowOffsetY: [ 'shadow.offsetY', 0 ],\r\n    //     shadowColor: [ 'shadow.color', '#000' ],\r\n    //     shadowBlur: [ 'shadow.blur', 0 ],\r\n    //     shadowStroke: [ 'shadow.stroke', false ],\r\n    //     shadowFill: [ 'shadow.fill', false ],\r\n    //     align: [ 'align', 'left' ],\r\n    //     maxLines: [ 'maxLines', 0 ],\r\n    //     fixedWidth: [ 'fixedWidth', false ],\r\n    //     fixedHeight: [ 'fixedHeight', false ]\r\n    // }\r\n\r\n    var content = GetAdvancedValue(config, 'text', '');\r\n    var style = GetAdvancedValue(config, 'style', null);\r\n\r\n    //  Padding\r\n    //      { padding: 2 }\r\n    //      { padding: { x: , y: }}\r\n    //      { padding: { left: , top: }}\r\n    //      { padding: { left: , right: , top: , bottom: }}  \r\n\r\n    var padding = GetAdvancedValue(config, 'padding', null);\r\n\r\n    if (padding !== null) {\r\n        style.padding = padding;\r\n    }\r\n\r\n    if (addToScene !== undefined) {\r\n        config.add = addToScene;\r\n    }\r\n\r\n    var gameObject = new TagText(this.scene, 0, 0, content, style);\r\n    BuildGameObject(this.scene, gameObject, config);\r\n\r\n    //  Text specific config options:\r\n\r\n    gameObject.autoRound = GetAdvancedValue(config, 'autoRound', true);\r\n    gameObject.resolution = GetAdvancedValue(config, 'resolution', 1);\r\n\r\n    return gameObject;\r\n};","import Factory from './gameobjects/text/tagtext/Factory.js';\r\nimport Creator from './gameobjects/text/tagtext/Creator.js';\r\nimport TagText from './gameobjects/text/tagtext/TagText.js';\r\n\r\nPhaser.GameObjects.GameObjectFactory.register('rexTagText', Factory);\r\nPhaser.GameObjects.GameObjectCreator.register('rexTagText', Creator);\r\n\r\nexport default TagText;","import TagText from './TagText.js';\r\n\r\nexport default function (x, y, text, style) {\r\n    var gameObject = new TagText(this.scene, x, y, text, style);\r\n    this.scene.add.existing(gameObject);\r\n    return gameObject;\r\n}","export default {\r\n    setEventEmitter(eventEmitter, EventEmitterClass) {\r\n        if (EventEmitterClass === undefined) {\r\n            EventEmitterClass = Phaser.Events.EventEmitter; // Use built-in EventEmitter class by default\r\n        }\r\n        this._privateEE = (eventEmitter === undefined);\r\n        this._eventEmitter = (this._privateEE) ? (new EventEmitterClass()) : eventEmitter;\r\n        return this;\r\n    },\r\n\r\n    destroyEventEmitter() {\r\n        if (this._eventEmitter && this._privateEE) {\r\n            this._eventEmitter.shutdown();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    getEventEmitter() {\r\n        return this._eventEmitter;\r\n    },\r\n\r\n    on: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.on.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    once: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.once.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    off: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.off.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    emit: function (event) {\r\n        if (this._eventEmitter && event) {\r\n            this._eventEmitter.emit.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addListener: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.addListener.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    removeListener: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.removeListener.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    removeAllListeners: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.removeAllListeners.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    listenerCount: function () {\r\n        if (this._eventEmitter) {\r\n            return this._eventEmitter.listenerCount.apply(this._eventEmitter, arguments);\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    listeners: function () {\r\n        if (this._eventEmitter) {\r\n            return this._eventEmitter.listeners.apply(this._eventEmitter, arguments);\r\n        }\r\n        return [];\r\n    }\r\n};","const SceneClass = Phaser.Scene;\r\nvar IsSceneObject = function (object) {\r\n    return (object instanceof SceneClass);\r\n}\r\nexport default IsSceneObject;","import IsSceneObject from './IsSceneObject.js';\r\n\r\nvar GetSceneObject = function (object) {\r\n    if (IsSceneObject(object)) { // object = scene\r\n        return object;\r\n    } else if (object.scene && IsSceneObject(object.scene)) { // object = game object\r\n        return object.scene;\r\n    } else if (object.parent && object.parent.scene && IsSceneObject(object.parent.scene)) { // parent = bob object\r\n        return object.parent.scene;\r\n    }\r\n}\r\n\r\nexport default GetSceneObject;","import EventEmitterMethods from '../../utils/eventemitter/EventEmitterMethods.js';\r\nimport GetSceneObject from '../../utils/system/GetSceneObject.js';\r\n\r\nconst GetFastValue = Phaser.Utils.Objects.GetFastValue;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass TextTyping {\r\n    constructor(gameObject, config) {\r\n        this.gameObject = gameObject;\r\n        this.scene = GetSceneObject(gameObject);        \r\n        this.setEventEmitter(GetValue(config, 'eventEmitter', undefined));\r\n        \r\n        this.timer = null;\r\n        this.resetFromJSON(config);\r\n        this.boot();\r\n    }\r\n\r\n    /**\r\n     * Reset status by JSON object\r\n     * @param {object} o JSON object\r\n     * @returns {object} this object\r\n     */\r\n    resetFromJSON(o) {\r\n        this.setTypeMode(GetValue(o, 'typeMode', 0));\r\n        this.setTypeSpeed(GetValue(o, 'speed', 333));\r\n        this.setTextCallback = GetFastValue(o, 'setTextCallback', null);\r\n        this.setTextCallbackScope = GetFastValue(o, 'setTextCallbackScope', null);\r\n\r\n        this.typingIdx = GetFastValue(o, 'typingIdx', 0);\r\n        this.text = transferText(GetFastValue(o, 'text', ''));\r\n        this.textLen = GetFastValue(o, 'textLen', 0);\r\n        this.insertIdx = GetFastValue(o, 'insertIdx', null);\r\n\r\n        var elapsed = GetFastValue(o, 'elapsed', null);\r\n        if (elapsed !== null) {\r\n            this.start(undefined, undefined, this.typingIdx, elapsed);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Return status in JSON object\r\n     * @returns JSON object\r\n     */\r\n    toJSON() {\r\n        var elapsed;\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            elapsed = timer.elapsed;\r\n        } else {\r\n            elapsed = null;\r\n        }\r\n\r\n        return {\r\n            typeMode: this.typeMode,\r\n            speed: this.speed,\r\n            setTextCallback: this.setTextCallback,\r\n            setTextCallbackScope: this.setTextCallbackScope,\r\n\r\n            typingIdx: this.typingIdx,\r\n            text: this.text,\r\n            textLen: this.textLen,\r\n            insertIdx: this.insertIdx,\r\n            elapsed: elapsed\r\n        };\r\n    }\r\n\r\n    boot() {\r\n        if (this.gameObject.once) { // oops, bob object does not have event emitter\r\n            this.gameObject.on('destroy', this.destroy, this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    shutdown() {\r\n        this.destroyEventEmitter();\r\n        this.freeTimer();\r\n        this.gameObject = undefined;\r\n        this.scene = undefined;\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this.shutdown();\r\n        return this;\r\n    }\r\n\r\n    setTypeMode(m) {\r\n        if (typeof (m) === 'string') {\r\n            m = TYPEMODE[m];\r\n        }\r\n        this.typeMode = m;\r\n        return this;\r\n    }\r\n\r\n    setTypeSpeed(speed) {\r\n        this.speed = speed;\r\n        return this;\r\n    }\r\n\r\n    get isTyping() {\r\n        return (this.getTimer() !== null);\r\n    }\r\n\r\n    get isLastChar() {\r\n        return (this.typingIdx === this.textLen);\r\n    }\r\n\r\n    start(text, speed, startIdx, timerStartAt) {\r\n        if (text !== undefined) {\r\n            this.setTypingContent(text);\r\n        }\r\n        if (speed !== undefined) {\r\n            this.speed = speed;\r\n        }\r\n        if (startIdx === undefined) {\r\n            startIdx = 0;\r\n        }\r\n\r\n        this.typingIdx = startIdx + 1;\r\n        if (this.speed === 0) {\r\n            this.stop(true);\r\n        } else {\r\n            this.startTimer(timerStartAt);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    appendText(text) {\r\n        var newText = this.text.concat(transferText(text));\r\n        if (this.isTyping) {\r\n            this.setTypingContent(newText);\r\n        } else {\r\n            this.start(newText, undefined, this.textLen);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    stop(showAllText) {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            this.freeTimer();\r\n        }\r\n        if (showAllText) {\r\n            this.typingIdx = this.textLen;\r\n            this.setText(this.text);\r\n            this.emit('type');\r\n            this.emit('complete', this, this.gameObject);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            timer.paused = true;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    resume() {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            timer.paused = false;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    setTypingContent(text) {\r\n        this.text = transferText(text);\r\n        this.textLen = this.getTextLength(this.text);\r\n        return this;\r\n    }\r\n\r\n    onTyping() {\r\n        var newText = this.getTypingString(this.text, this.typingIdx, this.textLen, this.typeMode);\r\n        this.setText(newText);\r\n        this.emit('type');\r\n\r\n        if (this.isLastChar) {\r\n            this.freeTimer();\r\n            this.emit('complete', this, this.gameObject);\r\n        } else {\r\n            this.timer.delay = this.speed; // delay of next typing            \r\n            this.typingIdx++;\r\n        }\r\n    }\r\n\r\n    getTypingString(text, typeIdx, textLen, typeMode) {\r\n        var result;\r\n        if (typeMode === 0) { //left-to-right\r\n            var startIdx = 0;\r\n            var endIdx = typeIdx;\r\n            this.insertIdx = endIdx;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 1) { //right-to-left\r\n            var endIdx = textLen;\r\n            var startIdx = endIdx - typeIdx;\r\n            this.insertIdx = 0;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 2) { //middle-to-sides\r\n            var midIdx = textLen / 2;\r\n            var startIdx = Math.floor(midIdx - (typeIdx / 2));\r\n            var endIdx = startIdx + typeIdx;\r\n            this.insertIdx = (typeIdx % 2) ? typeIdx : 0;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 3) { //sides-to-middle\r\n            var lowerLen = Math.floor(typeIdx / 2);\r\n            var lowerResult;\r\n            if (lowerLen > 0) {\r\n                var endIdx = textLen;\r\n                var startIdx = endIdx - lowerLen;\r\n                lowerResult = this.getSubString(text, startIdx, endIdx);\r\n            } else {\r\n                lowerResult = \"\";\r\n            }\r\n\r\n            var upperLen = typeIdx - lowerLen;\r\n            var upperResult;\r\n            if (upperLen > 0) {\r\n                var startIdx = 0;\r\n                var endIdx = startIdx + upperLen;\r\n                this.insertIdx = endIdx;\r\n                upperResult = this.getSubString(text, startIdx, endIdx);\r\n            } else {\r\n                upperResult = \"\";\r\n                this.insertIdx = 0;\r\n            }\r\n            result = upperResult + lowerResult;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    startTimer(timerStartAt) {\r\n        if (this.timer) {\r\n            this.freeTimer();\r\n        }\r\n        var delay, startAt;\r\n        if (timerStartAt === undefined) {\r\n            delay = 0;\r\n            startAt = 0;\r\n        } else {\r\n            delay = this.speed;\r\n            startAt = timerStartAt;\r\n        }\r\n\r\n        this.timer = this.scene.time.addEvent({\r\n            delay: 0,\r\n            startAt: startAt,\r\n            loop: true,\r\n            callback: this.onTyping,\r\n            callbackScope: this\r\n        });\r\n        return this;\r\n    }\r\n\r\n    getTimer() {\r\n        return this.timer;\r\n    }\r\n\r\n    freeTimer() {\r\n        if (this.timer) {\r\n            this.timer.remove();\r\n            this.timer = null;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setText(text) {\r\n        if (this.setTextCallback) {\r\n            if (this.setTextCallbackScope) {\r\n                text = this.setTextCallback.call(this.setTextCallbackScope, text, this.isLastChar, this.insertIdx);\r\n            } else {\r\n                text = this.setTextCallback(text, this.isLastChar, this.insertIdx);\r\n            }\r\n        }\r\n        this.gameObject.setText(text);\r\n    }\r\n\r\n    getTextLength(text) {\r\n        var gameObject = this.gameObject;\r\n        var len;\r\n        if (gameObject.getPlainText) {\r\n            len = gameObject.getPlainText(text).length;\r\n        } else {\r\n            len = text.length;\r\n        }\r\n\r\n        return len;\r\n    }\r\n\r\n    getSubString(text, startIdx, endIdx) {\r\n        var gameObject = this.gameObject;\r\n        var result;\r\n        if (gameObject.getSubString) {\r\n            result = gameObject.getSubString(text, startIdx, endIdx);\r\n        } else {\r\n            result = text.slice(startIdx, endIdx);\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nObject.assign(\r\n    TextTyping.prototype,\r\n    EventEmitterMethods\r\n);\r\n\r\nvar transferText = function (text) {\r\n    if (Array.isArray(text)) {\r\n        text = text.join('\\n');\r\n    } else if (typeof (text) === 'number') {\r\n        text = text.toString();\r\n    }\r\n    return text;\r\n}\r\n\r\n/** @private */\r\nconst TYPEMODE = {\r\n    'left-to-right': 0,\r\n    'right-to-left': 1,\r\n    'middle-to-sides': 2,\r\n    'sides-to-middle': 3\r\n};\r\n\r\n\r\nexport default TextTyping;","import TextTyping from './behaviors/texttyping/TextTyping.js';\r\nexport default TextTyping;","import EventEmitter from './EventEmitter';\r\nimport FontStyleManifest from './FontStyleManifest';\r\nimport TagText from 'phaser3-rex-plugins/plugins/tagtext.js';\r\nimport TextTyping from 'phaser3-rex-plugins/plugins/texttyping.js';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(x, y, isIntro)\r\n    {\r\n        super();\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.hideEndDialogueMarkerOnMessageComplete = false;\r\n\r\n        this.endDialogueMarkerGraphics = null;\r\n\r\n        this.character = null;\r\n        this.characterWidth = null;\r\n        this.characterExpression = null;\r\n\r\n        this.speechBubbleGraphics = null;\r\n        this.speechBubbleText = null;\r\n\r\n        this.expressions = {};\r\n        this.expressions.default = { faceY: -90, bodyAngle: 0 };\r\n        this.expressions.surprise = { faceY: -105, bodyAngle: -4 };\r\n        this.expressions.sadness = { faceY: -80, bodyAngle: 5 };\r\n        this.expressions.despair = { faceY: -70, bodyAngle: 7 };\r\n        this.expressions.glee = { faceY: -100, bodyAngle: -4 };\r\n        this.expressions.nervous = { faceY: -85, bodyAngle: 0 };\r\n        this.expressions.confused = { faceY: -100, bodyAngle: -2 };\r\n        this.expressions.neutral = { faceY: -90, bodyAngle: 0 };\r\n        this.expressions.amused = { faceY: -95, bodyAngle: 0 };\r\n        this.expressions.thoughtful = { faceY: -70, bodyAngle: 0 };\r\n\r\n        this.isTalking = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        const self = this;\r\n\r\n        const speechBubbleWidth = 760;\r\n        const speechBubbleHeight = 130;\r\n\r\n        const endDialogueMarkerRadius = 10;\r\n        \r\n        this.characterWidth = 250;\r\n\r\n        const speechBubbleIntroOffset = 40;\r\n\r\n        // Speech Bubble\r\n        this.speechBubbleGraphics = context.add.graphics({ fillStyle: { color: 0xffffff } })\r\n        \r\n        if(this.isIntro)\r\n        {\r\n            this.speechBubbleGraphics.setAlpha(0);\r\n        }\r\n        \r\n        const speechBubbleGraphicsY = this.isIntro ? this.y - speechBubbleIntroOffset : this.y;\r\n        const speechBubbleGraphicsTriangleY1 = this.isIntro ? this.y + speechBubbleHeight + 20 - speechBubbleIntroOffset : this.y + speechBubbleHeight + 20;\r\n        const speechBubbleGraphicsTriangleY2 = this.isIntro ? this.y + speechBubbleHeight - speechBubbleIntroOffset : this.y + speechBubbleHeight;\r\n\r\n        this.speechBubbleGraphics.setDepth(1);\r\n        this.speechBubbleGraphics.fillRoundedRect(this.x, speechBubbleGraphicsY, speechBubbleWidth, speechBubbleHeight, 10);\r\n        this.speechBubbleGraphics.fillTriangle(\r\n            this.x + 120, speechBubbleGraphicsTriangleY1,\r\n            this.x + 105, speechBubbleGraphicsTriangleY2,\r\n            this.x + 135, speechBubbleGraphicsTriangleY2\r\n        );\r\n\r\n        // End Dialogue Marker\r\n        this.endDialogueMarkerGraphics = context.add.graphics({ fillStyle: { color: 0xcccccc } });\r\n        this.endDialogueMarkerGraphics.setDepth(1);\r\n        this.hideEndDialogueMarker();\r\n        const endDialogueMarker = new Phaser.Geom.Circle(\r\n            this.x + speechBubbleWidth - endDialogueMarkerRadius - 15,\r\n            this.y + speechBubbleHeight - endDialogueMarkerRadius - 15,\r\n            endDialogueMarkerRadius);\r\n        this.endDialogueMarkerGraphics.fillCircleShape(endDialogueMarker);\r\n\r\n        context.tweens.add({\r\n            targets: this.endDialogueMarkerGraphics,\r\n            alpha: 0,\r\n            duration: 500,\r\n            repeat: -1,\r\n            yoyo: true\r\n        });\r\n\r\n        // Speech Bubble Text\r\n        const speechBubbleTextStyle = FontStyleManifest.Default;\r\n        speechBubbleTextStyle.wrap = {\r\n            mode: 'word',\r\n            width: speechBubbleWidth - 30\r\n        };\r\n        speechBubbleTextStyle.tags = {\r\n            exclamation: {\r\n                fontStyle: 'bold'\r\n            }\r\n        };\r\n        \r\n        this.speechBubbleText = new TagText(context, this.x + 15, this.y + 15, '', speechBubbleTextStyle);\r\n        this.speechBubbleText.setDepth(1);\r\n        context.add.existing(this.speechBubbleText);\r\n\r\n        // Speech Bubble Text Typing\r\n        this.speechBubbleTextTyping = new TextTyping(this.speechBubbleText, { speed: 30 }); \r\n        this.speechBubbleTextTyping.on('complete', () => { self.messageCompleted.call(self) });\r\n\r\n        const characterX = (this.isIntro) ? (this.x - this.characterWidth) : (this.x + this.characterWidth/2);\r\n        this.character = context.add.container(characterX, this.y + speechBubbleHeight + 230);\r\n\r\n        // Character\r\n        const characterImage = context.add.image(0, 0, 'guide_character');\r\n        this.character.add(characterImage);\r\n\r\n        // Expression\r\n        const startingExpression = this.isIntro ? 'expression_surprise' : 'expression_default';\r\n        const characterExpressionY = this.isIntro ? this.expressions.surprise.faceY : this.expressions.default.faceY;\r\n        this.characterExpression = context.add.sprite(-10, characterExpressionY, startingExpression);\r\n        this.character.add(this.characterExpression);\r\n\r\n        const blinkOffset = 15;\r\n        context.tweens.addCounter({\r\n            duration: 100,\r\n            yoyo: true,\r\n            loop: -1,\r\n            loopDelay: 2000,\r\n            from: 0,\r\n            to: 1,\r\n            onUpdate: (tween) => {\r\n                const currOffset = blinkOffset * tween.getValue();\r\n                this.characterExpression.setCrop(0, currOffset, self.characterExpression.width, self.characterExpression.height);\r\n            }\r\n        });\r\n\r\n        // Intro Timeline\r\n        const introTimeline = context.tweens.createTimeline();\r\n\r\n        if(this.isIntro)\r\n        {\r\n            // Slide in the character\r\n            introTimeline.add({\r\n                delay: 200,\r\n                targets: this.character,\r\n                x: (this.x + this.characterWidth/2),\r\n                duration: 400,\r\n                angle: 15,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Sway backwards\r\n            introTimeline.add({\r\n                targets: this.character,\r\n                duration: 400,\r\n                angle: -7,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Sway into position\r\n            introTimeline.add({\r\n                targets: this.character,\r\n                duration: 400,\r\n                angle: 0,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Speech Bubble Intro Animation\r\n            introTimeline.add({\r\n                offset: '-=300',\r\n                targets: this.speechBubbleGraphics,\r\n                props: {\r\n                    y: { value: `+=${speechBubbleIntroOffset}`, duration: 500, ease: 'Bounce.easeOut' },\r\n                    alpha: { value: 1, duration: 300, ease: 'Linear' }\r\n                },\r\n                onComplete: () => {\r\n                    this.emit('ready');\r\n                }\r\n            }); \r\n        }\r\n        else\r\n        {\r\n            introTimeline.add({\r\n                targets: this.speechBubbleGraphics,\r\n                duration: 100,\r\n                onComplete: () => {\r\n                    this.emit('ready');\r\n                }\r\n            }); \r\n        }\r\n\r\n        introTimeline.play();\r\n    }\r\n\r\n    displayMessage(message, hideEndDialogueMarkerOnMessageComplete)\r\n    {\r\n        this.isTalking = true;\r\n        this.hideEndDialogueMarker();\r\n        const convMessage = this.convertDialogToTagText(message);\r\n        this.speechBubbleTextTyping.start(convMessage);\r\n        this.hideEndDialogueMarkerOnMessageComplete = hideEndDialogueMarkerOnMessageComplete;\r\n    }\r\n\r\n    messageCompleted()\r\n    {\r\n        this.isTalking = false;\r\n        if(!this.hideEndDialogueMarkerOnMessageComplete)\r\n        {\r\n            this.showEndDialogueMarker();\r\n        }\r\n    }\r\n\r\n    showEndDialogueMarker()\r\n    {\r\n        this.endDialogueMarkerGraphics.setVisible(true);\r\n    }\r\n\r\n    hideEndDialogueMarker()\r\n    {\r\n        this.endDialogueMarkerGraphics.setVisible(false);\r\n    }\r\n\r\n    updateExpression(key, context)\r\n    {\r\n        this.characterExpression.setTexture('expression_' + key);\r\n        this.characterExpression.isCropped = false;\r\n\r\n        const expressionInfo = this.expressions[key];\r\n\r\n        context.tweens.add({\r\n            targets: this.characterExpression,\r\n            y: expressionInfo.faceY,\r\n            duration: 200,\r\n            ease: 'Power1'\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.character,\r\n            angle: expressionInfo.bodyAngle,\r\n            duration: 600,\r\n            ease: 'Power2'\r\n        });\r\n    }\r\n\r\n    hide(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.character,\r\n            x: (this.x - this.characterWidth),\r\n            duration: 800,\r\n            angle: -15,\r\n            ease: 'Power1'\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: [ this.speechBubbleGraphics, this.speechBubbleText ],\r\n            alpha: 0,\r\n            duration: 200\r\n        }); \r\n    }\r\n\r\n    convertDialogToTagText(input)\r\n    {\r\n        const styles = [\r\n            { token: '*', className: 'exclamation' },\r\n            { token: '_', className: 'underline'}\r\n        ];    \r\n\r\n        let output = '';\r\n        let currClass = '';\r\n    \r\n        for(let i=0; i<input.length; i++)\r\n        {\r\n            const currChar = input[i];\r\n            const isStyleToken = styles.some(style => style.token === currChar);\r\n    \r\n            // If the first character isn't a style token, then\r\n            // we need to open a \"normal\" class tag\r\n            if(i === 0 && !isStyleToken)\r\n            {\r\n                output += '<class=\"normal\">';\r\n                currClass = 'normal';\r\n            }\r\n    \r\n            // If the last character is a style token, we ignore it\r\n            // since we'll always end with a closing class tag anyway\r\n            if(i === input.length - 1 && isStyleToken)\r\n            {\r\n                continue;\r\n            }\r\n    \r\n            if(isStyleToken)\r\n            {\r\n                const targetStyle = styles.find(style => style.token === currChar);\r\n    \r\n                // If we've encountered a token of the class we already have open,\r\n                // that means we need to close the class\r\n                if(currClass === targetStyle.className)\r\n                {\r\n                    output += '</class>';\r\n                    output += '<class=\"normal\">';\r\n                    currClass = 'normal';\r\n                }\r\n    \r\n                // Otherwise, we need to close the existing the class and\r\n                // open the new class\r\n                else\r\n                {\r\n                    if(i !== 0)\r\n                    {\r\n                        output += '</class>';\r\n                    }\r\n    \r\n                    output += `<class=\"${targetStyle.className}\">`;\r\n                    currClass = targetStyle.className;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                output += input[i];\r\n            }\r\n        }\r\n    \r\n        output += '</class>';\r\n        return output;\r\n    }\r\n}","export default class {\r\n\r\n    constructor(x, y)\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        this.muteIcon = null;\r\n\r\n        this.isMuted = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Base Icon\r\n        const baseIcon = context.add.image(this.x, this.y, 'icon_audio');\r\n        baseIcon.setAlpha(0.7);\r\n        baseIcon.setInteractive({ cursor: 'pointer' });\r\n\r\n        // Mute Icon\r\n        this.muteIcon = context.add.image(this.x, this.y, 'icon_audio_mute');\r\n        this.muteIcon.setAlpha(0);\r\n\r\n        const self = this;\r\n        baseIcon.on('pointerdown', () => {\r\n            self.toggleMute(context);\r\n        });\r\n\r\n        if(context.sound.mute)\r\n        {\r\n            this.isMuted = true;\r\n            this.muteIcon.setAlpha(0.7);\r\n        }\r\n    }\r\n\r\n    toggleMute(context)\r\n    {\r\n        if(this.isMuted)\r\n        {\r\n            context.sound.mute = false;\r\n            this.isMuted = false;\r\n            context.tweens.add({\r\n                targets: this.muteIcon,\r\n                alpha: 0,\r\n                duration: 100\r\n            });\r\n        }\r\n        else\r\n        {\r\n            context.sound.mute = true;\r\n            this.isMuted = true;\r\n            context.tweens.add({\r\n                targets: this.muteIcon,\r\n                alpha: 0.7,\r\n                duration: 100\r\n            });\r\n        }\r\n    }\r\n}","// Source: https://stackoverflow.com/questions/5915096/get-random-item-from-javascript-array\r\nconst getRandomItem = (items) => {\r\n    return items[Math.floor(Math.random() * items.length)];\r\n}\r\n\r\nexport {\r\n    getRandomItem\r\n}","export default {\r\n    Active: 0,\r\n    Destroyed: 1\r\n};","export default [\r\n    { name: 'Red', imageKey: 'tile_01' },\r\n    { name: 'Blue', imageKey: 'tile_02' },\r\n    { name: 'Green', imageKey: 'tile_03' },\r\n    { name: 'Yellow', imageKey: 'tile_04' }\r\n];","import EventEmitter from './EventEmitter';\r\nimport { getRandomItem } from './Utility';\r\nimport Tile from './Tile';\r\nimport TileGenerationBehavior from './TileGenerationBehavior';\r\nimport TileState from './TileState';\r\nimport TileType from './TileType';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(tileGridWidth, tileGridHeight, tileSize, offsetX, offsetY, onTileSelect, onTileMatch, tileGenerationBehavior, queue)\r\n    {\r\n        super();\r\n\r\n        this.isInitialized = false;\r\n        this.isBlocked = true;\r\n\r\n        this.offsetX = offsetX;\r\n        this.offsetY = offsetY;\r\n        this.tileSize = tileSize;\r\n        this.tileGridHeight = tileGridHeight;\r\n        this.tileGridWidth = tileGridWidth;\r\n        this.tileGrid = [];\r\n        this.tileImageContainer = null;\r\n        this.playAreaOffset = (this.tileGridHeight * this.tileSize);\r\n\r\n        this.gridBackground = null;\r\n\r\n        this.onTileSelect = onTileSelect;\r\n        this.onTileMatch = onTileMatch;\r\n\r\n        this.tileGenerationBehavior = tileGenerationBehavior;\r\n\r\n        this.matchSound = null;\r\n        this.swapSound = null;\r\n\r\n        this.queue = queue;\r\n\r\n        this.matches = 0;\r\n\r\n        this.preSetTileGrid = [\r\n            [ 0, 0, 2, 3, 0, 0 ],\r\n            [ 3, 2, 2, 3, 3, 2 ],\r\n            [ 3, 2, 1, 0, 3, 2 ],\r\n            [ 1, 1, 0, 1, 0, 0 ],\r\n            [ 3, 2, 1, 0, 3, 2 ],\r\n            [ 3, 2, 2, 3, 3, 2 ]\r\n        ]\r\n\r\n        // We're going to generate a grid that's twice the height of\r\n        // the desired tile grid height since we'll use the hidden, upper\r\n        // region to stage the bricks that will fall into the play area\r\n        for(let y = 0; y < tileGridHeight * 2; y++)\r\n        {\r\n            this.tileGrid[y] = [];\r\n            for(let x = 0; x < tileGridWidth; x++)\r\n            {\r\n                this.tileGrid[y][x] = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        this.tileImageContainer = context.add.container();\r\n        this.tileImageContainer.setDepth(1);\r\n\r\n        // Create a mask to only show the play area\r\n        const maskShape = context.make.graphics();\r\n        maskShape.fillStyle(0xffffff, 1);\r\n        maskShape.fillRect(this.offsetX - (this.tileSize/2), this.offsetY + (this.tileGridHeight * this.tileSize) - (this.tileSize/2), this.tileGridWidth * this.tileSize, this.tileGridHeight * this.tileSize);\r\n    \r\n        this.tileImageContainer.mask = new Phaser.Display.Masks.GeometryMask(context, maskShape);\r\n\r\n        // Tile grid background\r\n        this.gridBackground = context.add.graphics({ fillStyle: { color: 0x012400 } }).setAlpha(0.4);\r\n        this.gridBackground.fillRoundedRect(this.offsetX - (this.tileSize/2) - 5, this.offsetY + (this.tileGridHeight * this.tileSize) - (this.tileSize/2) - 5, this.tileGridWidth * this.tileSize + 10, this.tileGridHeight * this.tileSize + 10, 6);\r\n        this.gridBackground.setAlpha(0);\r\n        this.gridBackground.setDepth(0);\r\n\r\n        this.matchSounds = [\r\n            context.sound.add('match'),\r\n            context.sound.add('match_combo_01'),\r\n            context.sound.add('match_combo_02'),\r\n            context.sound.add('match_combo_03'),\r\n            context.sound.add('match_combo_04'),\r\n            context.sound.add('match_combo_05'),\r\n        ];\r\n        this.matchSound = this.matchSounds[0];\r\n\r\n        this.swapSound = context.sound.add('swap');\r\n    }\r\n\r\n    update(context)\r\n    {\r\n        const self = this;\r\n\r\n        if(!self.isInitialized)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Detect and destroy any matches\r\n        const matchedTiles = self.getMatches();\r\n\r\n        if(matchedTiles.length > 0)\r\n        {\r\n            self.matches++;\r\n            self.onTileMatch(context, matchedTiles);\r\n            matchedTiles.forEach(t => { t.hasMatched = true });\r\n            self.emit('match');\r\n        }\r\n\r\n        let destroys = [];\r\n        matchedTiles.forEach(t => { destroys.push(t.destroy(context, this.tileImageContainer)); });\r\n\r\n        if(destroys.length > 0)\r\n        {\r\n            self.matchSound.play();\r\n            self.queue.push(() => { return Promise.all(destroys); });\r\n        }\r\n\r\n        // Remove any destroyed tiles\r\n        self.forEachTile((tile, x, y) => {\r\n\r\n            if(tile === null)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(tile.state === TileState.Destroyed)\r\n            {\r\n                self.tileGrid[y][x] = null;\r\n            }\r\n\r\n        });\r\n\r\n        // If we destroyed tiles, return early to allow the destroyed tiles and their associated\r\n        // animations clear before figuring out the drop animations\r\n        if(destroys.length > 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Shift all of the tiles downward to fill empty spots\r\n        let drops = [];\r\n        for(let x = 0; x < this.tileGridWidth; x++)\r\n        {\r\n            let y = (this.tileGridHeight * 2) - 1;\r\n            while(y >= 0)\r\n            {\r\n                // If the tile is null...\r\n                if(self.tileGrid[y][x] === null)\r\n                {\r\n                    // ...find the closest tile that's not null...\r\n                    let closestY = y - 1;\r\n                    while(closestY >= 0)\r\n                    {\r\n                        let closestTile = self.tileGrid[closestY][x];\r\n                        if(closestTile !== null)\r\n                        {\r\n                            // ...and shift it downward\r\n                            self.tileGrid[y][x] = closestTile;\r\n                            self.tileGrid[closestY][x] = null;\r\n                            drops.push(this.getTileDrop(context, closestTile, x, y));\r\n                            y--;\r\n                        }\r\n                        closestY--;\r\n                    }\r\n                }\r\n\r\n                y--;\r\n            }\r\n        }\r\n\r\n        // Fill in all of the empty tiles\r\n        self.forEachPlayableTile((tile, x, y) => {\r\n            if(tile === null)\r\n            {\r\n                const adjustedY = y - self.tileGridHeight;\r\n\r\n                const tile = self.createTile(self.getTileType(x, y, self.tileGenerationBehavior), x, adjustedY, false);\r\n                self.tileGrid[adjustedY][x] = tile;\r\n                tile.create(context);\r\n                self.tileImageContainer.add(tile.image);\r\n            }\r\n        });\r\n\r\n        if(drops.length > 0)\r\n        {\r\n            self.queue.push(() => { return Promise.all(drops); });\r\n        }\r\n    }\r\n\r\n    swapTiles(context, firstTile, secondTile)\r\n    {\r\n        let self = this;\r\n        self.swapSound.play();\r\n\r\n        self.queue.push(() => {\r\n\r\n            let firstTileX = firstTile.x;\r\n            let firstTileY = firstTile.y;\r\n            let firstTileGridX = firstTile.tileGridX;\r\n            let firstTileGridY = firstTile.tileGridY;\r\n    \r\n            let secondTileX = secondTile.x;\r\n            let secondTileY = secondTile.y;\r\n            let secondTileGridX = secondTile.tileGridX;\r\n            let secondTileGridY = secondTile.tileGridY;\r\n    \r\n            let firstSwap = secondTile.updatePosition(context, firstTileX, firstTileY, firstTileGridX, firstTileGridY);\r\n            self.tileGrid[firstTileGridY][firstTileGridX] = secondTile;\r\n    \r\n            let secondSwap = firstTile.updatePosition(context, secondTileX, secondTileY, secondTileGridX, secondTileGridY);\r\n            self.tileGrid[secondTileGridY][secondTileGridX] = firstTile;\r\n\r\n            return Promise.all([firstSwap, secondSwap]);\r\n\r\n        });\r\n    }\r\n\r\n    hasMatches(targetGridX, targetGridY)\r\n    {\r\n        return this.getMatches(targetGridX, targetGridY).length > 0;\r\n    }\r\n\r\n    getMatches(targetGridX, targetGridY)\r\n    {\r\n        const self = this;\r\n        const matchedTiles = [];\r\n\r\n        self.forEachTile((tile, x, y) => {\r\n\r\n            if(\r\n                (typeof targetGridX !== 'undefined' && x !== targetGridX) &&\r\n                (typeof targetGridY !== 'undefined' && y !== targetGridY)\r\n              )\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(!this.isPlayable(tile))\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(tile.hasMatched)\r\n            {\r\n                return;\r\n            }\r\n\r\n            const targetTileType = tile.tileType;\r\n            const matchedXTiles = [];\r\n            const matchedYTiles = [];\r\n\r\n            // Check for matches to the right\r\n            let currX = (x + 1);\r\n            while(currX < self.tileGridWidth)\r\n            {\r\n                const currTile = self.tileGrid[y][currX];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedXTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currX++;\r\n            }\r\n\r\n            // Check for matches to the left\r\n            currX = (x - 1);\r\n            while(currX > 0)\r\n            {\r\n                const currTile = self.tileGrid[y][currX];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedXTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currX--;\r\n            }\r\n\r\n            // Check matches downwards\r\n            let currY = (y + 1);\r\n            while(currY < self.tileGridHeight)\r\n            {\r\n                const currTile = self.tileGrid[currY][x];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedYTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currY++;\r\n            }\r\n\r\n            // Check matches upwards\r\n            currY = (y - 1);\r\n            while(currY > 0)\r\n            {\r\n                const currTile = self.tileGrid[currY][x];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedYTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currY--;\r\n            }\r\n            \r\n            if(matchedYTiles.length > 1)\r\n            {\r\n                matchedTiles.push(...matchedYTiles);\r\n            }\r\n            \r\n            if(matchedXTiles.length > 1)\r\n            {\r\n                matchedTiles.push(...matchedXTiles);\r\n            }\r\n\r\n            if(matchedYTiles.length > 1 || matchedXTiles.length > 1)\r\n            {\r\n                matchedTiles.push(tile);\r\n            }\r\n        });\r\n\r\n        const uniqueMatchedTiles = [];\r\n        matchedTiles.forEach(tile => {\r\n            if(!uniqueMatchedTiles.some(t => t.x === tile.x && t.y === tile.y))\r\n            {\r\n                uniqueMatchedTiles.push(tile);\r\n            }\r\n        });\r\n        \r\n        return uniqueMatchedTiles;\r\n    }\r\n\r\n    forEachTile(callback)\r\n    {\r\n        for(let y = 0; y < this.tileGridHeight * 2; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                callback(this.tileGrid[y][x], x, y);\r\n            }\r\n        }\r\n    }\r\n\r\n    forEachPlayableTile(callback)\r\n    {\r\n        for(let y = this.tileGridHeight; y < this.tileGridHeight * 2; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                callback(this.tileGrid[y][x], x, y);\r\n            }\r\n        }\r\n    }\r\n\r\n    createTile(tileType, x, y, isBlocked, initialDrag)\r\n    {\r\n        return new Tile(tileType, this.getTileX(x), this.getTileY(y), x, y, initialDrag, isBlocked, this.onTileSelect);\r\n    }\r\n\r\n    getTileDrop(context, tile, x, y)\r\n    {\r\n        return tile.updatePosition(context, this.getTileX(x), this.getTileY(y), x, y, true);\r\n    }\r\n\r\n    getTileX(x)\r\n    {\r\n        return this.offsetX + (this.tileSize * x);\r\n    }\r\n\r\n    getTileY(y)\r\n    {\r\n        return this.offsetY + (this.tileSize * y);\r\n    }\r\n\r\n    canSelect(tile)\r\n    {\r\n        return this.isPlayable(tile);\r\n    }\r\n\r\n    isPlayable(tile)\r\n    {\r\n        return (tile != null) && !tile.isBlocked && (tile.tileGridY > (this.tileGridHeight - 1));\r\n    }\r\n\r\n    getTileType(x, y, behavior)\r\n    {\r\n        const aboveTile = (y < 1) ? null : this.tileGrid[y - 1][x];\r\n        const belowTile = (y >= this.tileGridHeight - 1 || !this.tileGrid[y + 1]) ? null : this.tileGrid[y + 1][x];\r\n\r\n        const leftTile = (x < 1) ? null : this.tileGrid[y][x - 1];\r\n        const rightTile = (x >= this.tileGridWidth - 1 || !this.tileGrid[y]) ? null : this.tileGrid[y][x + 1];\r\n\r\n        if(behavior === TileGenerationBehavior.EasyWin && (aboveTile != null || belowTile != null || leftTile != null || rightTile != null))\r\n        {\r\n            return getRandomItem([aboveTile, belowTile, leftTile, rightTile].filter(t => t != null).map(t => t.tileType));\r\n        }\r\n        \r\n        if(behavior === TileGenerationBehavior.Hard)\r\n        {\r\n            return getRandomItem(TileType.filter(t =>\r\n                (belowTile === null || t.name !== belowTile.tileType.name) &&\r\n                (rightTile === null || t.name !== rightTile.tileType.name) &&\r\n                (leftTile === null || t.name !== leftTile.tileType.name)\r\n            ));\r\n        }\r\n\r\n        return getRandomItem(TileType.filter(t =>\r\n            (aboveTile === null || t.name !== aboveTile.tileType.name) &&\r\n            (leftTile === null || t.name !== leftTile.tileType.name)\r\n        ));\r\n    }\r\n\r\n    block(context, exceptions)\r\n    {\r\n        this.isBlocked = true;\r\n        this.forEachTile((tile, x, y) => tile\r\n                && (typeof exceptions === 'undefined' || !exceptions.some(exception => exception[1] === x && exception[0] === y))\r\n                && tile.block(context)\r\n        );\r\n\r\n    }\r\n\r\n    unblock(context)\r\n    {\r\n        this.isBlocked = false;\r\n        this.forEachTile(tile => tile && tile.unblock(context));\r\n    }\r\n\r\n    fill(context)\r\n    {\r\n        for(let y = 0; y < this.tileGridHeight; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                const tileType = this.tileGenerationBehavior === TileGenerationBehavior.PreSet\r\n                    ? this.getPreSetTileType(x, y)\r\n                    : this.getTileType(x, y, TileGenerationBehavior.None);\r\n\r\n                const tile = this.createTile(tileType, x, y, true, ((this.tileGridWidth - x) / this.tileGridWidth));\r\n                tile.create(context);\r\n                \r\n                this.tileGrid[y][x] = tile;\r\n            }\r\n        }\r\n\r\n        this.isBlocked = true;\r\n        this.isInitialized = true;\r\n\r\n        context.tweens.add({\r\n            targets: this.gridBackground,\r\n            alpha: 0.5,\r\n            duration: 200\r\n        });\r\n    }\r\n\r\n    updateTileGenerationBehavior(behavior)\r\n    {\r\n        this.tileGenerationBehavior = behavior;\r\n    }\r\n\r\n    getPreSetTileType(x, y)\r\n    {\r\n        return TileType[this.preSetTileGrid[y][x]];\r\n    }\r\n\r\n    updateMatchSound(intensity)\r\n    {\r\n        const index = (intensity >= this.matchSounds.length) ? (this.matchSounds.length - 1) : intensity;\r\n        this.matchSound = this.matchSounds[index];\r\n    }\r\n}","import TileState from './TileState';\r\n\r\nexport default class {\r\n\r\n    constructor(tileType, x, y, tileGridX, tileGridY, initialDrag, isBlocked, onTileSelect)\r\n    {\r\n        this.tileType = tileType;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.tileGridX = tileGridX;\r\n        this.tileGridY = tileGridY;\r\n        this.onTileSelect = onTileSelect;\r\n        this.image = null;\r\n        this.state = TileState.Active;\r\n\r\n        this.isActivated = false;\r\n        this.isBlocked = isBlocked;\r\n        this.hasMatched = false;\r\n\r\n        this.initialDrag = (typeof initialDrag === \"undefined\") ? 1 : initialDrag;\r\n        this.hasDragged = (typeof initialDrag === \"undefined\");\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        this.image = context.add.image(this.x, this.y, this.tileType.imageKey);\r\n        this.image.setInteractive();\r\n        this.image.on('pointerdown', () => { this.onTileSelect(context, this); });\r\n\r\n        if(this.isBlocked)\r\n        {\r\n            this.image.setAlpha(0);\r\n        }\r\n    }\r\n\r\n    activate()\r\n    {\r\n        this.isActivated = true;\r\n        this.image.setTintFill(0xffffff);\r\n    }\r\n\r\n    deactivate()\r\n    {\r\n        this.isActivated = false;\r\n        this.image.clearTint();\r\n    }\r\n\r\n    updatePosition(context, x, y, tileGridX, tileGridY, isDrop)\r\n    {\r\n        const self = this;\r\n        const yDiff = Math.abs(self.y - y);\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            self.x = x;\r\n            self.y = y;\r\n            self.tileGridX = tileGridX;\r\n            self.tileGridY = tileGridY;\r\n\r\n            const tweenInfo = {\r\n                targets: self.image,\r\n                x: x,\r\n                y: y,\r\n                ease: isDrop ? 'Sine.easeIn' : 'Power1',\r\n                duration: (isDrop ? Math.max(150, yDiff) : 500),\r\n                onComplete: () => { resolve() }\r\n            };\r\n\r\n            // Handle special behavior for initial \"dragged\" drop\r\n            if(!this.hasDragged)\r\n            {\r\n                tweenInfo.delay = (200 - (200 * self.initialDrag));\r\n                tweenInfo.alpha = 0.5;\r\n                tweenInfo.ease = 'Sine';\r\n                this.hasDragged = true;\r\n            }\r\n\r\n            context.tweens.add(tweenInfo);\r\n\r\n        });\r\n    }\r\n\r\n    destroy(context, container)\r\n    {\r\n        let self = this;\r\n        \r\n        if(self.state === TileState.Destroyed)\r\n        {\r\n            return;\r\n        }\r\n\r\n        self.state = TileState.Destroyed;\r\n\r\n        // Create cover for fading the shape to white\r\n        const fadeOutCover = context.add.image(self.x, self.y, self.tileType.imageKey);\r\n        fadeOutCover.setTintFill(0xffffff);\r\n        fadeOutCover.alpha = 0;\r\n\r\n        // Create particles for \"explosion\" effect\r\n        const particleGraphics = [];\r\n        for(let i=0; i<8; i++)\r\n        {\r\n            const explodeParticleGraphics = context.add.graphics({ fillStyle: { color: 0xffffff }, alpha: 0 });\r\n            const explodeParticle = new Phaser.Geom.Circle(this.x, this.y, Phaser.Math.Between(0, 10));\r\n            explodeParticleGraphics.fillCircleShape(explodeParticle);\r\n            particleGraphics.push(explodeParticleGraphics);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            // Remove the tile image\r\n            container.remove(self.image);\r\n            self.image.destroy();\r\n\r\n            fadeOutCover.setAlpha(1);\r\n           context.tweens.add({\r\n               targets: fadeOutCover,\r\n               alpha: 0,\r\n               duration: 250,\r\n               ease: 'Cubic.easeOut',\r\n               onComplete: () => {\r\n\r\n                    // Remove the fade out cover\r\n                    container.remove(fadeOutCover);\r\n                    fadeOutCover.destroy();\r\n\r\n                    // Remove the particles\r\n                    particleGraphics.forEach((graphics) => {\r\n                        container.remove(graphics);\r\n                        graphics.destroy();\r\n                    });\r\n\r\n                    resolve();\r\n               }\r\n           });\r\n\r\n           particleGraphics.forEach((graphics, index) => {\r\n\r\n                graphics.setAlpha(1);\r\n                let xSign = null;\r\n                let ySign = null;\r\n               \r\n                switch(index)\r\n                {\r\n                    case 0:\r\n                        ySign = '-';\r\n\r\n                    case 1:\r\n                        xSign = '+';\r\n                        ySign = '-';\r\n                        break;\r\n\r\n                    case 2:\r\n                        xSign = '+';\r\n                        break;\r\n\r\n                    case 3:\r\n                        xSign = '+';\r\n                        ySign = '+';\r\n                        break;\r\n\r\n                    case 4:\r\n                        ySign = '+';\r\n                        break;\r\n\r\n                    case 5:\r\n                        ySign = '+';\r\n                        xSign = '-'\r\n\r\n                    case 6:\r\n                        xSign = '-';\r\n                        break;\r\n\r\n                    case 7:\r\n                        ySign = '-';\r\n                        xSign = '-';\r\n                        break;\r\n                }\r\n\r\n                const tween = {\r\n                    targets: graphics,\r\n                    alpha: 0,\r\n                    duration: 250,\r\n                    ease: 'Cubic.easeOut'\r\n                };\r\n\r\n                if(xSign != null)\r\n                {\r\n                    tween.x = (xSign + '=45');\r\n                }\r\n\r\n                if(ySign != null)\r\n                {\r\n                    tween.y = (ySign + '=45');\r\n                }\r\n\r\n                context.tweens.add(tween);\r\n           });\r\n\r\n        });\r\n    }\r\n\r\n    disappear(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            duration: 500,\r\n            y: '-=50',\r\n            angle: Phaser.Math.Between(-15, 15),\r\n            alpha: 0,\r\n            delay: Phaser.Math.Between(0, 500),\r\n            ease: 'Power1'\r\n        });\r\n    }\r\n\r\n    block(context)\r\n    {\r\n        this.isBlocked = true;\r\n\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            alpha: 0.5,\r\n            duration: 100\r\n        });\r\n    }\r\n\r\n    unblock(context)\r\n    {\r\n        this.isBlocked = false;\r\n\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            alpha: 1,\r\n            duration: 100\r\n        });\r\n    }\r\n}","import EventEmitter from './EventEmitter';\r\nimport FontStyleManifest from './FontStyleManifest';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(x, y, ticks, isIntro)\r\n    {\r\n        super();\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.text = null;\r\n        this.icon = null;\r\n\r\n        this.warningTweens = null;\r\n        this.warningIcon = null;\r\n        this.warningSound = null;\r\n        this.timerRunOutSound = null;\r\n\r\n        this.ticks = ticks;\r\n        this.isPaused = true;\r\n        this.isDisplayingWarning = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Icon\r\n        this.icon = context.add.image(this.x + 15, this.y + 15, 'icon_timer');\r\n        this.icon.setAlpha(this.isIntro ? 0 : 0.7);\r\n\r\n        // Warning Icon\r\n        this.warningIcon = context.add.image(this.x + 15, this.y + 15, 'icon_timer_warning').setAlpha(0);\r\n        \r\n        // Warning Sound\r\n        this.warningSound = context.sound.add('warning_tick');\r\n\r\n        // Timer Run Out Sound\r\n        this.timerRunOutSound = context.sound.add('timer_run_out');\r\n\r\n        // Text\r\n        this.text = context.add.text(this.x + 40, this.y, this.getTimeOutput(this.ticks), FontStyleManifest.Default);\r\n\r\n        if(this.isIntro)\r\n        {\r\n            this.text.setAlpha(0);\r\n        }\r\n        \r\n        this.tick(context);\r\n        \r\n        const self = this;\r\n        context.time.addEvent({ delay: 1000, callback: () => { self.tick(context); }, callbackScope: this, loop: true })\r\n    }\r\n\r\n    show(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.icon,\r\n            duration: 250,\r\n            alpha: 0.7\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.text,\r\n            duration: 250,\r\n            alpha: 1\r\n        });\r\n    }\r\n\r\n    tick(context)\r\n    {\r\n        if(this.ticks <= 0 || this.isPaused)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.ticks <= 30 && !this.isDisplayingWarning)\r\n        {\r\n            this.displayWarning(context);\r\n        }\r\n\r\n        if(this.ticks <= 10)\r\n        {\r\n            this.warningSound.play();\r\n        }\r\n\r\n        if(this.ticks === 1)\r\n        {\r\n            this.timerRunOutSound.play();\r\n            this.warningTweens.forEach(tween => {\r\n                tween.stop(0);\r\n            })\r\n        }\r\n\r\n        this.emit('tick');\r\n        this.ticks--;\r\n\r\n        this.output();\r\n    }\r\n\r\n    update(ticks)\r\n    {\r\n        this.ticks = ticks;\r\n        this.output();\r\n    }\r\n\r\n    start()\r\n    {\r\n        this.isPaused = false;\r\n    }\r\n\r\n    stop()\r\n    {\r\n        this.isPaused = true;\r\n    }\r\n\r\n    getTimeOutput(input)\r\n    {\r\n        const minutes = Math.floor(input / 60);\r\n\r\n        let seconds = (input % 60);\r\n        if(seconds < 10)\r\n        {\r\n            seconds = '0' + seconds;\r\n        }\r\n\r\n        return `${minutes}:${seconds}`;\r\n    }\r\n\r\n    output()\r\n    {\r\n        this.text.setText(this.getTimeOutput(this.ticks));\r\n    }\r\n\r\n    displayWarning(context)\r\n    {\r\n        this.isDisplayingWarning = true;\r\n\r\n        this.warningTweens = [];\r\n\r\n        this.warningTweens.push(context.tweens.add({\r\n            targets: [ this.icon, this.warningIcon ],\r\n            angle: -60,\r\n            duration: 400,\r\n            yoyo: true,\r\n            repeat: -1\r\n        }));\r\n\r\n        this.warningTweens.push(context.tweens.add({\r\n            targets: this.warningIcon,\r\n            alpha: 0.6,\r\n            duration: 300,\r\n            repeatDelay: 100,\r\n            yoyo: true,\r\n            repeat: -1\r\n        }));\r\n    }\r\n}","import ActionScriptManifest from '../ActionScriptManifest';\r\nimport ActionQueue from '../ActionQueue';\r\nimport Director from '../Director';\r\nimport Guide from '../Guide';\r\nimport LevelManifest from '../LevelManifest';\r\nimport MuteControl from '../MuteControl';\r\nimport ScoreDisplay from '../ScoreDisplay';\r\nimport TileGrid from '../TileGrid';\r\nimport Timer from '../Timer';\r\nimport EventEmitter from '../EventEmitter';\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('RoundScene');\r\n\r\n        this.isAwaitingRoundTransition = false;\r\n        this.isReadyForRoundTransition = false;\r\n        this.isTransitioningRounds = false;\r\n        this.isBlockingMatches = false;\r\n\r\n        this.score = null;\r\n        this.comboCount = null;\r\n        this.queue = null;\r\n        this.selectedTiles = null;\r\n        this.tileGrid = null;\r\n        this.scoreDisplay = null;\r\n        this.timer = null;\r\n        this.background = null;\r\n\r\n        this.levelClearMessage = null;\r\n        this.levelClearMessageHighlight = null;\r\n \r\n        this.director = null;\r\n        this.guide = null;\r\n        this.level = null;\r\n\r\n        this.emitter = null;\r\n\r\n        this.totalMatches = null;\r\n\r\n        this.tileSelectSound = null;\r\n        this.lightsOffSound = null;\r\n        this.roundClearSound = null;\r\n    }\r\n\r\n    init(data)\r\n    {\r\n        this.level = data.level || 0;\r\n    }\r\n\r\n    create()\r\n    {\r\n        this.isTransitioningRounds = false;\r\n        this.isRoundTransitionComplete = false;\r\n        this.isBlockingMatches = LevelManifest[this.level].blockMatching;\r\n\r\n        this.score = 0;\r\n        this.totalMatches = 0;\r\n\r\n        this.queue = new ActionQueue();\r\n\r\n        this.background = this.add.image(400, 330, 'background');\r\n\r\n        const tileGenerationBehavior = LevelManifest[this.level].behavior;\r\n\r\n        this.selectedTiles = [];\r\n        this.tileGrid = new TileGrid(6, 6, 80, 335, -260, this.onTileSelect, this.onTileMatch, tileGenerationBehavior, this.queue);\r\n        this.scoreDisplay = new ScoreDisplay(110, 585, this.level === 0);\r\n\r\n        const timerSeconds = LevelManifest[this.level].timer;\r\n        this.timer = (timerSeconds > 0) ? new Timer(110, 625, timerSeconds, this.level === 1) : null;\r\n\r\n        this.guide = new Guide(20, 20, (this.level === 0));\r\n\r\n        this.tileGrid.create(this);\r\n        this.scoreDisplay.create(this);\r\n        this.timer && this.timer.create(this);\r\n        this.guide.create(this);\r\n        this.emitter = new EventEmitter();\r\n\r\n        const actionScript = ActionScriptManifest.getScript(this.level);\r\n        this.director = new Director(actionScript, this.guide, this.timer, this.scoreDisplay, this.tileGrid, this, this);\r\n\r\n        const self = this;\r\n        this.input.on('pointerdown', () => { self.director.next(self); });\r\n\r\n        this.tileSelectSound = this.sound.add('tile_select');\r\n        this.lightsOffSound = this.sound.add('lights_off');\r\n        this.roundClearSound = this.sound.add('round_clear');\r\n\r\n        // Mute Button\r\n        const muteControl = new MuteControl(40, 640);\r\n        muteControl.create(this);\r\n    }\r\n\r\n    update()\r\n    {\r\n        if(this.isTransitioningRounds)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.isRoundTransitionComplete)\r\n        {\r\n            this.nextLevel();\r\n            return;\r\n        }\r\n\r\n        // Have we run out of time?\r\n        if(this.timer != null && this.timer.ticks <= 0)\r\n        {\r\n            this.isTransitioningRounds = true;\r\n            this.emitter.emit('gameOver');\r\n            return;\r\n        }\r\n\r\n        if(this.isLevelComplete())\r\n        {\r\n            this.isTransitioningRounds = true;\r\n            this.tileGrid.block(this);\r\n            this.emitter.emit('win');\r\n            return;\r\n        }\r\n\r\n        // Are we currently executing a queued action?\r\n        if(this.queue.isActionRunning())\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Do we have any queued actions on the stack?\r\n        if(this.queue.hasActions())\r\n        {\r\n            this.queue.next();\r\n            return;\r\n        }\r\n\r\n        // If nothing's left in the queue, we can move the game's state forward\r\n        this.tileGrid.update(this);\r\n    }\r\n\r\n    onTileSelect(context, tile)\r\n    {\r\n        // Are we currently executing a queued action?\r\n        if(context.queue.isActionRunning() || context.queue.hasActions())\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Is the guide currently blocking gameplay?\r\n        if(context.guide.isBlockingGameplay)\r\n        {\r\n            return;\r\n        }\r\n    \r\n        // Can we select this tile?\r\n        if(!context.tileGrid.canSelect(tile))\r\n        {\r\n            return;\r\n        }\r\n\r\n        // If the user is selecting a tile, reset the combo count\r\n        context.comboCount = 0;\r\n        context.tileGrid.updateMatchSound(context.comboCount);\r\n\r\n        // Is this tile already selected?\r\n        if(tile.isActivated)\r\n        {\r\n            context.selectedTiles = [];\r\n            tile.deactivate();\r\n            return;\r\n        }\r\n    \r\n        if(context.selectedTiles.length === 0)\r\n        {\r\n            context.tileSelectSound.play();\r\n            context.selectedTiles.push(tile);\r\n            tile.activate();\r\n            return;\r\n        }\r\n    \r\n        if(context.selectedTiles.length === 1)\r\n        {\r\n            const selectedTile = context.selectedTiles[0];\r\n            const xDiff = Math.abs(selectedTile.tileGridX - tile.tileGridX);\r\n            const yDiff = Math.abs(selectedTile.tileGridY - tile.tileGridY);\r\n    \r\n            if((xDiff === 1 && yDiff === 0) || (xDiff === 0 && yDiff === 1))\r\n            {\r\n                context.selectedTiles.push(tile);\r\n    \r\n                let firstSelectedTile = context.selectedTiles[0];\r\n                let secondSelectedTile = context.selectedTiles[1];\r\n    \r\n                context.tileGrid.swapTiles(context, firstSelectedTile, secondSelectedTile);\r\n                context.emitter.emit('swap');\r\n    \r\n                context.queue.push(() => {\r\n    \r\n                    // If there are no matches (or we're in a round where matches are blocked), swap the tiles back\r\n                    if(\r\n                        context.isBlockingMatches ||\r\n                        (!context.tileGrid.hasMatches(firstSelectedTile.tileGridX, firstSelectedTile.tileGridY) &&\r\n                        !context.tileGrid.hasMatches(secondSelectedTile.tileGridX, secondSelectedTile.tileGridY))\r\n                    )\r\n                    {\r\n                        context.tileGrid.swapTiles(context, firstSelectedTile, secondSelectedTile);\r\n                    }\r\n    \r\n                    return Promise.resolve();\r\n    \r\n                });\r\n    \r\n                context.clearSelectedTiles(context);\r\n            }\r\n        }\r\n    }\r\n\r\n    clearSelectedTiles(context)\r\n    {\r\n        context.selectedTiles.forEach((tile) => { tile.deactivate(); });\r\n        context.selectedTiles = [];\r\n    }\r\n\r\n    onTileMatch(context, matchedTiles)\r\n    {\r\n        // If any of the tiles are selected, let's clear\r\n        // the selected tiles to prevent a bug where the game\r\n        // tries to swap a tile that has already been cleared\r\n        if(matchedTiles.some(tile => tile.isActivated))\r\n        {\r\n            context.clearSelectedTiles(context);\r\n        }\r\n\r\n        context.totalMatches++;\r\n\r\n        context.comboCount++;\r\n        context.tileGrid.updateMatchSound(context.comboCount);\r\n\r\n        context.score += matchedTiles.length;\r\n        context.scoreDisplay.updateScore(context.score);\r\n    }\r\n    \r\n    isLevelComplete()\r\n    {\r\n        return this.score >= LevelManifest[this.level].score;\r\n    }\r\n\r\n    endLevel()\r\n    {\r\n        const self = this;\r\n        const endLevelTimeline = this.tweens.createTimeline();\r\n\r\n        // Level Clear Message\r\n        const levelClearMessage = this.add.image(400, 400, 'round_clear');\r\n        levelClearMessage.setAlpha(0);\r\n        levelClearMessage.setDepth(1);\r\n        levelClearMessage.setScale(0.75, 0.75);\r\n\r\n        // Flash Backdrop\r\n        const flashBackdropGraphics = this.add.graphics({ fillStyle: { color: 0xffffff } });\r\n        flashBackdropGraphics.setAlpha(0);\r\n        const flashBackdrop = new Phaser.Geom.Rectangle(0, 0, 800, 700);\r\n        flashBackdropGraphics.fillRectShape(flashBackdrop);\r\n\r\n        // Level Clear Backdrop\r\n        const levelClearBackdrop = this.add.image(400, 400, 'round_clear_backdrop');\r\n        levelClearBackdrop.setAlpha(0);\r\n\r\n        endLevelTimeline.add({\r\n            targets: [ levelClearBackdrop, flashBackdropGraphics ],\r\n            alpha: 1,\r\n            duration: 30\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearBackdrop,\r\n            alpha: 0.7,\r\n            duration: 1000,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 0,\r\n            duration: 1000,\r\n            offset: '-=1000'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearMessage,\r\n            alpha: 1,\r\n            duration: 500,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            offset: '-=2000',\r\n            ease: 'Back',\r\n            completeDelay: 100,\r\n            onComplete: () => {\r\n                this.tileGrid.forEachPlayableTile((tile) => tile && tile.disappear(self));\r\n\r\n                self.tweens.add({\r\n                    targets: this.tileGrid.gridBackground,\r\n                    alpha: 0,\r\n                    duration: 200\r\n                });\r\n            }\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearMessage,\r\n            alpha: 0,\r\n            duration: 500,\r\n            scaleX: 0.75,\r\n            scaleY: 0.75,\r\n            ease: 'Quad.easeOut'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearBackdrop,\r\n            alpha: 0,\r\n            duration: 500,\r\n            offset: '-=500',\r\n            ease: 'Quad.easeOut',\r\n            onComplete: () => {\r\n                self.isRoundTransitionComplete = true;\r\n                self.isTransitioningRounds = false; \r\n            }\r\n        });\r\n\r\n        this.roundClearSound.play();\r\n        endLevelTimeline.play();\r\n    }\r\n\r\n    nextLevel()\r\n    {\r\n        this.scene.restart({ level: (this.level + 1) });\r\n    }\r\n    \r\n    turnOffLights()\r\n    {\r\n        this.lightsOffSound.play();\r\n\r\n        this.lights.enable().setAmbientColor(0x555555);\r\n        this.background.setPipeline('Light2D');\r\n        this.lights.addLight(550, 900, 500).setColor(0xffffff).setIntensity(2);\r\n    }\r\n\r\n    pauseBackgroundMusic()\r\n    {\r\n        this.game.backgroundMusic.pause();\r\n    }\r\n\r\n    resumeBackgroundMusic()\r\n    {\r\n        this.game.backgroundMusic.resume();\r\n    }\r\n}","export default class {\r\n\r\n    constructor()\r\n    {\r\n        this.queuedActions = [];\r\n        this.currentAction = null;\r\n    }\r\n\r\n    isActionRunning()\r\n    {\r\n        return this.currentAction != null;\r\n    }\r\n\r\n    hasActions()\r\n    {\r\n        return this.queuedActions.length > 0;\r\n    }\r\n\r\n    next()\r\n    {\r\n        this.currentAction = this.queuedActions.shift();\r\n        this.currentAction();\r\n    }\r\n\r\n    push(action)\r\n    {\r\n        var self = this;\r\n        self.queuedActions.push(() => { action().then(() => { self.currentAction = null; }) });\r\n    }\r\n\r\n}","import FontStyleManifest from './FontStyleManifest';\r\n\r\nexport default class {\r\n\r\n    constructor(x, y, isIntro)\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.scoreBackground = null;\r\n        this.scoreIcon = null;\r\n        this.scoreText = null;\r\n\r\n        this.score = 0;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Background\r\n        this.scoreBackground = context.add.graphics({ fillStyle: { color: 0x85ff7d } });\r\n        this.scoreBackground.setAlpha(this.isIntro ? 0 : 0.25);\r\n\r\n        this.scoreBackground.fillRoundedRect(this.x - 150, this.y - 10, 300, 90, 10);\r\n\r\n        // Icon\r\n        this.scoreIcon = context.add.image(this.x + 15, this.y + 15, 'icon_tile');\r\n        this.scoreIcon.setAlpha(this.isIntro ? 0 : 0.7);\r\n\r\n        // Text\r\n        this.scoreText = context.add.text(this.x + 40, this.y, this.score, FontStyleManifest.Default);\r\n\r\n        if(this.isIntro)\r\n        {\r\n            this.scoreText.setAlpha(0);\r\n        }\r\n\r\n        this.updateScore(this.score);\r\n    }\r\n\r\n    updateScore(score)\r\n    {\r\n        this.score = score;\r\n        this.scoreText.setText(score);\r\n    }\r\n\r\n    show(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.scoreBackground,\r\n            duration: 250,\r\n            alpha: 0.25\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.scoreIcon,\r\n            duration: 250,\r\n            alpha: 0.7\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.scoreText,\r\n            duration: 250,\r\n            alpha: 1\r\n        });\r\n    }\r\n\r\n    hide(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: [ this.scoreBackground, this.scoreIcon, this.scoreText ],\r\n            x: '-=300',\r\n            duration: 300\r\n        });\r\n    }\r\n}","import LevelManifest from \"./LevelManifest\";\r\n\r\nexport default class {\r\n\r\n    constructor(script, guide, timer, scoreDisplay, tileGrid, scene, context)\r\n    {\r\n        this.guide = guide;\r\n        this.timer = timer;\r\n        this.scoreDisplay = scoreDisplay;\r\n        this.tileGrid = tileGrid;\r\n        this.scene = scene;\r\n\r\n        this.gameOverSubscriptions = [];\r\n        this.queuedActions = null;\r\n\r\n        this.isGuideReady = false;\r\n        this.isWaiting = false;\r\n\r\n        const self = this;\r\n        this.guide.on('ready', () => { self.isGuideReady = true; self.next(context); });\r\n\r\n        this.queueActions(script);\r\n    }\r\n\r\n    queueActions(script, context)\r\n    {\r\n        if(!script)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const self = this;\r\n\r\n        if(self.queuedActions === null)\r\n        {\r\n            self.queuedActions = [];\r\n        }\r\n\r\n        self.queuedActions.push(...script);\r\n\r\n        self.next(context);\r\n    }\r\n\r\n    next(context)\r\n    {\r\n        if(!this.isGuideReady)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.guide.isTalking)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.isWaiting)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.queuedActions.length === 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const action = this.queuedActions.shift();\r\n\r\n        // Simple dialog message\r\n        if(typeof action === \"string\")\r\n        {\r\n            // Are there any more messages after this one?\r\n            const isLastMessage = this.queuedActions.every(a => typeof a !== \"string\");\r\n\r\n            this.handleMessage(action, isLastMessage);\r\n            this.next(context);\r\n        }\r\n\r\n        // Game action\r\n        else if(action.hasOwnProperty('do'))\r\n        {\r\n            this.handleAction(action.do, action.value, context);\r\n            this.next(context);\r\n        }\r\n\r\n        // Event\r\n        else if(action.hasOwnProperty('on'))\r\n        {\r\n            this.handleEvent(action.on, action.actions, action.filter, context, action.persist);\r\n            this.next(context);\r\n        }\r\n\r\n        // Wait\r\n        else if(action.hasOwnProperty('wait'))\r\n        {\r\n            this.isWaiting = true;\r\n            context.time.addEvent({ delay: action.wait, callback: () => { this.isWaiting = false; this.next(context); }, callbackScope: this, loop: false })\r\n        }\r\n    }\r\n\r\n    handleMessage(action, hideEndDialogMarker)\r\n    {\r\n        this.guide.displayMessage(action, hideEndDialogMarker);\r\n    }\r\n\r\n    handleAction(action, value, context)\r\n    {\r\n        switch(action)\r\n        {\r\n            // Tile Actions\r\n\r\n            case 'dropTiles':\r\n                this.tileGrid.fill(context);\r\n                break;\r\n\r\n            case 'unblockTileGrid':\r\n                this.tileGrid.unblock(context);\r\n                break;\r\n\r\n            case 'blockTileGrid':\r\n                this.tileGrid.block(context, value);\r\n                break;\r\n\r\n            case 'updateTileGenerationBehavior':\r\n                this.tileGrid.updateTileGenerationBehavior(value);\r\n                break;\r\n\r\n\r\n            // Guide Actions\r\n\r\n            case 'updateGuideExpression':\r\n                this.guide.updateExpression(value, context);\r\n                break;\r\n\r\n            case 'hideGuide':\r\n                this.guide.hide(context);\r\n                break;\r\n\r\n\r\n            // Timer Actions\r\n\r\n            case 'startTimer':\r\n                this.timer.start();\r\n                break;\r\n\r\n            case 'updateTimer':\r\n                this.timer.ticks = value;\r\n                break;\r\n\r\n            case 'stopTimer':\r\n                this.timer.stop();\r\n                break;\r\n\r\n            case 'updateTimerRelativeToScore':\r\n                const levelInfo = LevelManifest[this.scene.level];\r\n                this.timer.update(this.getScoreRelativeTicks(levelInfo.timer, this.scene.score, levelInfo.score));\r\n                break;\r\n\r\n            case 'showTimerDisplay':\r\n                this.timer.show(context);\r\n                break;\r\n\r\n\r\n            // Score Actions\r\n\r\n            case 'hideScoreDisplay':\r\n                this.scoreDisplay.hide(context);\r\n                break;\r\n\r\n            case 'showScoreDisplay':\r\n                this.scoreDisplay.show(context);\r\n                break;\r\n\r\n            \r\n            // Level Actions\r\n\r\n            case 'endLevel':\r\n                this.scene.endLevel();\r\n                break;\r\n\r\n            case 'revokeLevelTransition':\r\n                this.scene.isTransitioningRounds = false;\r\n                break;\r\n\r\n            case 'revokeBlockMatching':\r\n                this.scene.isBlockingMatches = false;\r\n                break;\r\n\r\n            \r\n            // Scene Actions\r\n\r\n            case 'turnOffLights':\r\n                this.scene.turnOffLights();\r\n                break;\r\n\r\n            case 'pauseBackgroundMusic':\r\n                this.scene.pauseBackgroundMusic();\r\n                break;\r\n\r\n            case 'resumeBackgroundMusic':\r\n                this.scene.resumeBackgroundMusic();\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleEvent(event, actions, filter, context, persist)\r\n    {\r\n        let target = null;\r\n\r\n        switch(event)\r\n        {\r\n            case 'match':\r\n                target = this.tileGrid;\r\n                break;\r\n\r\n            case 'swap':\r\n            case 'win':\r\n            case 'gameOver':\r\n                target = this.scene.emitter;\r\n                break;\r\n\r\n            case 'tick':\r\n                target = this.timer;\r\n                break;\r\n        }\r\n\r\n        this.setUpEvent(target, event, actions, filter, context, persist);\r\n    }\r\n\r\n    setUpEvent(target, eventName, actions, filter, context, persist)\r\n    {\r\n        const self = this;\r\n\r\n        target.on(\r\n            eventName,\r\n            this.wrapFilter(filter),\r\n            () => {\r\n                self.queuedActions = [];\r\n                self.queueActions(actions, context);\r\n            },\r\n            persist\r\n        );\r\n    }\r\n\r\n    wrapFilter(filter)\r\n    {\r\n        const self = this;\r\n\r\n        if(typeof filter === 'undefined')\r\n        {\r\n            return null;\r\n        }\r\n\r\n        return () => { return filter(self.getCurrentState()); };\r\n    }\r\n\r\n    getCurrentState()\r\n    {\r\n        return {\r\n            matches: this.tileGrid.matches,\r\n            score: this.scene.score,\r\n            ticks: this.timer ? this.timer.ticks : null,\r\n            isBlockingMatches: this.scene.isBlockingMatches\r\n        };\r\n    }\r\n\r\n    getScoreRelativeTicks(targetTicks, currScore, targetScore)\r\n    {\r\n        return Math.max(Math.trunc(targetTicks - ((currScore / targetScore) * targetTicks)), 1);\r\n    }\r\n}","import { getRandomItem } from \"../Utility\";\r\nimport MuteControl from \"../MuteControl\";\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('TitleScene');\r\n\r\n        this.startingLevel = 0;\r\n\r\n        this.isExiting = false;\r\n\r\n        this.tileInfos = [];\r\n        this.title = null;\r\n        this.startBtn = null;\r\n        this.startBtnOverlay = null;\r\n    }\r\n\r\n    create()\r\n    {\r\n        const self = this;\r\n\r\n        // Background\r\n        this.add.image(400, 330, 'background');\r\n\r\n        // Flash Backdrop\r\n        const flashBackdropGraphics = this.add.graphics({ fillStyle: { color: 0xffffff } });\r\n        flashBackdropGraphics.setAlpha(0);\r\n        const flashBackdrop = new Phaser.Geom.Rectangle(0, 0, 800, 700);\r\n        flashBackdropGraphics.fillRectShape(flashBackdrop);\r\n\r\n        // Tile\r\n        this.tileInfos = [];\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '+=180', yChange: '+=180', angle: 15, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_03', xChange: '-=180', yChange: '+=180', angle: -15, scale: 0.9 });\r\n        this.tileInfos.push({ imageKey: 'tile_04', xChange: '-=200', yChange: '-=180', angle: -5, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '+=0', yChange: '-=180', angle: -15, scale: 0.7 });\r\n        this.tileInfos.push({ imageKey: 'tile_02', xChange: '+=200', yChange: '-=180', angle: 15, scale: 1 });\r\n        this.tileInfos.push({ imageKey: 'tile_02', xChange: '+=0', yChange: '+=180', angle: -15, scale: 1 });\r\n        this.tileInfos.push({ imageKey: 'tile_03', xChange: '+=290', yChange: '+=30', angle: 15, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '-=290', yChange: '+=40', angle: -15, scale: 0.9 });\r\n\r\n        this.tileInfos.forEach(tileInfo => {\r\n            tileInfo.tile = self.add.image(400, 230, tileInfo.imageKey);\r\n            tileInfo.tile.setAlpha(0);\r\n            tileInfo.tile.setScale(0.5, 0.5);\r\n\r\n            tileInfo.tileFlash = self.add.image(400, 230, tileInfo.imageKey);\r\n            tileInfo.tileFlash.setTintFill(0xffffff);\r\n            tileInfo.tileFlash.setAlpha(0);\r\n        });\r\n\r\n        // Title\r\n        this.title = this.add.image(400, 230, 'title');\r\n        this.title.setAlpha(0);\r\n        this.title.setScale(2, 2);\r\n\r\n        this.startBtn = this.add.image(400, 540, 'start');\r\n        this.startBtn.setInteractive({ cursor: 'pointer' });\r\n        this.startBtn.setAlpha(0);\r\n\r\n        const startBtnFlash = this.add.image(400, 540, 'start');\r\n        startBtnFlash.setAlpha(0);\r\n        startBtnFlash.setTintFill(0xffffff);\r\n\r\n        this.startBtnOverlay = this.add.image(400, 540, 'start-active');\r\n        this.startBtnOverlay.setAlpha(0);\r\n\r\n        // Mute Button\r\n        const muteControl = new MuteControl(40, 640);\r\n        muteControl.create(this);\r\n\r\n        this.startBtn.on('pointerover', () => {\r\n            self.tweens.add({\r\n                targets: self.startBtnOverlay,\r\n                alpha: 1,\r\n                duration: 100,\r\n                ease: 'Sine.easeInOut'\r\n            });\r\n        });\r\n\r\n        this.startBtn.on('pointerout', () => {\r\n            self.tweens.add({\r\n                targets: self.startBtnOverlay,\r\n                alpha: 0,\r\n                duration: 100,\r\n                ease: 'Sine.easeInOut'\r\n            });\r\n        });\r\n\r\n        this.selectSound = this.sound.add('select');\r\n        this.startBtn.on('pointerdown', () => {\r\n            self.transitionToNextScene();\r\n        });\r\n\r\n        // Intro Timeline\r\n        const introTimeline = this.tweens.createTimeline();\r\n\r\n        // Slam in the title\r\n        introTimeline.add({\r\n            delay: 800,\r\n            targets: this.title,\r\n            alpha: 1,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            duration: 500,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        // Fling the tiles from the impact of the title slam\r\n        this.tileInfos.forEach((tileInfo, i) => {\r\n            introTimeline.add({\r\n                targets: tileInfo.tile,\r\n                x: tileInfo.xChange,\r\n                y: tileInfo.yChange,\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                alpha: 1,\r\n                scaleX: tileInfo.scale,\r\n                scaleY: tileInfo.scale,\r\n                angle: tileInfo.angle,\r\n                duration: 300,\r\n                ease: 'Quad.easeOut',\r\n                offset: (i === 0) ? '-=0' : '-=300'\r\n            });\r\n        });\r\n\r\n        this.game.backgroundMusic = this.sound.add('background_music');\r\n        this.game.backgroundMusic.loop = true;\r\n        this.game.backgroundMusic.play();\r\n\r\n        const introSlideSound = this.sound.add('intro_slide');\r\n\r\n        // Display the flash from the title slam\r\n        introTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 1,\r\n            duration: 30,\r\n            offset: '-=300',\r\n            onComplete: () => {\r\n                introSlideSound.play();\r\n            }\r\n        });\r\n\r\n        // Fade out the flash from the title slam\r\n        introTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 0,\r\n            duration: 700,\r\n            offset: 1500,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        // Flash in the start button\r\n        introTimeline.add({\r\n            targets: [ this.startBtn, startBtnFlash ],\r\n            alpha: 1,\r\n            offset: 2200,\r\n            duration: 100\r\n        });\r\n\r\n        // Fade out the start button flash effect\r\n        introTimeline.add({\r\n            targets: startBtnFlash,\r\n            alpha: 0,\r\n            duration: 300,\r\n            offset: 2300,\r\n            ease: 'Quad.easeOut',\r\n            onComplete: this.flashTiles.apply(self)\r\n        });\r\n\r\n        introTimeline.add({\r\n            targets: this.title,\r\n            scaleX: 1.02,\r\n            scaleY: 1.02,\r\n            yoyo: true,\r\n            repeat: -1,\r\n            duration: 500,\r\n            offset: 2600,\r\n            ease: 'Quad'\r\n        });\r\n\r\n        introTimeline.play();\r\n    }\r\n\r\n    flashTiles()\r\n    {\r\n        const self = this;\r\n\r\n        // Start randomly flashing tiles\r\n        self.time.addEvent({\r\n            delay: 3000,\r\n            callback: () => {\r\n                if(self.isExiting)\r\n                {\r\n                    return;\r\n                }\r\n\r\n                const tileInfo = getRandomItem(self.tileInfos);\r\n\r\n                tileInfo.tileFlash.x = tileInfo.tile.x;\r\n                tileInfo.tileFlash.y = tileInfo.tile.y;\r\n                tileInfo.tileFlash.angle = tileInfo.tile.angle;\r\n                tileInfo.tileFlash.scaleX = tileInfo.tile.scaleX;\r\n                tileInfo.tileFlash.scaleY = tileInfo.tile.scaleY;\r\n\r\n                self.tweens.add({\r\n                    targets: tileInfo.tileFlash,\r\n                    alpha: 1,\r\n                    duration: 10\r\n                });\r\n\r\n                self.tweens.add({\r\n                    targets: tileInfo.tileFlash,\r\n                    alpha: 0,\r\n                    duration: 1000,\r\n                    ease: 'Power1',\r\n                    delay: 10\r\n                });\r\n\r\n                self.tweens.add({\r\n                    targets: [ tileInfo.tile, tileInfo.tileFlash ],\r\n                    scaleX: '*=1.1',\r\n                    scaleY: '*=1.1',\r\n                    duration: 500,\r\n                    yoyo: true,\r\n                    ease: 'Power1'\r\n                });\r\n            },\r\n            callbackScope: this,\r\n            loop: true\r\n        });\r\n    }\r\n\r\n    transitionToNextScene()\r\n    {\r\n        const self = this;\r\n\r\n        this.isExiting = true;\r\n\r\n        this.selectSound.play();\r\n        this.startBtn.setAlpha(0);\r\n\r\n        const exitTimeline = this.tweens.createTimeline();\r\n\r\n        this.tileInfos.forEach((tileInfo, i) => {\r\n            exitTimeline.add({\r\n                targets: [ tileInfo.tile, tileInfo.tileFlash ],\r\n                x: tileInfo.xChange,\r\n                y: tileInfo.yChange,\r\n                alpha: 0,\r\n                duration: 500,\r\n                offset: (i === 0) ? '-=0' : '-=1000',\r\n                ease: 'Quad.easeOut'\r\n            });\r\n        });\r\n\r\n        exitTimeline.add({\r\n            targets: this.title,\r\n            scaleX: 1.1,\r\n            scaleY: 1.1,\r\n            duration: 700,\r\n            offset: '-=1000',\r\n            alpha: 0,\r\n            ease: 'Quad.easeOut'\r\n        });\r\n\r\n        exitTimeline.add({\r\n            targets: this.startBtnOverlay,\r\n            y: '+=300',\r\n            duration: 500,\r\n            offset: '-=1000',\r\n            ease: 'Quad.easeOut',\r\n            completeDelay: 300,\r\n            onComplete: () => {\r\n                self.scene.transition({ target: 'RoundScene', data: { level: self.startingLevel }, remove: true });\r\n            }\r\n        });\r\n\r\n        exitTimeline.play();\r\n    }\r\n}","import LoadingScene from './scenes/LoadingScene';\r\nimport RoundScene from './scenes/RoundScene';\r\nimport TitleScene from './scenes/TitleScene';\r\n\r\nconst config = {\r\n    type: Phaser.AUTO,\r\n    width: 800,\r\n    height: 700,\r\n    scene: [LoadingScene, TitleScene, RoundScene]\r\n};\r\n\r\nconst game = new Phaser.Game(config);"],"sourceRoot":""}