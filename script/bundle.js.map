{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/webfontloader/webfontloader.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/WebGLRenderer.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/CanvasRenderer.js","webpack:///./script/FontStyleManifest.js","webpack:///./script/scenes/LoadingScene.js","webpack:///./script/TileGenerationBehavior.js","webpack:///./script/LevelManifest.js","webpack:///./script/ActionScriptManifest.js","webpack:///./script/EventEmitter.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/render/Render.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/textstyle/MeasureText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/const.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/textstyle/TextStyle.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/DrawMethods.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/struct/Stack.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/pool.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/penmanger/Pen.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/Clear.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/Clone.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/object/NOOP.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/penmanger/PenManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/hitareamanager/HitAreaManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/SetInteractive.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/WrapText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/canvastext/CanvasText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/imagemanager/ImageManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/imagemanager/GetGlobImageManager.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/textbase/Text.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Parser.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/TagText.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Creator.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/tagtext.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/gameobjects/text/tagtext/Factory.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/eventemitter/EventEmitterMethods.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/system/IsSceneObject.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/utils/system/GetSceneObject.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/behaviors/texttyping/TextTyping.js","webpack:///./node_modules/phaser3-rex-plugins/plugins/texttyping.js","webpack:///./script/Guide.js","webpack:///./script/MuteControl.js","webpack:///./script/Utility.js","webpack:///./script/TileState.js","webpack:///./script/TileType.js","webpack:///./script/TileGrid.js","webpack:///./script/Tile.js","webpack:///./script/Timer.js","webpack:///./script/scenes/RoundScene.js","webpack:///./script/ActionQueue.js","webpack:///./script/ScoreDisplay.js","webpack:///./script/Director.js","webpack:///./script/scenes/TitleScene.js","webpack:///./script/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","aa","a","b","apply","arguments","ba","Error","length","Array","slice","unshift","Function","toString","indexOf","q","Date","now","ca","this","document","da","window","FontFace","createElement","e","style","cssText","setAttribute","appendChild","createTextNode","u","getElementsByTagName","documentElement","insertBefore","lastChild","v","parentNode","removeChild","w","className","split","f","g","push","join","replace","y","z","rel","href","media","onload","onerror","setTimeout","A","src","onreadystatechange","readyState","tagName","B","C","D","E","F","G","match","parseInt","I","test","J","H","ga","substr","toLowerCase","ha","h","j","events","classes","L","K","ja","M","N","O","P","Q","start","Promise","fonts","load","fa","then","race","clearTimeout","R","S","T","exec","navigator","userAgent","la","U","offsetWidth","serif","V","ma","W","X","na","oa","qa","k","x","xa","vendor","ra","sa","ta","ua","context","timeout","ia","ka","pa","projectId","version","api","fontfamily","fontStyle","fontWeight","id","urls","families","testStrings","ya","za","latin","cyrillic","greek","khmer","Hanuman","Aa","thin","extralight","ultralight","light","regular","book","medium","semibold","demibold","bold","extrabold","ultrabold","black","heavy","Ba","italic","normal","Ca","Ea","Fa","Arimo","Cousine","Tinos","Ga","Ha","text","pop","va","isNaN","Da","encodeURIComponent","wa","Typekit","config","fn","async","__webfontfontdeckmodule__","weight","location","hostname","ea","Y","custom","fontdeck","monotype","typekit","google","Z","Utils","Phaser","Renderer","WebGL","renderer","interpolationPercentage","camera","parentMatrix","width","height","frame","getTint","getTintAppendFloatAlpha","pipeline","batchTexture","glTexture","resolution","scaleX","scaleY","rotation","flipX","flipY","scrollFactorX","scrollFactorY","displayOriginX","displayOriginY","_tintTL","alpha","_alphaTL","_tintTR","_alphaTR","_tintBL","_alphaBL","_tintBR","_alphaBR","_isTinted","tintFill","batchSprite","color","fontFamily","googleFontName","fontSize","super","FontStyleManifest","image","audio","background","add","graphics","fillStyle","fillRect","progressBox","self","progressBar","on","clear","tweens","targets","duration","startBtn","setInteractive","cursor","setAlpha","scene","transition","target","remove","score","behavior","TileGenerationBehavior","timer","blockMatching","Math","Infinity","level","do","filter","state","matches","actions","LevelManifest","ticks","isBlockingMatches","persist","wait","subscriptions","eventName","callback","subscription","forEach","renderWebGL","renderCanvas","CanvasPool","Display","Canvas","textStyle","canvas","getContext","syncFont","ceil","measureText","testString","baselineX","baseline","baselineY","font","_font","textBaseline","fillText","output","ascent","descent","getImageData","imagedata","data","pixels","line","idx","stop","NO_NEWLINE","RAW_NEWLINE","WRAPPED_NEWLINE","NO_WRAP","WORD_WRAP","CHAR_WRAP","SPLITREGEXP","GetAdvancedValue","Objects","GetValue","propertyMap","backgroundColor","stroke","strokeThickness","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","shadowStroke","shadowFill","underlineColor","underlineThickness","underlineOffset","halign","valign","maxLines","fixedWidth","fixedHeight","lineSpacing","rtl","wrapMode","wrapWidth","WRAPMODE","none","word","char","character","parent","setStyle","metrics","updateText","undefined","wrap","fill","update","strokeStyle","lineWidth","lineCap","lineJoin","enabled","recalculateMetrics","newFont","family","size","string","thickness","blur","offset","max","getTextMetrics","startX","startY","boxWidth","boxHeight","penManager","hitAreaManager","save","drawBackground","defatultStyle","startXOffset","startYOffset","drawLinesNum","drawLineStartIdx","drawLineEndIdx","offsetX","offsetY","lineHeight","lines","totalLinesNum","floor","lineIdx","getLineWidth","pens","penIdx","pensLen","drawPen","restore","pen","curStyle","parser","propToContextStyle","prop","buildFont","syncStyle","drawUnderline","isTextPen","drawText","isImagePen","drawImage","img","hasAreaMarker","area","clearRect","autoRound","round","savedLineCap","beginPath","moveTo","lineTo","syncShadow","strokeText","imgKey","imageManager","imgData","getFrame","left","source","cutX","cutY","cutWidth","cutHeight","items","arr","resetFromJSON","newLineMode","startIndex","txt","len","rawTextLength","obj","isArray","out","objIsArray","cnt","GetFastValue","PensPool","LinesPool","maxLinesWidth","tagToText","tagToTextScope","freePens","pushMultiple","PEN_CONFIG","addPen","addTextPen","previousPen","lastPen","lastX","endIndex","lastLine","targetPenManager","li","llen","pi","plen","getLineEndIndex","hasLastPen","maxW","result","plainText","end","penTxt","penStartIdx","penEndIdx","currentProp","previousProp","wrapText","substring","Rectangle","Geom","RectanglePool","hitAreas","rectangle","setTo","hitArea","contains","scaleCanvas","rotateCanvas","translateCanvas","lineStyle","strokeRect","FireEvent","pointer","localX","localY","getFirstHitArea","emit","event","splitRegExp","WRAP_RESULT","newline","getTextWidth","retLines","remainWidth","linesLen","tokenArray","token","textWidth","currLineWidth","curLineText","lineText","tokenLen","pensPool","newPenManager","_tmpPenManager","destroy","curProp","wrapLines","cursorX","cursorY","splitText","tagTextToProp","imgWidth","getOuterWidth","addNewLinePen","addImagePen","jLen","linesCount","getMaxLineWidth","desplayLinesCount","linesHeight","propToTagText","retPenManager","copyPenManager","updatePenManager","getSliceTagText","tmpPenManager","ret","copy","methods","assign","DrawMethods","globImageManager","textureManager","images","_add","textureKey","frameKey","frameWidth","frameHeight","right","exists","AddToDOM","DOM","GameObject","GameObjects","RemoveFromDOM","PensPools","type","sys","game","setPosition","setOrigin","initPipeline","align","_text","padding","top","bottom","dirty","_crop","resetCropObject","texture","textures","addCanvas","gl","deleteTexture","canvasText","setPadding","setText","dir","direction","display","originX","setFont","setFontFamily","setFontSize","setFontStyle","setFixedSize","setBackgroundColor","setFill","setColor","setStroke","setShadow","setShadowOffset","setShadowColor","setShadowBlur","setShadowStroke","setShadowFill","setWrapMode","setWrapWidth","setHAlign","setLineSpacing","setResolution","setMaxLines","runWrap","textHeight","linesWidth","updateDisplayOrigin","setSize","scale","draw","canvasToTexture","input","customHitArea","Components","ToJSON","toJSON","shape","dropZone","getText","getPlainText","getPenManager","drawBounds","Class","mixin","Alpha","BlendMode","ComputedSize","Crop","Depth","Flip","GetBounds","Mask","Origin","Pipeline","ScrollFactor","Tint","Transform","Visible","Render","GETPROP_RESULT","prevProp","STYLE_RESULT","styleToProp","slen","isEmpty","thinkness","shadow","RE_SPACE","RE_SPLITTEXT","RE_CLASS_HEADER","RE_CLASS","RE_STYLE_HEADER","RE_STYLE","tags","innerMatch","charIdx","totalLen","matchStart","lastIndex","propOut","_class","_style","defaultStyle","underline","isTextTag","tag","Parser","addTag","preDestroy","BuildGameObject","GameObjectFactory","register","gameObject","existing","GameObjectCreator","content","addToScene","eventEmitter","EventEmitterClass","Events","EventEmitter","_privateEE","_eventEmitter","shutdown","once","off","addListener","removeListener","removeAllListeners","listenerCount","listeners","SceneClass","Scene","setEventEmitter","boot","setTypeMode","setTypeSpeed","setTextCallback","setTextCallbackScope","typingIdx","transferText","textLen","insertIdx","elapsed","getTimer","typeMode","speed","destroyEventEmitter","freeTimer","TYPEMODE","startIdx","timerStartAt","setTypingContent","startTimer","newText","concat","isTyping","showAllText","paused","getTextLength","getTypingString","isLastChar","delay","typeIdx","endIdx","getSubString","midIdx","lowerResult","lowerLen","upperResult","upperLen","startAt","time","addEvent","loop","onTyping","callbackScope","EventEmitterMethods","isIntro","hideEndDialogueMarkerOnMessageComplete","endDialogueMarkerGraphics","characterWidth","characterExpression","speechBubbleGraphics","speechBubbleText","expressions","default","faceY","bodyAngle","surprise","sadness","despair","glee","nervous","confused","neutral","amused","thoughtful","isTalking","speechBubbleGraphicsY","speechBubbleGraphicsTriangleY1","speechBubbleGraphicsTriangleY2","setDepth","fillRoundedRect","fillTriangle","hideEndDialogueMarker","endDialogueMarker","Circle","fillCircleShape","repeat","yoyo","speechBubbleTextStyle","speechBubbleWidth","exclamation","speechBubbleTextTyping","messageCompleted","characterX","container","characterImage","startingExpression","characterExpressionY","sprite","addCounter","loopDelay","from","to","onUpdate","tween","currOffset","getValue","setCrop","introTimeline","createTimeline","angle","ease","props","onComplete","play","message","convMessage","convertDialogToTagText","showEndDialogueMarker","setVisible","setTexture","isCropped","expressionInfo","styles","currClass","currChar","isStyleToken","some","targetStyle","find","muteIcon","isMuted","baseIcon","toggleMute","sound","mute","getRandomItem","random","imageKey","tileGridWidth","tileGridHeight","tileSize","onTileSelect","onTileMatch","tileGenerationBehavior","queue","isInitialized","isBlocked","tileGrid","tileImageContainer","playAreaOffset","gridBackground","matchSound","swapSound","preSetTileGrid","maskShape","make","mask","Masks","GeometryMask","matchSounds","matchedTiles","getMatches","hasMatched","destroys","all","forEachTile","tile","TileState","drops","closestY","closestTile","getTileDrop","forEachPlayableTile","adjustedY","createTile","getTileType","firstTile","secondTile","firstTileX","firstTileY","firstTileGridX","tileGridX","firstTileGridY","tileGridY","secondTileX","secondTileY","secondTileGridX","secondTileGridY","firstSwap","updatePosition","secondSwap","targetGridX","targetGridY","isPlayable","targetTileType","tileType","matchedXTiles","matchedYTiles","currX","currTile","currY","uniqueMatchedTiles","initialDrag","isActivated","hasDragged","setTintFill","clearTint","isDrop","yDiff","abs","resolve","reject","tweenInfo","fadeOutCover","particleGraphics","explodeParticleGraphics","explodeParticle","Between","index","xSign","ySign","getTileX","getTileY","aboveTile","belowTile","leftTile","rightTile","TileType","map","exceptions","exception","block","unblock","getPreSetTileType","intensity","icon","warningTweens","warningIcon","warningSound","timerRunOutSound","isPaused","isDisplayingWarning","getTimeOutput","tick","displayWarning","seconds","repeatDelay","isAwaitingRoundTransition","isReadyForRoundTransition","isTransitioningRounds","comboCount","selectedTiles","scoreDisplay","levelClearMessage","levelClearMessageHighlight","director","guide","emitter","totalMatches","tileSelectSound","lightsOffSound","roundClearSound","isRoundTransitionComplete","queuedActions","currentAction","shift","action","TileGrid","scoreBackground","scoreIcon","scoreText","updateScore","timerSeconds","Timer","Guide","actionScript","ActionScriptManifest","getScript","script","gameOverSubscriptions","isGuideReady","isWaiting","next","queueActions","isLastMessage","every","handleMessage","handleAction","handleEvent","hideEndDialogMarker","displayMessage","clearSelectedTiles","updateTileGenerationBehavior","updateExpression","hide","levelInfo","getScoreRelativeTicks","show","endLevel","turnOffLights","pauseBackgroundMusic","resumeBackgroundMusic","setUpEvent","wrapFilter","getCurrentState","targetTicks","currScore","targetScore","trunc","musicSwitchSound","MuteControl","isLevelComplete","isActionRunning","hasActions","nextLevel","isBlockingGameplay","canSelect","updateMatchSound","activate","selectedTile","xDiff","firstSelectedTile","secondSelectedTile","swapTiles","hasMatches","deactivate","endLevelTimeline","setScale","flashBackdropGraphics","flashBackdrop","fillRectShape","levelClearBackdrop","completeDelay","disappear","restart","lights","enable","setAmbientColor","setPipeline","addLight","setIntensity","playMusicSwitch","backgroundMusic","pause","resume","startingLevel","isExiting","tileInfos","title","startBtnOverlay","xChange","yChange","tileInfo","tileFlash","startBtnFlash","selectSound","transitionToNextScene","introSlideSound","flashTiles","exitTimeline","AUTO","LoadingScene","TitleScene","RoundScene","Game"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nvar Utils = Phaser.Renderer.WebGL.Utils;\r\n\r\n/**\r\n * Renders this Game Object with the WebGL Renderer to the given Camera.\r\n * The object will not render if any of its renderFlags are set or it is being actively filtered out by the Camera.\r\n * This method should not be called directly. It is a utility function of the Render module.\r\n *\r\n * @method Phaser.GameObjects.Text#renderWebGL\r\n * @since 3.0.0\r\n * @private\r\n *\r\n * @param {Phaser.Renderer.WebGL.WebGLRenderer} renderer - A reference to the current active WebGL renderer.\r\n * @param {Phaser.GameObjects.Text} src - The Game Object being rendered in this call.\r\n * @param {number} interpolationPercentage - Reserved for future use and custom pipelines.\r\n * @param {Phaser.Cameras.Scene2D.Camera} camera - The Camera that is rendering the Game Object.\r\n * @param {Phaser.GameObjects.Components.TransformMatrix} parentMatrix - This transform matrix is defined if the game object is nested\r\n */\r\nvar TextWebGLRenderer = function (renderer, src, interpolationPercentage, camera, parentMatrix) {\r\n    if ((src.width === 0) || (src.height === 0)) {\r\n        return;\r\n    }\r\n\r\n    var frame = src.frame;\r\n    var width = frame.width;\r\n    var height = frame.height;\r\n    var getTint = Utils.getTintAppendFloatAlpha;\r\n\r\n    this.pipeline.batchTexture(\r\n        src,\r\n        frame.glTexture,\r\n        width, height,\r\n        src.x, src.y,\r\n        width / src.style.resolution, height / src.style.resolution,\r\n        src.scaleX, src.scaleY,\r\n        src.rotation,\r\n        src.flipX, src.flipY,\r\n        src.scrollFactorX, src.scrollFactorY,\r\n        src.displayOriginX, src.displayOriginY,\r\n        0, 0, width, height,\r\n        getTint(src._tintTL, camera.alpha * src._alphaTL),\r\n        getTint(src._tintTR, camera.alpha * src._alphaTR),\r\n        getTint(src._tintBL, camera.alpha * src._alphaBL),\r\n        getTint(src._tintBR, camera.alpha * src._alphaBR),\r\n        (src._isTinted && src.tintFill),\r\n        0, 0,\r\n        camera,\r\n        parentMatrix\r\n    );\r\n};\r\n\r\nmodule.exports = TextWebGLRenderer;\r\n","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2019 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\n/**\r\n * Renders this Game Object with the Canvas Renderer to the given Camera.\r\n * The object will not render if any of its renderFlags are set or it is being actively filtered out by the Camera.\r\n * This method should not be called directly. It is a utility function of the Render module.\r\n *\r\n * @method Phaser.GameObjects.Text#renderCanvas\r\n * @since 3.0.0\r\n * @private\r\n *\r\n * @param {Phaser.Renderer.Canvas.CanvasRenderer} renderer - A reference to the current active Canvas renderer.\r\n * @param {Phaser.GameObjects.Text} src - The Game Object being rendered in this call.\r\n * @param {number} interpolationPercentage - Reserved for future use and custom pipelines.\r\n * @param {Phaser.Cameras.Scene2D.Camera} camera - The Camera that is rendering the Game Object.\r\n * @param {Phaser.GameObjects.Components.TransformMatrix} parentMatrix - This transform matrix is defined if the game object is nested\r\n */\r\nvar TextCanvasRenderer = function (renderer, src, interpolationPercentage, camera, parentMatrix) {\r\n    if ((src.width === 0) || (src.height === 0)) {\r\n        return;\r\n    }\r\n\r\n    renderer.batchSprite(src, src.frame, camera, parentMatrix);\r\n};\r\n\r\nmodule.exports = TextCanvasRenderer;\r\n","export default {\r\n\r\n    Default: {\r\n        color: '#000',\r\n        fontFamily: '\"Baloo Thambi 2\"',\r\n        googleFontName: 'Baloo Thambi 2:500;700',\r\n        fontSize: '30px'\r\n    }\r\n\r\n};","\r\nimport FontStyleManifest from '../FontStyleManifest';\r\nimport WebFontLoader from 'webfontloader';\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('LoadingScene');\r\n    }\r\n\r\n    preload()\r\n    {\r\n        WebFontLoader.load({\r\n            google: {\r\n                families: [FontStyleManifest.Default.googleFontName]\r\n            }\r\n        });\r\n\r\n        // Images: Tiles\r\n        this.load.image('tile_01', 'assets/images/tile_01.png');\r\n        this.load.image('tile_02', 'assets/images/tile_02.png');\r\n        this.load.image('tile_03', 'assets/images/tile_03.png');\r\n        this.load.image('tile_04', 'assets/images/tile_04.png');\r\n\r\n        // Images: Guide\r\n        this.load.image('guide_character', 'assets/images/guide.png');\r\n\r\n        // Images: Background\r\n        this.load.image('background', [ 'assets/images/background.png', 'assets/images/background_n.png' ]);\r\n\r\n        // Images: Load\r\n        this.load.image('load_start', 'assets/images/load_start.png');\r\n\r\n        // Images: Title\r\n        this.load.image('title', 'assets/images/title.png');\r\n        this.load.image('start', 'assets/images/start.png');\r\n        this.load.image('start-active', 'assets/images/start_active.png');\r\n\r\n        // Images: Round Clear\r\n        this.load.image('round_clear', 'assets/images/round_clear.png');\r\n        this.load.image('round_clear_backdrop', 'assets/images/round_clear_backdrop.png');\r\n\r\n        // Images: Icons\r\n        this.load.image('icon_tile', 'assets/images/icon_tile.png');\r\n        this.load.image('icon_timer', 'assets/images/icon_timer.png');\r\n        this.load.image('icon_timer_warning', 'assets/images/icon_timer_warning.png');\r\n        this.load.image('icon_audio', 'assets/images/icon_audio.png');\r\n        this.load.image('icon_audio_mute', 'assets/images/icon_audio_mute.png');\r\n\r\n        // Images: Expressions\r\n        this.load.image('expression_default', 'assets/images/expression_default.png');\r\n        this.load.image('expression_surprise', 'assets/images/expression_surprise.png');\r\n        this.load.image('expression_sadness', 'assets/images/expression_sadness.png');\r\n        this.load.image('expression_despair', 'assets/images/expression_despair.png');\r\n        this.load.image('expression_glee', 'assets/images/expression_glee.png');\r\n        this.load.image('expression_nervous', 'assets/images/expression_nervous.png');\r\n        this.load.image('expression_confused', 'assets/images/expression_confused.png');\r\n        this.load.image('expression_neutral', 'assets/images/expression_neutral.png');\r\n        this.load.image('expression_amused', 'assets/images/expression_amused.png');\r\n        this.load.image('expression_thoughtful', 'assets/images/expression_thoughtful.png');\r\n\r\n        // Music\r\n        this.load.audio('background_music', 'assets/sounds/background_music.mp3');\r\n\r\n        // Sound Effects\r\n        this.load.audio('match', 'assets/sounds/match.mp3');\r\n        this.load.audio('match_combo_01', 'assets/sounds/match_combo_01.mp3');\r\n        this.load.audio('match_combo_02', 'assets/sounds/match_combo_02.mp3');\r\n        this.load.audio('match_combo_03', 'assets/sounds/match_combo_03.mp3');\r\n        this.load.audio('match_combo_04', 'assets/sounds/match_combo_04.mp3');\r\n        this.load.audio('match_combo_05', 'assets/sounds/match_combo_05.mp3');\r\n        this.load.audio('swap', 'assets/sounds/swap.mp3');\r\n        this.load.audio('tile_select', 'assets/sounds/tile_select.mp3');\r\n        this.load.audio('warning_tick', 'assets/sounds/warning_tick.mp3');\r\n        this.load.audio('timer_run_out', 'assets/sounds/timer_run_out.mp3');\r\n        this.load.audio('lights_off', 'assets/sounds/lights_out.mp3');\r\n        this.load.audio('round_clear', 'assets/sounds/intro_slide.mp3');\r\n        this.load.audio('select', 'assets/sounds/select.mp3');\r\n        this.load.audio('intro_slide', 'assets/sounds/intro_slide.mp3');\r\n        this.load.audio('music_switch', 'assets/sounds/music_switch.mp3');\r\n\r\n        // Loading Graphics\r\n        // Based on: https://gamedevacademy.org/creating-a-preloading-screen-in-phaser-3/\r\n\r\n        const background = this.add.graphics();\r\n        background.fillStyle(0x111111);\r\n        background.fillRect(0, 0, 800, 700);\r\n\r\n        this.progressBox = this.add.graphics();\r\n        this.progressBox.fillStyle(0x222222, 0.8);\r\n        this.progressBox.fillRect(240, 330, 320, 50);\r\n\r\n        const self = this;\r\n        this.progressBar = this.add.graphics();\r\n        this.load.on('progress', function (value) {\r\n            self.progressBar.clear();\r\n            self.progressBar.fillStyle(0xffffff, 0.8);\r\n            self.progressBar.fillRect(250, 340, 300 * value, 30);\r\n        });\r\n    }\r\n\r\n    create()\r\n    {\r\n        this.tweens.add({\r\n            targets: [this.progressBox, this.progressBar],\r\n            alpha: 0,\r\n            duration: 200\r\n        });\r\n\r\n        const self = this;\r\n        this.startBtn = this.add.image(400, 350, 'load_start');\r\n        this.startBtn.setInteractive({ cursor: 'pointer' });\r\n        this.startBtn.setAlpha(0);\r\n        this.startBtn.on('pointerdown', () => {\r\n            self.scene.transition({ target: 'TitleScene', remove: true });\r\n        });\r\n\r\n        this.tweens.add({\r\n            targets: [this.startBtn],\r\n            alpha: 1,\r\n            duration: 200\r\n        });\r\n    }\r\n}","export default {\r\n    None: 0,\r\n    EasyWin: 1,\r\n    Hard: 2,\r\n    PreSet: 3\r\n};","import TileGenerationBehavior from \"./TileGenerationBehavior\";\r\n\r\nexport default [\r\n\r\n    // 0\r\n    {\r\n        score: 50,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 1\r\n    {\r\n        score: 100,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 2\r\n    {\r\n        score: 100,\r\n        timer: 30,\r\n        behavior: TileGenerationBehavior.Hard\r\n    },\r\n\r\n    // 3\r\n    {\r\n        score: 200,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.EasyWin\r\n    },\r\n\r\n    // 4\r\n    {\r\n        score: 250,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.EasyWin\r\n    },\r\n\r\n    // 5\r\n    {\r\n        score: 300,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.Hard\r\n    },\r\n\r\n    // 6\r\n    {\r\n        score: 100,\r\n        timer: 60,\r\n        behavior: TileGenerationBehavior.None,\r\n        blockMatching: true\r\n    },\r\n\r\n    // 7\r\n    {\r\n        score: 30,\r\n        timer: 120,\r\n        behavior: TileGenerationBehavior.PreSet,\r\n        blockMatching: true\r\n    },\r\n\r\n    // 8\r\n    {\r\n        score: 300,\r\n        timer: 180,\r\n        behavior: TileGenerationBehavior.None\r\n    },\r\n\r\n    // 9\r\n    {\r\n        score: Math.Infinity,\r\n        behavior: TileGenerationBehavior.None\r\n    }\r\n];","import LevelManifest from './LevelManifest';\r\nimport TileGenerationBehavior from './TileGenerationBehavior';\r\n\r\nexport default {\r\n\r\n    getScript(level)\r\n    {\r\n        switch(level)\r\n        {\r\n            // Level 0 (Intro)\r\n            case 0:\r\n                \r\n                return [\r\n\r\n                    // Script\r\n                    `*Oh, doozle, you made it!* You're here! (Click or tap anywhere!)`,\r\n                    { do: 'updateGuideExpression', value: 'sadness' },\r\n                    `The Dew Drop Kingdom is in trouble!`,\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `We lost all of our dew drops and now we'll starve!`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    { do: 'dropTiles' },\r\n                    `But you can help us by collecting as many dew drops as you can!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `If you match three or more dew drops of the same color, we can collect them!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    `To make a match, select two dew drops and swap their places!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches >= 1),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `You got it! That's it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                            { do: 'showScoreDisplay' },\r\n                            `See if you can collect *50 dew drops*!`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches > 1),\r\n                        actions: [\r\n                            { do: 'showScoreDisplay' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches === 5),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Wow!* Look at you go!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[0].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Doozle!* You're almost there!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n\r\n                ];\r\n\r\n            // Level 1 (Timer Intro)\r\n            case 1:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Oh, doozle!* You're so good at this!`,\r\n                    { do: 'updateGuideExpression', value: 'nervous' },\r\n                    `But, we'll have to hurry this time!`,\r\n                    { do: 'dropTiles' },\r\n                    `We only have two minutes before the sun dries up all the dew drops!`,\r\n                    { do: 'showTimerDisplay' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `Collect at least *100 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.matches === 5),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Doozle!* What a match!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `You're halfway there! You can do it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `Only *30 seconds* left! You can do this!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic', value: false },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Uhh?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `I think there's been a mix-up.`,\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Did you get the wrong script?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `You're supposed to win this time.`,\r\n                            `Well, whatever, I'm sure we can just fix it up in post.`,\r\n                            `Let's just move onto the next round.`,\r\n                            { do: 'endLevel' },\r\n                            { do: 'resumeBackgroundMusic' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 2 (Breaking the Fourth Wall)\r\n            case 2:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Wow, we're so proud of you!`,\r\n                    `How did you get so goo...`,\r\n                    { do: 'updateGuideExpression', value: 'nervous' },\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Eezle!* That sun is hot!`,\r\n                    `You're going to have to move even quicker this time!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `But we know you can do it!`,\r\n                    `This round you'll only have *30 seconds* to collect *100 dew drops*!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic', value: false },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Wait, wait, sorry, hold on.`,\r\n                            `We're not doing the *\\\"Lose in a Panic\\\"* scenario today.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `So sorry about that.`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `You've been really great so far, honestly.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Let's just go ahead and take it from the top.`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Wait, is that...`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, I think you were supposed to lose here.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Yeah, hmm. This was the *\\\"Lose in a Panic\\\"* scenario.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `You know what, that's fine.`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Let's roll with it.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `We'll just move to the next round.`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 3 (Easy Win)\r\n            case 3:\r\n\r\n                return [\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, I think we've got everything figured out.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, for this next round, let me set you up:`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Remember, you've been winning the last few rounds and you're gaining confidence.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `In this round, it's going to be easy for you to get combos.`,\r\n                    `So you're going to get a little *too* confident, right?`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Like a little full of yourself, yeah?`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, great! Let's do this:`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    \"...\",\r\n                    \"...\",\r\n                    \"...\",\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `*Oh doozle woozle!*`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `You're so amazing!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'dropTiles' },\r\n                    `You have *two minutes* again, but this time you'll have to collect *200 dew drops*.`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Can you do it?`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Who am I kidding? Of course you can!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic', value: false },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Oh, uhh?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, you win this round too.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Uhh, hmm...`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Okay, here's what we'll do:`,\r\n                            { do: 'revokeLevelTransition' },\r\n                            { do: 'updateTimer', value: 1 },\r\n                            { do: 'stopTimer' },\r\n                            { do: 'unblockTileGrid' },\r\n                            { do: 'resumeBackgroundMusic' },\r\n                            `Go ahead and finish out the round and we'll edit it together later.`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.25)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `Look at you go! You're our hero!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.5)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `*Wow!* You're unstoppable!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.75)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Oozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.85)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `*Woozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => (state.score > (LevelManifest[1].score * 0.95)),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `*Doozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 4 (Losing Confidence)\r\n            case 4:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, okay, great stuff.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `For this round, you're bringing all of that pride, all of that hubris.`,\r\n                    `And, when the round starts, things are still going your way.`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `But guess what?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Halfway through this round, things start getting a little harder.`,\r\n                    `So this is where we begin to chip away at your pride as the player.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright, that's your set up: now let me get into the right headspace.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...oh doozle woo-`,\r\n                    `...oh wait...`,\r\n                    `...no, doozy-woozy...`,\r\n                    `...yeah, doozy-woozy, you're our hero...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright! Got it!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Doozy-woozy!*`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `You're our hero!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `You've done so much for us, but we still need your help!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `We need you to collect *250 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.25) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'glee' },\r\n                            `Nothing can stop you!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.5) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            { do: 'updateTileGenerationBehavior', value: TileGenerationBehavior.Hard },\r\n                            `Alright, we're going to crank up that difficulty now.`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.75) },\r\n                        actions: [\r\n                            `Come on! You can do it!`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'pauseBackgroundMusic', value: false },\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'confused' },\r\n                            `Oh, a game over?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `We had a win penciled in here.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `Maybe a game over could work?`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `No, you know what:`,\r\n                            { do: 'revokeLevelTransition' },\r\n                            { do: 'updateTimer', value: 1 },\r\n                            { do: 'stopTimer' },\r\n                            { do: 'unblockTileGrid' },\r\n                            { do: 'resumeBackgroundMusic' },\r\n                            `Just go ahead and finish this off as a win.`\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 5 (Fall From Grace)\r\n            case 5:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Wow, great stuff.`,\r\n                    `I know this is clich, but it really feels so authentic.`,\r\n                    `It's been great working with you. You really sell it.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay, here we go, this is a pivotal scene:`,\r\n                    `This round will not go your way at all. At all.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `This is your fall from grace.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `(Ahem)`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Doozle!*`,\r\n                    `*Woozle!*`,\r\n                    `I can't believe you did it!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `We've got a bigger challenge ahead, but I know you can do it!`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `You can do anything!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `We need you to collect *300 dew drops* in *two minutes*!`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `Oh no!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `*Whoopsie whoozle!*`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `You didn't make it in time!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `It's okay, though!`,\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `It's okay!`,\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                            `You can try again!`,\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        filter: (state) => { return state.score > (LevelManifest[4].score * 0.5) },\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Oh, wait, hold on: you're not supposed to be doing well this round, remember?`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `Hey, I know it can be tough when you get in the flow.`,\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Let's just lock the tiles until the end.`,\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'default' },\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 15),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `You're so close! Don't give up!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 6 (Wallowing)\r\n            case 6:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay, let's move right into the next scene:`,\r\n                    `Here, you are wallowing, right?`,\r\n                    `You are in the pit of despair and you can't see a way out.`,\r\n                    `This round won't be particularly hard, but you can't seem to find any matches.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Got it?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, great: let me find my place here...`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...yes, yes, my faith is faltering...`,\r\n                    `...keeping a brave face...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Okay, I'm ready!`,\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `Don't worry, that was a tough one!`,\r\n                    { do: 'dropTiles' },\r\n                    `Let's try again! We believe in you!`,\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `We know you can do it!`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n                    `This time, you just need to get *100 dew drops* in *one minute!*`,\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'swap',\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Hey, remember: you don't get any matches this round.`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 45),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `Don't worry! You can do it!`,\r\n                            { do: 'updateGuideExpression', value: 'default' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'nervous' },\r\n                            `You just need to get a few matches!`,\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks < 15),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `Please, we're running out of time!`,\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'gameOver',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'updateGuideExpression', value: 'surprise' },\r\n                            `Oh no!`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `*Eezle weezle!*`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `You didn't collect any dew drops!`,\r\n                            { do: 'updateGuideExpression', value: 'despair' },\r\n                            `We'll starve!`,\r\n                            { do: 'updateGuideExpression', value: 'sadness' },\r\n                            `*Please!* You have to save us!`,\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 7 (Pheonix Rises)\r\n            case 7:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Wow, I'm really feeling it.`,\r\n                    `How about you?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright, next up:`,\r\n                    `You've been wallowing.`,\r\n                    `You're feeling really low.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `And, you're in such despair, that in this round...`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `There's an obvious combo.`,\r\n                    `Right there, right in front of your face.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `But you can't see it through the despair.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `But then, in the last 30 seconds of the round, you see it!`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `The perfect match.`,\r\n                    `And the pheonix rises once again!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Alright! Here we go!`,\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `Oh, boozle...`,\r\n                    `What will we do?`,\r\n                    { do: 'updateGuideExpression', value: 'sadness' },\r\n                    `Please, you're our only hope!`,\r\n                    { do: 'updateGuideExpression', value: 'despair' },\r\n                    `We have one more chance...`,\r\n                    { do: 'dropTiles' },\r\n                    `Please! Save our kingdom! Just get *30 dew drops* in *two minutes*!`,\r\n                    { do: 'unblockTileGrid' },\r\n                    { do: 'startTimer' },\r\n\r\n                    // Events\r\n                    {\r\n                        on: 'swap',\r\n                        filter: (state) => (state.ticks > 30 && state.isBlockingMatches),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            `Hold on, it's not time to swap yet.`,\r\n                            `Wait until there's only *30 seconds* left.`,\r\n                            { do: 'updateGuideExpression', value: 'despair' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'tick',\r\n                        filter: (state) => (state.ticks <= 30),\r\n                        actions: [\r\n                            { do: 'updateGuideExpression', value: 'neutral' },\r\n                            { do: 'stopTimer' },\r\n                            `Alright, here we go.`,\r\n                            `Just to make sure we get this right, we'll stop the timer.`,\r\n                            { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                            `And we'll highlight the match you'll want to make.`,\r\n                            { do: 'blockTileGrid', value: [ [9, 2], [9, 3] ] },\r\n                            { do: 'updateGuideExpression', value: 'amused' },\r\n                            `And the rest is up to you!`,\r\n                            { do: 'revokeBlockMatching' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'swap',\r\n                        filter: (state) => (!state.isBlockingMatches),\r\n                        actions: [\r\n                            { do: 'unblockTileGrid' }\r\n                        ]\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Level 8 (Victory Lap)\r\n            case 8:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Hey, our hero is back!`,\r\n                    `Very moving work.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Okay: this next scene is the last one.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `It's your victory lap.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `To sell this one, we really need to get the pacing right.`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `We want you getting a steady flow of matches the whole time.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `If you win too early, it's no fun to watch, you know?`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `But don't worry, we got your back.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `We'll just advance the timer as you get matches, yeah?`,\r\n                    `And then we can edit it all together later.`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Alright! Let's wrap this up!`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    `...`,\r\n                    `...`,\r\n                    `...`,\r\n                    { do: 'resumeBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `*Oh doozie woozie!*`,\r\n                    { do: 'updateGuideExpression', value: 'default' },\r\n                    `I knew you could do it!`,\r\n                    `You're our hero!`,\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'surprise' },\r\n                    `*Oozle!*`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'glee' },\r\n                    `Look at all of those dew drops!`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Now's our chance!`,\r\n                    `If you can gather up a big haul, we can save the kingdom!`,\r\n                    `I know it's a lot to ask, but please help us one more time!`,\r\n                    `*300 dew drops* in *3 minutes!*`,\r\n                    { do: 'unblockTileGrid' },\r\n\r\n                    {\r\n                        on: 'match',\r\n                        actions: [\r\n                            { do: 'updateTimerRelativeToScore' }\r\n                        ],\r\n                        persist: true\r\n                    },\r\n\r\n                    {\r\n                        on: 'win',\r\n                        actions: [\r\n                            { do: 'blockTileGrid' },\r\n                            { do: 'endLevel' }\r\n                        ]\r\n                    }\r\n                ];\r\n\r\n            // Epilogue\r\n            case 9:\r\n\r\n                return [\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `And that's a wrap!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `I think it went pretty well today, right?`,\r\n                    { do: 'updateGuideExpression', value: 'thoughtful' },\r\n                    { do: 'hideScoreDisplay' },\r\n                    `Huh?`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `Oh, looks like they're shutting things down.`,\r\n                    `...`,\r\n                    `...`,\r\n                    `So, any-`,\r\n                    { do: 'dropTiles' },\r\n                    { do: 'updateGuideExpression', value: 'confused' },\r\n                    `Oh, whoops, tiles must have dropped on accident.`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    `...`,\r\n                    `Yeah, so, anyway.`,\r\n                    `I've gotta head out.`,\r\n                    `...`,\r\n                    { do: 'updateGuideExpression', value: 'amused' },\r\n                    `Nice working with you today!`,\r\n                    { do: 'updateGuideExpression', value: 'neutral' },\r\n                    `...`,\r\n                    { do: 'hideGuide' },\r\n                    { do: 'unblockTileGrid' },\r\n                    { wait: 30000 },\r\n                    { do: 'pauseBackgroundMusic' },\r\n                    { wait: 30000 },\r\n                    { do: 'turnOffLights' }\r\n                ];\r\n        }\r\n    }\r\n\r\n}","export default class {\r\n\r\n    constructor()\r\n    {\r\n        this.subscriptions = [];\r\n    }\r\n\r\n    on(eventName, filter, callback, persist)\r\n    {\r\n        this.subscriptions.push({ eventName, filter, callback, persist });\r\n    }\r\n\r\n    emit(eventName)\r\n    {\r\n        this.subscriptions\r\n            .filter(subscription => subscription.eventName === eventName)\r\n            .filter(subscription => subscription.filter === null || subscription.filter())\r\n            .forEach(subscription => {\r\n                subscription.callback && subscription.callback();\r\n\r\n                if(subscription.persist)\r\n                {\r\n                    return;\r\n                }\r\n\r\n                subscription.callback = null;\r\n            });\r\n    }\r\n}","import WebGLRenderer from './WebGLRenderer.js';\r\nimport CanvasRenderer from './CanvasRenderer.js';\r\n\r\nexport default {\r\n    renderWebGL: WebGLRenderer,\r\n    renderCanvas: CanvasRenderer\r\n\r\n};","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2018 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\r\n\r\n/**\r\n * Calculates the ascent, descent and fontSize of a given font style.\r\n *\r\n * @function Phaser.GameObjects.Text.MeasureText\r\n * @since 3.0.0\r\n *\r\n * @param {Phaser.GameObjects.Text.TextStyle} textStyle - The TextStyle object to measure.\r\n *\r\n * @return {object} An object containing the ascent, descent and fontSize of the TextStyle.\r\n */\r\nvar MeasureText = function (textStyle) {\r\n    // @property {HTMLCanvasElement} canvas - The canvas element that the text is rendered.\r\n    var canvas = CanvasPool.create(this);\r\n\r\n    // @property {HTMLCanvasElement} context - The context of the canvas element that the text is rendered to.\r\n    var context = canvas.getContext('2d');\r\n\r\n    textStyle.syncFont(canvas, context);\r\n\r\n    var width = Math.ceil(context.measureText(textStyle.testString).width * textStyle.baselineX);\r\n    var baseline = width;\r\n    var height = 2 * baseline;\r\n\r\n    baseline = baseline * textStyle.baselineY | 0;\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    context.fillStyle = '#f00';\r\n    context.fillRect(0, 0, width, height);\r\n\r\n    context.font = textStyle._font;\r\n\r\n    context.textBaseline = 'alphabetic';\r\n    context.fillStyle = '#000';\r\n    context.fillText(textStyle.testString, 0, baseline);\r\n\r\n    var output = {\r\n        ascent: 0,\r\n        descent: 0,\r\n        fontSize: 0\r\n    };\r\n\r\n    if (!context.getImageData(0, 0, width, height)) {\r\n        output.ascent = baseline;\r\n        output.descent = baseline + 6;\r\n        output.fontSize = output.ascent + output.descent;\r\n\r\n        CanvasPool.remove(canvas);\r\n\r\n        return output;\r\n    }\r\n\r\n    var imagedata = context.getImageData(0, 0, width, height).data;\r\n    var pixels = imagedata.length;\r\n    var line = width * 4;\r\n    var i;\r\n    var j;\r\n    var idx = 0;\r\n    var stop = false;\r\n\r\n    // ascent. scan from top to bottom until we find a non red pixel\r\n    for (i = 0; i < baseline; i++) {\r\n        for (j = 0; j < line; j += 4) {\r\n            if (imagedata[idx + j] !== 255) {\r\n                stop = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!stop) {\r\n            idx += line;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    output.ascent = baseline - i;\r\n\r\n    idx = pixels - line;\r\n    stop = false;\r\n\r\n    // descent. scan from bottom to top until we find a non red pixel\r\n    for (i = height; i > baseline; i--) {\r\n        for (j = 0; j < line; j += 4) {\r\n            if (imagedata[idx + j] !== 255) {\r\n                stop = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!stop) {\r\n            idx -= line;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    output.descent = (i - baseline);\r\n    output.fontSize = output.ascent + output.descent;\r\n\r\n    CanvasPool.remove(canvas);\r\n\r\n    return output;\r\n};\r\n\r\nexport default MeasureText;","var CONST = {\r\n    // new line mode\r\n    NO_NEWLINE: 0,\r\n    RAW_NEWLINE: 1,\r\n    WRAPPED_NEWLINE: 2,\r\n\r\n    // wrap mode\r\n    NO_WRAP: 0,\r\n    WORD_WRAP: 1,\r\n    CHAR_WRAP: 2,\r\n\r\n    // split lines\r\n    SPLITREGEXP: /(?:\\r\\n|\\r|\\n)/\r\n};\r\n\r\nexport default CONST;","/**\r\n * @author       Richard Davey <rich@photonstorm.com>\r\n * @copyright    2018 Photon Storm Ltd.\r\n * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}\r\n */\r\n\r\nimport MeasureText from './MeasureText.js';\r\nimport CONST from '../const.js';\r\n\r\nconst GetAdvancedValue = Phaser.Utils.Objects.GetAdvancedValue;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\n//  Key: [ Object Key, Default Value ]\r\n\r\n/**\r\n * A custom function that will be responsible for wrapping the text.\r\n * @callback TextStyleWordWrapCallback\r\n *\r\n * @param {string} text - The string to wrap.\r\n * @param {Phaser.GameObjects.Text} textObject - The Text instance.\r\n *\r\n * @return {(string|string[])} Should return the wrapped lines either as an array of lines or as a string with\r\n * newline characters in place to indicate where breaks should happen.\r\n */\r\n\r\nvar propertyMap = {\r\n    // background\r\n    backgroundColor: ['backgroundColor', null],\r\n\r\n    // font\r\n    fontFamily: ['fontFamily', 'Courier'],\r\n    fontSize: ['fontSize', '16px'],\r\n    fontStyle: ['fontStyle', ''],\r\n    color: ['color', '#fff'],\r\n    stroke: ['stroke', '#fff'],\r\n    strokeThickness: ['strokeThickness', 0],\r\n    shadowOffsetX: ['shadow.offsetX', 0],\r\n    shadowOffsetY: ['shadow.offsetY', 0],\r\n    shadowColor: ['shadow.color', '#000'],\r\n    shadowBlur: ['shadow.blur', 0],\r\n    shadowStroke: ['shadow.stroke', false],\r\n    shadowFill: ['shadow.fill', false],\r\n\r\n    // underline\r\n    underlineColor: ['underline.color', '#000'],\r\n    underlineThickness: ['underline.thickness', 0],\r\n    underlineOffset: ['underline.offset', 0],\r\n\r\n    // align\r\n    halign: ['halign', 'left'],\r\n    valign: ['valign', 'top'],\r\n\r\n    // size\r\n    maxLines: ['maxLines', 0],\r\n    fixedWidth: ['fixedWidth', 0],\r\n    fixedHeight: ['fixedHeight', 0],\r\n    resolution: ['resolution', 0],\r\n    lineSpacing: ['lineSpacing', 0],\r\n\r\n    rtl: ['rtl', false],\r\n    testString: ['testString', '|Mqgy'],\r\n    baselineX: ['baselineX', 1.2],\r\n    baselineY: ['baselineY', 1.4],\r\n\r\n    // wrap\r\n    wrapMode: ['wrap.mode', 1],\r\n    wrapWidth: ['wrap.width', 0]\r\n    //wrapCallback: ['wrap.callback', null],\r\n    //wrapCallbackScope: ['wrap.callbackScope', null]\r\n};\r\n\r\nclass TextStyle {\r\n    constructor(text, style) {\r\n        this.parent = text;\r\n\r\n        this.backgroundColor;\r\n\r\n        this.fontFamily;\r\n        this.fontSize;\r\n        this.fontStyle;\r\n        this.color;\r\n        this.stroke;\r\n        this.strokeThickness;\r\n        this.shadowOffsetX;\r\n        this.shadowOffsetY;\r\n        this.shadowColor;\r\n        this.shadowBlur;\r\n        this.shadowStroke;\r\n        this.shadowFill;\r\n\r\n        this.underlineColor;\r\n        this.underlineThickness;\r\n        this.underlineOffset;\r\n\r\n        this.halign;\r\n        this.valign;\r\n\r\n        this.maxLines;\r\n        this.fixedWidth;\r\n        this.fixedHeight;\r\n        this.resolution;\r\n        this.lineSpacing;\r\n\r\n        this.rtl;\r\n        this.testString;\r\n\r\n\r\n        this.baselineX;\r\n        this.baselineY;\r\n\r\n        this._font;\r\n\r\n        //  Set to defaults + user style\r\n        this.setStyle(style, false);\r\n\r\n        var metrics = GetValue(style, 'metrics', false);\r\n\r\n        //  Provide optional TextMetrics in the style object to avoid the canvas look-up / scanning\r\n        //  Doing this is reset if you then change the font of this TextStyle after creation\r\n        if (metrics) {\r\n            this.metrics = {\r\n                ascent: GetValue(metrics, 'ascent', 0),\r\n                descent: GetValue(metrics, 'descent', 0),\r\n                fontSize: GetValue(metrics, 'fontSize', 0)\r\n            };\r\n        } else {\r\n            this.metrics = MeasureText(this);\r\n        }\r\n    }\r\n\r\n    setStyle(style, updateText) {\r\n        if (updateText === undefined) {\r\n            updateText = true;\r\n        }\r\n\r\n        if (style && style.hasOwnProperty('wrap')) {\r\n            var wrap = style.wrap;\r\n            if (wrap.hasOwnProperty('mode')) {\r\n                var mode = wrap.mode;\r\n                if (typeof mode === 'string') {\r\n                    wrap.mode = WRAPMODE[mode];\r\n                }\r\n            } else {\r\n                if (wrap.hasOwnProperty('width')) {\r\n                    wrap.mode = 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        //  Avoid type mutation\r\n        if (style && style.hasOwnProperty('fontSize') && typeof style.fontSize === 'number') {\r\n            style.fontSize = style.fontSize.toString() + 'px';\r\n        }\r\n\r\n        for (var key in propertyMap) {\r\n            if (key === 'wrapCallback' || key === 'wrapCallbackScope') {\r\n                // Callback & scope should be set without processing the values\r\n                this[key] = GetValue(style, propertyMap[key][0], propertyMap[key][1]);\r\n            } else {\r\n                this[key] = GetAdvancedValue(style, propertyMap[key][0], propertyMap[key][1]);\r\n            }\r\n        }\r\n\r\n        //  Allow for 'font' override\r\n        var font = GetValue(style, 'font', null);\r\n\r\n        if (font === null) {\r\n            this._font = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n        } else {\r\n            this._font = font;\r\n        }\r\n\r\n        //  Allow for 'fill' to be used in place of 'color'\r\n        var fill = GetValue(style, 'fill', null);\r\n\r\n        if (fill !== null) {\r\n            this.color = fill;\r\n        }\r\n\r\n        if (updateText) {\r\n            return this.update(true);\r\n        } else {\r\n            return this.parent;\r\n        }\r\n    }\r\n\r\n    syncFont(canvas, context) {\r\n        context.font = this._font;\r\n    }\r\n\r\n    syncStyle(canvas, context) {\r\n        context.textBaseline = 'alphabetic';\r\n\r\n        context.fillStyle = this.color;\r\n        context.strokeStyle = this.stroke;\r\n\r\n        context.lineWidth = this.strokeThickness;\r\n        context.lineCap = 'round';\r\n        context.lineJoin = 'round';\r\n    }\r\n\r\n    syncShadow(context, enabled) {\r\n        if (enabled) {\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n        } else {\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n            context.shadowColor = 0;\r\n            context.shadowBlur = 0;\r\n        }\r\n    }\r\n\r\n    update(recalculateMetrics) {\r\n        if (recalculateMetrics) {\r\n            this._font = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n\r\n            this.metrics = MeasureText(this);\r\n        }\r\n\r\n        return this.parent.updateText(recalculateMetrics);\r\n    }\r\n\r\n    buildFont() {\r\n        var newFont = this.fontStyle + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n        if (newFont !== this._font) {\r\n            this._font = newFont;\r\n            //this.metrics = MeasureText(this);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    setFont(font) {\r\n        if (typeof font === 'string') {\r\n            this.fontFamily = font;\r\n            this.fontSize = '';\r\n            this.fontStyle = '';\r\n        } else {\r\n            this.fontFamily = GetValue(font, 'fontFamily', 'Courier');\r\n            this.fontSize = GetValue(font, 'fontSize', '16px');\r\n            this.fontStyle = GetValue(font, 'fontStyle', '');\r\n        }\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontFamily(family) {\r\n        this.fontFamily = family;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontStyle(style) {\r\n        this.fontStyle = style;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFontSize(size) {\r\n        if (typeof size === 'number') {\r\n            size = size.toString() + 'px';\r\n        }\r\n\r\n        this.fontSize = size;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setTestString(string) {\r\n        this.testString = string;\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setFixedSize(width, height) {\r\n        this.fixedWidth = width;\r\n        this.fixedHeight = height;\r\n\r\n        if (width) {\r\n            this.parent.width = width;\r\n        }\r\n\r\n        if (height) {\r\n            this.parent.height = height;\r\n        }\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setResolution(value) {\r\n        this.resolution = value;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setLineSpacing(value) {\r\n        this.lineSpacing = value;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setBackgroundColor(color) {\r\n        this.backgroundColor = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setFill(color) {\r\n        this.color = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setColor(color) {\r\n        this.color = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setStroke(color, thickness) {\r\n        if (color === undefined) {\r\n            //  Reset the stroke to zero (disabling it)\r\n            this.strokeThickness = 0;\r\n        } else {\r\n            if (thickness === undefined) {\r\n                thickness = this.strokeThickness;\r\n            }\r\n\r\n            this.stroke = color;\r\n            this.strokeThickness = thickness;\r\n        }\r\n\r\n        return this.update(true);\r\n    }\r\n\r\n    setShadow(x, y, color, blur, shadowStroke, shadowFill) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n        if (blur === undefined) {\r\n            blur = 0;\r\n        }\r\n        if (shadowStroke === undefined) {\r\n            shadowStroke = false;\r\n        }\r\n        if (shadowFill === undefined) {\r\n            shadowFill = true;\r\n        }\r\n\r\n        this.shadowOffsetX = x;\r\n        this.shadowOffsetY = y;\r\n        this.shadowColor = color;\r\n        this.shadowBlur = blur;\r\n        this.shadowStroke = shadowStroke;\r\n        this.shadowFill = shadowFill;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowOffset(x, y) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = x;\r\n        }\r\n\r\n        this.shadowOffsetX = x;\r\n        this.shadowOffsetY = y;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowColor(color) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n\r\n        this.shadowColor = color;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowBlur(blur) {\r\n        if (blur === undefined) {\r\n            blur = 0;\r\n        }\r\n\r\n        this.shadowBlur = blur;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowStroke(enabled) {\r\n        this.shadowStroke = enabled;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setShadowFill(enabled) {\r\n        this.shadowFill = enabled;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderline(color, thickness, offset) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n        if (thickness === undefined) {\r\n            thickness = 0;\r\n        }\r\n        if (offset === undefined) {\r\n            offset = 0;\r\n        }\r\n\r\n        this.underlineColor = color;\r\n        this.underlineThickness = thickness;\r\n        this.underlineOffset = offset;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineColor(color) {\r\n        if (color === undefined) {\r\n            color = '#000';\r\n        }\r\n\r\n        this.underlineColor = color;\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineThickness(thickness) {\r\n        if (thickness === undefined) {\r\n            thickness = 0;\r\n        }\r\n\r\n        this.underlineThickness = thickness;\r\n        return this.update(false);\r\n    }\r\n\r\n    setUnderlineOffset(offset) {\r\n        if (offset === undefined) {\r\n            offset = 0;\r\n        }\r\n\r\n        this.underlineOffset = offset;\r\n        return this.update(false);\r\n    }\r\n\r\n    setWrapMode(mode) {\r\n        if (typeof mode === 'string') {\r\n            mode = WRAPMODE[mode.toLowerCase()] || 0;\r\n        }\r\n        this.wrapMode = mode;\r\n        return this.update(true);\r\n    }\r\n\r\n    setWrapWidth(width) {\r\n        this.wrapWidth = width;\r\n        return this.update(false);\r\n    }\r\n\r\n    setAlign(halign, valign) {\r\n        if (halign === undefined) {\r\n            halign = 'left';\r\n        }\r\n        if (valign === undefined) {\r\n            valign = 'top';\r\n        }\r\n        this.halign = halign;\r\n        this.valign = valign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setHAlign(halign) {\r\n        if (halign === undefined) {\r\n            halign = 'left';\r\n        }\r\n        this.halign = halign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setVAlign(valign) {\r\n        if (valign === undefined) {\r\n            valign = 'top';\r\n        }\r\n        this.valign = valign;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    setMaxLines(max) {\r\n        if (max === undefined) {\r\n            max = 0;\r\n        }\r\n\r\n        this.maxLines = max;\r\n\r\n        return this.update(false);\r\n    }\r\n\r\n    getTextMetrics() {\r\n        var metrics = this.metrics;\r\n\r\n        return {\r\n            ascent: metrics.ascent,\r\n            descent: metrics.descent,\r\n            fontSize: metrics.fontSize\r\n        };\r\n    }\r\n\r\n    get lineHeight() {\r\n        return this.metrics.fontSize + this.strokeThickness + this.lineSpacing;\r\n    }\r\n\r\n    toJSON() {\r\n        var output = {};\r\n\r\n        for (var key in propertyMap) {\r\n            output[key] = this[key];\r\n        }\r\n\r\n        output.metrics = this.getTextMetrics();\r\n\r\n        return output;\r\n    }\r\n\r\n    destroy() {\r\n        this.parent = undefined;\r\n    }\r\n\r\n}\r\n\r\nconst HALIGNMODE = {\r\n    left: CONST.hleft,\r\n    center: CONST.hcenter,\r\n    right: CONST.hright,\r\n};\r\nconst VALIGNMODE = {\r\n    top: CONST.vtop,\r\n    center: CONST.vcenter,\r\n    bottom: CONST.vbottom,\r\n};\r\nconst WRAPMODE = {\r\n    none: CONST.NO_WRAP,\r\n    word: CONST.WORD_WRAP,\r\n    char: CONST.CHAR_WRAP,\r\n    character: CONST.CHAR_WRAP\r\n};\r\n\r\nexport default TextStyle;","export default {\r\n    draw(startX, startY, boxWidth, boxHeight) {\r\n        var penManager = this.penManager;\r\n        this.hitAreaManager.clear();\r\n\r\n        var context = this.context;\r\n        context.save();\r\n\r\n        // this.clear();\r\n        this.drawBackground(this.defatultStyle.backgroundColor);\r\n\r\n        // draw lines\r\n        var defatultStyle = this.defatultStyle;\r\n        startX += this.startXOffset;\r\n        startY += this.startYOffset;\r\n        var halign = defatultStyle.halign,\r\n            valign = defatultStyle.valign;\r\n\r\n        var lineWidth, lineHeight = defatultStyle.lineHeight;\r\n        var lines = penManager.lines;\r\n        var totalLinesNum = lines.length,\r\n            maxLines = defatultStyle.maxLines;\r\n        var drawLinesNum, drawLineStartIdx, drawLineEndIdx;\r\n        if ((maxLines > 0) && (totalLinesNum > maxLines)) {\r\n            drawLinesNum = maxLines;\r\n            if (valign === 'center') { // center\r\n                drawLineStartIdx = Math.floor((totalLinesNum - drawLinesNum) / 2);\r\n            } else if (valign === 'bottom') { // bottom\r\n                drawLineStartIdx = totalLinesNum - drawLinesNum;\r\n            } else {\r\n                drawLineStartIdx = 0;\r\n            }\r\n        } else {\r\n            drawLinesNum = totalLinesNum;\r\n            drawLineStartIdx = 0;\r\n        }\r\n        drawLineEndIdx = drawLineStartIdx + drawLinesNum;\r\n\r\n        var offsetX, offsetY;\r\n        if (valign === 'center') { // center\r\n            offsetY = Math.max((boxHeight - (drawLinesNum * lineHeight)) / 2, 0);\r\n        } else if (valign === 'bottom') { // bottom\r\n            offsetY = Math.max(boxHeight - (drawLinesNum * lineHeight) - 2, 0);\r\n        } else {\r\n            offsetY = 0;\r\n        }\r\n        offsetY += startY;\r\n        for (var lineIdx = drawLineStartIdx; lineIdx < drawLineEndIdx; lineIdx++) {\r\n            lineWidth = penManager.getLineWidth(lineIdx);\r\n            if (lineWidth === 0) {\r\n                continue;\r\n            }\r\n\r\n            if (halign === 'center') { // center\r\n                offsetX = (boxWidth - lineWidth) / 2;\r\n            } else if (halign === 'right') { // right\r\n                offsetX = boxWidth - lineWidth;\r\n            } else {\r\n                offsetX = 0;\r\n            }\r\n            offsetX += startX;\r\n\r\n            var pens = lines[lineIdx];\r\n            for (var penIdx = 0, pensLen = pens.length; penIdx < pensLen; penIdx++) {\r\n                this.drawPen(pens[penIdx], offsetX, offsetY);\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    },\r\n\r\n    drawPen(pen, offsetX, offsetY) {\r\n        offsetX += pen.x;\r\n        offsetY += pen.y;\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n        context.save();\r\n\r\n        var curStyle = this.parser.propToContextStyle(\r\n            this.defatultStyle,\r\n            pen.prop\r\n        );\r\n        curStyle.buildFont();\r\n        curStyle.syncFont(canvas, context);\r\n        curStyle.syncStyle(canvas, context);\r\n\r\n        // Underline\r\n        if ((curStyle.underlineThickness > 0) && (pen.width > 0)) {\r\n            this.drawUnderline(offsetX, offsetY, pen.width, curStyle);\r\n        }\r\n\r\n        // Text\r\n        if (pen.isTextPen) {\r\n            this.drawText(offsetX, offsetY, pen.text, curStyle);\r\n        }\r\n\r\n        // Image\r\n        if (pen.isImagePen) {\r\n            this.drawImage(offsetX, offsetY, pen.prop.img, curStyle);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        if (pen.hasAreaMarker && (pen.width > 0)) {\r\n            this.hitAreaManager.add(\r\n                pen.prop.area, // key\r\n                offsetX, // x\r\n                (offsetY - this.startYOffset), // y\r\n                pen.width, // width\r\n                this.defatultStyle.lineHeight // height\r\n            );\r\n        }\r\n    },\r\n\r\n    clear() {\r\n        var canvas = this.canvas;\r\n        this.context.clearRect(0, 0, canvas.width, canvas.height);\r\n    },\r\n\r\n    drawBackground(color) {\r\n        if (color === null) {\r\n            return;\r\n        }\r\n        this.context.fillStyle = color;\r\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    },\r\n\r\n    drawUnderline(x, y, width, style) {\r\n        y += style.underlineOffset - (style.underlineThickness / 2);\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        var savedLineCap = context.lineCap;\r\n        context.lineCap = 'butt';\r\n        context.beginPath();\r\n        context.strokeStyle = style.underlineColor;\r\n        context.lineWidth = style.underlineThickness;\r\n        context.moveTo(x, y);\r\n        context.lineTo((x + width), y);\r\n        context.stroke();\r\n        context.lineCap = savedLineCap;\r\n    },\r\n\r\n    drawText(x, y, text, style) {\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        if (style.strokeThickness) {\r\n            style.syncShadow(context, style.shadowStroke);\r\n            context.strokeText(text, x, y);\r\n        }\r\n\r\n        if (style.color && (style.color !== 'none')) {\r\n            style.syncShadow(context, style.shadowFill);\r\n            context.fillText(text, x, y);\r\n        }\r\n    },\r\n\r\n    drawImage(x, y, imgKey, style) {\r\n        var imageManager = this.parent.imageManager;\r\n        var imgData = imageManager.get(imgKey);\r\n        var frame = imageManager.getFrame(imgKey);\r\n\r\n        x += imgData.left;\r\n        y += - this.startYOffset + imgData.y;\r\n        if (this.autoRound) {\r\n            x = Math.round(x);\r\n            y = Math.round(y);\r\n        }\r\n\r\n        var context = this.context;\r\n        context.drawImage(\r\n            frame.source.image,\r\n            frame.cutX, frame.cutY, frame.cutWidth, frame.cutHeight,\r\n            x, y, imgData.width, imgData.height\r\n        );\r\n    }\r\n\r\n}","class Stack {\r\n    constructor() {\r\n        this.items = [];\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.items = undefined;\r\n    }\r\n\r\n    pop() {\r\n        return (this.items.length > 0) ? this.items.pop() : null;\r\n    }\r\n\r\n    push(l) {\r\n        this.items.push(l);\r\n        return this;\r\n    }\r\n\r\n    pushMultiple(arr) {\r\n        this.items.push.apply(this.items, arr);\r\n        arr.length = 0;\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.items.length = 0;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default Stack;","import Pool from './utils/struct/Stack.js';\r\nexport default Pool;","import CONST from '../const.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst RAW_NEWLINE = CONST.RAW_NEWLINE;\r\n\r\nclass Pen {\r\n    constructor(config) {\r\n        this.prop = {};\r\n        this.resetFromJSON(config);\r\n    }\r\n\r\n    resetFromJSON(o) { // (txt, x, y, width, prop, newLineMode, startIndex)\r\n        this.text = GetValue(o, 'text', '');\r\n        this.x = GetValue(o, 'x', 0);\r\n        this.y = GetValue(o, 'y', 0);\r\n        this.width = GetValue(o, 'width', 0);\r\n\r\n        var prop = GetValue(o, 'prop', null);\r\n        if (prop === null) {\r\n            prop = {};\r\n        }\r\n        this.prop = prop;\r\n        this.newLineMode = GetValue(o, 'newLineMode', 0);\r\n        this.startIndex = GetValue(o, 'startIndex', 0);\r\n    }\r\n\r\n    get plainText() {\r\n        var txt = this.text\r\n        if (this.newLineMode === RAW_NEWLINE) {\r\n            txt += \"\\n\";\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get wrapText() {\r\n        var txt = this.text;\r\n        if (this.newLineMode !== NO_NEWLINE) {\r\n            txt += \"\\n\";\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get rawTextLength() {\r\n        var len = this.text.length;\r\n        if (this.newLineMode === RAW_NEWLINE) {\r\n            len += 1;\r\n        }\r\n        return len;\r\n    }\r\n\r\n    get endIndex() {\r\n        return this.startIndex + this.rawTextLength;\r\n    }\r\n\r\n    get lastX() {\r\n        return this.x + this.width;\r\n    }\r\n\r\n    get isTextPen() {\r\n        return (this.text !== '');\r\n    }\r\n\r\n    get isImagePen() {\r\n        return !!this.prop.img;\r\n    }\r\n\r\n    get hasAreaMarker() {\r\n        return !!this.prop.area;\r\n    }\r\n};\r\n\r\nexport default Pen;","var Clear = function (obj) {\r\n    if (Array.isArray(obj)) {\r\n        obj.length = 0;\r\n    } else {\r\n        for (var key in obj) {\r\n            delete obj[key];\r\n        }\r\n    }\r\n}\r\nexport default Clear;","import Clear from './Clear.js';\r\n\r\n/**\r\n * Shallow Object Clone. Will not out nested objects.\r\n * @param {object} obj JSON object\r\n * @param {object} ret JSON object to return, set null to return a new object\r\n * @returns {object} this object\r\n */\r\nvar Clone = function (obj, out) {\r\n    var objIsArray = Array.isArray(obj);\r\n\r\n    if (out === undefined) {\r\n        out = (objIsArray) ? [] : {};\r\n    } else {\r\n        Clear(out);\r\n    }\r\n\r\n    if (objIsArray) {\r\n        out.length = obj.length;\r\n        for (var i = 0, cnt = obj.length; i < cnt; i++) {\r\n            out[i] = obj[i];\r\n        }\r\n    } else {\r\n        for (var key in obj) {\r\n            out[key] = obj[key];\r\n        }\r\n    }\r\n\r\n    return out;\r\n};\r\n\r\nexport default Clone;\r\n","var NOOP = function () {\r\n    //  NOOP\r\n};\r\n\r\nexport default NOOP;","import Pool from '../../../../pool.js';\r\nimport Pen from './Pen.js';\r\nimport CONST from '../const.js';\r\nimport Clone from '../../../../utils/object/Clone.js';\r\nimport NOOP from '../../../../utils/object/NOOP.js';\r\n\r\nconst GetFastValue = Phaser.Utils.Objects.GetFastValue;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst WRAPPED_NEWLINE = CONST.WRAPPED_NEWLINE;\r\n\r\nvar PensPool = new Pool(); // default pens pool\r\nvar LinesPool = new Pool(); // default lines pool\r\nclass PenManager {\r\n    constructor(config) {\r\n        this.pens = []; // all pens\r\n        this.lines = []; // pens in lines [ [],[],[],.. ]\r\n        this.maxLinesWidth = undefined;\r\n\r\n        this.PensPool = GetFastValue(config, 'pensPool', PensPool);\r\n        this.LinesPool = GetFastValue(config, 'linesPool', LinesPool);\r\n        this.tagToText = GetFastValue(config, 'tagToText', NOOP);\r\n        this.tagToTextScope = GetFastValue(config, 'tagToTextScope', undefined);\r\n    }\r\n\r\n    destroy() {\r\n        this.freePens();\r\n        this.tagToText = undefined;\r\n        this.tagToTextScope = undefined;\r\n    }\r\n\r\n    freePens() {\r\n        for (var i = 0, len = this.lines.length; i < len; i++)\r\n            this.lines[i].length = 0;\r\n\r\n        this.PensPool.pushMultiple(this.pens);\r\n        this.LinesPool.pushMultiple(this.lines);\r\n        this.maxLinesWidth = undefined;\r\n    }\r\n\r\n    addTextPen(text, x, y, width, prop, newLineMode) {\r\n        var pen = this.PensPool.pop();\r\n        if (pen == null) {\r\n            pen = new Pen();\r\n        }\r\n        PEN_CONFIG.text = text;\r\n        PEN_CONFIG.x = x;\r\n        PEN_CONFIG.y = y;\r\n        PEN_CONFIG.width = width;\r\n        PEN_CONFIG.prop = prop;\r\n        PEN_CONFIG.newLineMode = newLineMode;\r\n        pen.resetFromJSON(PEN_CONFIG);\r\n        this.addPen(pen);\r\n        return this;\r\n    }\r\n\r\n    addImagePen(x, y, width, prop) {\r\n        this.addTextPen('', x, y, width, prop, NO_NEWLINE);\r\n        return this;\r\n    }\r\n\r\n    addNewLinePen() {\r\n        var previousPen = this.lastPen;\r\n        var x = (previousPen) ? previousPen.lastX : 0;\r\n        var y = (previousPen) ? previousPen.y : 0;\r\n        var prop = (previousPen) ? Clone(previousPen.prop) : null;\r\n        this.addTextPen('', x, y, 0, prop, WRAPPED_NEWLINE);\r\n        return this;\r\n    }\r\n\r\n    addPen(pen) {\r\n        var previousPen = this.lastPen;\r\n        if (previousPen == null) {\r\n            pen.startIndex = 0;\r\n        } else {\r\n            pen.startIndex = previousPen.endIndex;\r\n        }\r\n        this.pens.push(pen);\r\n\r\n        // maintan lines\r\n        var line = this.lastLine;\r\n        if (line == null) {\r\n            line = this.LinesPool.pop() || [];\r\n            this.lines.push(line);\r\n        }\r\n        line.push(pen);\r\n\r\n        // new line, add an empty line\r\n        if (pen.newLineMode !== NO_NEWLINE) {\r\n            line = this.LinesPool.pop() || [];\r\n            this.lines.push(line);\r\n        }\r\n        this.maxLinesWidth = undefined;\r\n    }\r\n\r\n    clone(targetPenManager) {\r\n        if (targetPenManager == null)\r\n            targetPenManager = new PenManager();\r\n\r\n        targetPenManager.freePens();\r\n\r\n        for (var li = 0, llen = this.lines.length; li < llen; li++) {\r\n            var pens = this.lines[li];\r\n            for (var pi = 0, plen = pens.length; pi < plen; pi++) {\r\n                var pen = pens[pi];\r\n                targetPenManager.addPen(\r\n                    pen.text,\r\n                    pen.x,\r\n                    pen.y,\r\n                    pen.width,\r\n                    Clone(pen.prop),\r\n                    pen.newLineMode\r\n                );\r\n            }\r\n        }\r\n\r\n        return targetPenManager;\r\n    }\r\n\r\n    get lastPen() {\r\n        return this.pens[this.pens.length - 1];\r\n    }\r\n\r\n    get lastLine() {\r\n        return this.lines[this.lines.length - 1];\r\n    }\r\n\r\n    getLineStartIndex(i) {\r\n        if (i >= this.lines.length) {\r\n            return this.getLineEndIndex(i);\r\n        } else {\r\n            var line = this.lines[i];\r\n            return (line && line[0]) ? line[0].startIndex : 0;\r\n        }\r\n    }\r\n\r\n    getLineEndIndex(i) {\r\n        if (i >= this.lines.length) {\r\n            i = this.lines.length - 1;\r\n        }\r\n        var li, hasLastPen = false,\r\n            line;\r\n        for (li = i; li >= 0; li--) {\r\n            line = this.lines[li];\r\n            hasLastPen = (line != null) && (line.length > 0);\r\n            if (hasLastPen) {\r\n                break;\r\n            }\r\n        }\r\n        if (!hasLastPen) {\r\n            return 0;\r\n        }\r\n\r\n        var lastPen = line[line.length - 1];\r\n        return lastPen.endIndex;\r\n    }\r\n\r\n    getLineWidth(i) {\r\n        var line = this.lines[i];\r\n        if (!line) {\r\n            return 0;\r\n        }\r\n\r\n        var lastPen = line[line.length - 1];\r\n        if (lastPen == null) {\r\n            return 0;\r\n        }\r\n\r\n        var lineWidth = lastPen.lastX; // start from 0\r\n        return lineWidth;\r\n    }\r\n\r\n    getMaxLineWidth() {\r\n        if (this.maxLinesWidth !== undefined) {\r\n            return this.maxLinesWidth;\r\n        }\r\n        var w, maxW = 0;\r\n        for (var i = 0, len = this.lines.length; i < len; i++) {\r\n            w = this.getLineWidth(i);\r\n            if (w > maxW) {\r\n                maxW = w;\r\n            }\r\n        }\r\n        this.maxLinesWidth = maxW;\r\n        return maxW;\r\n    }\r\n\r\n    getLineWidths() {\r\n        var result = [];\r\n        for (var i = 0, len = this.lines.length; i < len; i++) {\r\n            result.push(this.getLineWidth(i));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    get linesCount() {\r\n        return this.lines.length;\r\n    }\r\n\r\n    get plainText() {\r\n        var txt = \"\",\r\n            pens = this.pens;\r\n        for (var i = 0, len = pens.length; i < len; i++) {\r\n            txt += pens[i].plainText;\r\n        }\r\n\r\n        return txt;\r\n    }\r\n\r\n    get rawTextLength() {\r\n        var l = 0,\r\n            pens = this.pens;\r\n        for (var i = 0, len = this.pens.length; i < len; i++) {\r\n            l += pens[i].rawTextLength;\r\n        }\r\n\r\n        return l;\r\n    }\r\n\r\n    getSliceTagText(start, end, wrap) {\r\n        if (start === undefined) {\r\n            start = 0;\r\n        }\r\n        if (end === undefined) {\r\n            var lastPen = this.lastPen;\r\n            if (lastPen == null) {\r\n                return \"\";\r\n            }\r\n\r\n            end = lastPen.endIndex;\r\n        }\r\n        if (wrap === undefined) {\r\n            wrap = false;\r\n        }\r\n\r\n        var txt = \"\",\r\n            formatTxt,\r\n            pen, penTxt, penStartIdx, penEndIdx, isInRange;\r\n        var currentProp, previousProp;\r\n        for (var i = 0, len = this.pens.length; i < len; i++) {\r\n            pen = this.pens[i];\r\n            penEndIdx = pen.endIndex;\r\n            if (penEndIdx <= start) {\r\n                continue;\r\n            }\r\n            pen = this.pens[i];\r\n            penTxt = (!wrap) ? pen.plainText : pen.wrapText;\r\n            currentProp = pen.prop;\r\n            penStartIdx = pen.startIndex;\r\n\r\n            isInRange = (penStartIdx >= start) && (penEndIdx <= end);\r\n            if (!isInRange) {\r\n                penTxt = penTxt.substring(start - penStartIdx, end - penStartIdx);\r\n            }\r\n\r\n            if (this.tagToTextScope) {\r\n                txt += this.tagToText.call(this.tagToTextScope, penTxt, currentProp, previousProp);\r\n            } else {\r\n                txt += this.tagToText(penTxt, currentProp, previousProp);\r\n            }\r\n\r\n            previousProp = currentProp;\r\n            if (penEndIdx >= end) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return txt;\r\n    }\r\n};\r\n\r\nvar PEN_CONFIG = {};\r\n\r\nexport default PenManager;","import Pool from '../../../../pool.js';\r\n\r\nconst Rectangle = Phaser.Geom.Rectangle;\r\n\r\nvar RectanglePool = new Pool();\r\nclass HitAreaManager {\r\n    constructor() {\r\n        this.hitAreas = [];\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n    }\r\n\r\n    clear() {\r\n        RectanglePool.pushMultiple(this.hitAreas);\r\n        return this;\r\n    }\r\n\r\n    add(key, x, y, width, height) {\r\n        var rectangle = RectanglePool.pop();\r\n        if (rectangle === null) {\r\n            rectangle = new Rectangle(x, y, width, height);\r\n        } else {\r\n            rectangle.setTo(x, y, width, height);\r\n        }\r\n        rectangle.key = key;\r\n        this.hitAreas.push(rectangle);\r\n        return this;\r\n    }\r\n\r\n    getFirstHitArea(x, y) {\r\n        var hitAreas = this.hitAreas, hitArea;\r\n        for (var i = 0, cnt = hitAreas.length; i < cnt; i++) {\r\n            hitArea = hitAreas[i];\r\n            if (hitArea.contains(x, y)) {\r\n                return hitArea;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    drawBounds(graphics, color, parent) {\r\n        if (color === undefined) {\r\n            color = 0xffffff;\r\n        }\r\n\r\n        if (parent) {\r\n            graphics\r\n                .save()\r\n                .scaleCanvas(parent.scaleX, parent.scaleY)\r\n                .rotateCanvas(parent.rotation)\r\n                .translateCanvas(parent.x, parent.y)\r\n        }\r\n\r\n        var hitAreas = this.hitAreas, hitArea;\r\n        for (var i = 0, cnt = hitAreas.length; i < cnt; i++) {\r\n            hitArea = hitAreas[i];\r\n            graphics.lineStyle(1, color).strokeRect(hitArea.x, hitArea.y, hitArea.width, hitArea.height);\r\n        }\r\n\r\n        if (parent) {\r\n            graphics\r\n                .restore()\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexport default HitAreaManager;","var SetInteractive = function () {\r\n    this.parent\r\n        .on('pointerdown', function (pointer, localX, localY, event) {\r\n            FireEvent.call(this, 'areadown', pointer, localX, localY);\r\n        }, this)\r\n        .on('pointerup', function (pointer, localX, localY, event) {\r\n            FireEvent.call(this, 'areaup', pointer, localX, localY);\r\n        }, this)\r\n}\r\n\r\nvar FireEvent = function (eventName, pointer, localX, localY) {\r\n    var area = this.hitAreaManager.getFirstHitArea(localX, localY);\r\n    if (area === null) {\r\n        return;\r\n    }\r\n    var key = area.key;\r\n    this.parent.emit(`${eventName}-${key}`, pointer, localX, localY)\r\n    this.parent.emit(eventName, key, pointer, localX, localY)\r\n}\r\nexport default SetInteractive;","import Pool from '../../../../pool.js';\r\nimport CONST from '../const.js';\r\n\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\nconst RAW_NEWLINE = CONST.RAW_NEWLINE;\r\nconst WRAPPED_NEWLINE = CONST.WRAPPED_NEWLINE;\r\nconst NO_WRAP = CONST.NO_WRAP;\r\nconst WORD_WRAP = CONST.WORD_WRAP;\r\nconst CHAR_WRAP = CONST.CHAR_WRAP;\r\nconst splitRegExp = CONST.SPLITREGEXP;\r\n\r\nvar WRAP_RESULT = [];\r\nvar WrapText = function (text, getTextWidth, wrapMode, wrapWidth, offset) {\r\n    if (wrapWidth <= 0) {\r\n        wrapMode = NO_WRAP;\r\n    }\r\n\r\n    var retLines = WRAP_RESULT;\r\n    LinesPool.pushMultiple(retLines);\r\n\r\n    if (!text || !text.length) {\r\n        return retLines;\r\n    }\r\n\r\n    var lines = text.split(splitRegExp),\r\n        line, remainWidth, isLaseLine, newLineMode;\r\n    for (var i = 0, linesLen = lines.length; i < linesLen; i++) {\r\n        line = lines[i];\r\n        newLineMode = (i === (linesLen - 1)) ? NO_NEWLINE : RAW_NEWLINE;\r\n\r\n        if (wrapMode === NO_WRAP) {\r\n            var textWidth = getTextWidth(line);\r\n            retLines.push(LinesPool.newline(line, textWidth, newLineMode));\r\n            continue;\r\n        } else {\r\n            if (i === 0) {\r\n                remainWidth = wrapWidth - offset;\r\n            } else {\r\n                remainWidth = wrapWidth;\r\n            }\r\n        }\r\n\r\n        // short string testing\r\n        if (line.length <= 100) {\r\n            var textWidth = getTextWidth(line);\r\n            if (textWidth <= remainWidth) {\r\n                retLines.push(LinesPool.newline(line, textWidth, newLineMode));\r\n                continue;\r\n            }\r\n        }\r\n\r\n        // character mode\r\n        var tokenArray;\r\n        if (wrapMode === WORD_WRAP) {\r\n            // word mode\r\n            tokenArray = line.split(' ');\r\n        } else {\r\n            tokenArray = line;\r\n        }\r\n        var token;\r\n        var curLineText = '',\r\n            lineText = '',\r\n            currLineWidth, lineWidth = 0;\r\n        for (var j = 0, tokenLen = tokenArray.length; j < tokenLen; j++) {\r\n            token = tokenArray[j];\r\n\r\n            if (wrapMode === WORD_WRAP) {\r\n                curLineText += token;\r\n\r\n                if (j < (tokenLen - 1)) {\r\n                    curLineText += ' ';\r\n                }\r\n            } else {\r\n                curLineText += token;\r\n            }\r\n\r\n            currLineWidth = getTextWidth(curLineText);\r\n            if (currLineWidth > remainWidth) {\r\n                // new line\r\n                if (j === 0) {\r\n                    retLines.push(LinesPool.newline('', 0, WRAPPED_NEWLINE));\r\n                } else {\r\n                    retLines.push(LinesPool.newline(lineText, lineWidth, WRAPPED_NEWLINE));\r\n                    curLineText = token;\r\n                    if (wrapMode === WORD_WRAP) {\r\n                        if (j < (tokenLen - 1)) {\r\n                            curLineText += ' ';\r\n                        }\r\n                    }\r\n                    currLineWidth = getTextWidth(curLineText);\r\n                }\r\n\r\n                remainWidth = wrapWidth;\r\n            }\r\n\r\n            lineText = curLineText;\r\n            lineWidth = currLineWidth;\r\n        } // for token in tokenArray\r\n\r\n        // flush remain text\r\n        retLines.push(LinesPool.newline(lineText, lineWidth, newLineMode));\r\n\r\n    } // for each line in lines\r\n\r\n    return retLines;\r\n};\r\n\r\nvar LinesPool = new Pool();\r\nLinesPool.newline = function (text, width, newLineMode) {\r\n    var l = this.pop();\r\n    if (l === null) {\r\n        l = {};\r\n    }\r\n    l.text = text;\r\n    l.width = width;\r\n    l.newLineMode = newLineMode;\r\n    return l;\r\n};\r\n\r\nexport default WrapText;","import DrawMethods from './DrawMethods.js';\r\nimport PenManager from '../penmanger/PenManager.js';\r\nimport HitAreaManager from '../hitareamanager/HitAreaManager.js';\r\nimport SetInteractive from './SetInteractive.js';\r\nimport CONST from '../const.js';\r\nimport WrapText from './WrapText.js';\r\nimport Clone from '../../../../utils/object/Clone.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst NO_WRAP = CONST.NO_WRAP;\r\nconst NO_NEWLINE = CONST.NO_NEWLINE;\r\n\r\nclass CanvasText {\r\n    constructor(config) {\r\n        this.parent = config.parent;\r\n        this.context = GetValue(config, 'context', null);\r\n        this.canvas = this.context.canvas;\r\n        this.parser = GetValue(config, 'parser', null);\r\n        this.defatultStyle = GetValue(config, 'style', null);\r\n        this.autoRound = true;\r\n\r\n        this.pensPool = GetValue(config, 'pensPool', null);\r\n        this.penManager = this.newPenManager();\r\n        this._tmpPenManager = null;\r\n\r\n        this.hitAreaManager = new HitAreaManager();\r\n\r\n        var context = this.context;\r\n        this.getTextWidth = function (text) {\r\n            return context.measureText(text).width;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.context = undefined;\r\n        this.canvas = undefined;\r\n        this.parser = undefined;\r\n        this.defatultStyle = undefined;\r\n\r\n        if (this.penManager) {\r\n            this.penManager.destroy();\r\n            this.penManager = undefined;\r\n        }\r\n        if (this._tmpPenManager) {\r\n            this._tmpPenManager.destroy();\r\n            this._tmpPenManager = undefined;\r\n        }\r\n        if (this.hitAreaManager) {\r\n            this.hitAreaManager.destroy();\r\n            this.hitAreaManager = undefined;\r\n        }\r\n    }\r\n\r\n    updatePenManager(text, wrapMode, wrapWidth, lineHeight, penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n        penManager.freePens();\r\n        if (text === \"\") {\r\n            return penManager;\r\n        }\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n\r\n        var cursorX = 0,\r\n            cursorY = 0;\r\n\r\n        var plainText, curProp, curStyle;\r\n        var match = this.parser.splitText(text),\r\n            result, wrapLines;\r\n        for (var i = 0, len = match.length; i < len; i++) {\r\n            result = this.parser.tagTextToProp(match[i], curProp);\r\n            plainText = result.plainText;\r\n            curProp = result.prop;\r\n\r\n            if (curProp.img) { // Image tag                \r\n                var imgWidth = this.imageManager.getOuterWidth(curProp.img);\r\n                if ((wrapWidth > 0) && (wrapMode !== NO_WRAP)) {  // Wrap mode\r\n                    if (wrapWidth < (cursorX + imgWidth)) {\r\n                        penManager.addNewLinePen();\r\n                        cursorY += lineHeight;\r\n                        cursorX = 0;\r\n                    }\r\n                }\r\n                penManager.addImagePen(cursorX, cursorY, imgWidth, Clone(curProp));\r\n                cursorX += imgWidth;\r\n\r\n            } else if (plainText !== '') {\r\n                // wrap text to lines\r\n                // Save the current context.\r\n                this.context.save();\r\n                curStyle = this.parser.propToContextStyle(\r\n                    this.defatultStyle,\r\n                    curProp\r\n                );\r\n                curStyle.buildFont();\r\n                curStyle.syncFont(canvas, context);\r\n                curStyle.syncStyle(canvas, context);\r\n                wrapLines = WrapText(plainText, this.getTextWidth, wrapMode, wrapWidth, cursorX);\r\n\r\n                // add pens\r\n                var n;\r\n                for (var j = 0, jLen = wrapLines.length; j < jLen; j++) {\r\n                    n = wrapLines[j];\r\n                    penManager.addTextPen(n.text, cursorX, cursorY, n.width, Clone(curProp), n.newLineMode);\r\n\r\n                    if (n.newLineMode !== NO_NEWLINE) {\r\n                        cursorX = 0;\r\n                        cursorY += lineHeight;\r\n                    } else {\r\n                        cursorX += n.width;\r\n                    }\r\n\r\n                }\r\n                this.context.restore();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return penManager;\r\n    }\r\n\r\n    get startXOffset() {\r\n        var defatultStyle = this.defatultStyle;\r\n        return (defatultStyle.strokeThickness / 2);\r\n    }\r\n\r\n    get startYOffset() {\r\n        var defatultStyle = this.defatultStyle;\r\n        return (defatultStyle.strokeThickness / 2) + defatultStyle.metrics.ascent;\r\n    }\r\n\r\n    get lines() {\r\n        return this.penManager.lines;\r\n    }\r\n\r\n    get desplayLinesCount() {\r\n        var linesCount = this.penManager.linesCount,\r\n            maxLines = this.defatultStyle.maxLines;\r\n        if ((maxLines > 0) && (linesCount > maxLines)) {\r\n            linesCount = maxLines;\r\n        }\r\n        return linesCount;\r\n    }\r\n\r\n    get linesWidth() {\r\n        return this.penManager.getMaxLineWidth();\r\n    }\r\n\r\n    get linesHeight() {\r\n        var linesCount = this.desplayLinesCount;\r\n        var linesHeight = (this.defatultStyle.lineHeight * linesCount);\r\n        if (linesCount > 0) {\r\n            linesHeight -= this.defatultStyle.lineSpacing;\r\n        }\r\n        return linesHeight;\r\n    }\r\n\r\n    get imageManager() {\r\n        return this.parent.imageManager;\r\n    }\r\n\r\n    newPenManager() {\r\n        return new PenManager({\r\n            pensPool: this.pensPool,\r\n            tagToText: this.parser.propToTagText,\r\n            tagToTextScope: this.parser\r\n        });\r\n    }\r\n\r\n    get tmpPenManager() {\r\n        if (this._tmpPenManager === null) {\r\n            this._tmpPenManager = this.newPenManager();\r\n        }\r\n        return this._tmpPenManager;\r\n    }\r\n\r\n    getPlainText(text, start, end) {\r\n        var plainText;\r\n        if (text == null) {\r\n            plainText = this.penManager.plainText;\r\n        } else {\r\n            var m, match = this.parser.splitText(text, 1); // PLAINTEXTONLY_MODE\r\n            plainText = \"\";\r\n            for (var i = 0, len = match.length; i < len; i++) {\r\n                plainText += match[i];\r\n            }\r\n        }\r\n\r\n        if ((start != null) || (end != null)) {\r\n            if (start == null) {\r\n                start = 0;\r\n            }\r\n            if (end == null) {\r\n                end = plainText.length;\r\n            }\r\n            plainText = plainText.substring(start, end);\r\n        }\r\n\r\n        return plainText;\r\n    }\r\n\r\n    getPenManager(text, retPenManager) {\r\n        if (text === undefined) {\r\n            return this.copyPenManager(retPenManager, this.penManager);\r\n        }\r\n\r\n        if (retPenManager === undefined) {\r\n            retPenManager = this.newPenManager();\r\n        }\r\n\r\n        var defatultStyle = this.defatultStyle;\r\n        this.updatePenManager(\r\n            text,\r\n            defatultStyle.wrapMode,\r\n            defatultStyle.wrapWidth,\r\n            defatultStyle.lineHeight,\r\n            retPenManager\r\n        );\r\n        return retPenManager;\r\n    }\r\n\r\n    getText(text, start, end, wrap) {\r\n        if (text == null) {\r\n            return this.penManager.getSliceTagText(start, end, wrap);\r\n        }\r\n\r\n        var penManager = this.tmpPenManager;\r\n        var defatultStyle = this.defatultStyle;\r\n        this.updatePenManager(\r\n            text,\r\n            defatultStyle.wrapMode,\r\n            defatultStyle.wrapWidth,\r\n            defatultStyle.lineHeight,\r\n            penManager\r\n        );\r\n\r\n        return penManager.getSliceTagText(start, end, wrap);\r\n    }\r\n\r\n    copyPenManager(ret, src) {\r\n        if (src === undefined) {\r\n            src = this.penManager;\r\n        }\r\n        return src.copy(ret);\r\n    }\r\n\r\n    getTextWidth(penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n\r\n        return penManager.getMaxLineWidth();\r\n    }\r\n\r\n    getLastPen(penManager) {\r\n        if (penManager === undefined) {\r\n            penManager = this.penManager;\r\n        }\r\n\r\n        return penManager.lastPen;\r\n    }\r\n};\r\n\r\nvar methods = {\r\n    setInteractive: SetInteractive,\r\n}\r\n\r\nObject.assign(\r\n    CanvasText.prototype,\r\n    DrawMethods,\r\n    methods\r\n);\r\n\r\nexport default CanvasText;","const GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass ImageManager {\r\n    constructor(textureManager) {\r\n        this.textureManager = textureManager;\r\n        this.images = {};\r\n    }\r\n\r\n    add(key, config) {\r\n        if (typeof (key) === 'string') {\r\n            this._add(key, config);\r\n        } else if (Array.isArray(key)) {\r\n            var data = key;\r\n            for (var i = 0, cnt = data.length; i < cnt; i++) {\r\n                this._add(data[i]);\r\n            }\r\n        } else {\r\n            var data = key;\r\n            for (var key in data) {\r\n                this._add(key, data[key]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    _add(key, config) {\r\n        if (config === undefined) {\r\n            config = {\r\n                key: key\r\n            }\r\n        }\r\n\r\n        var textureKey = config.key, frameKey = config.frame;\r\n        var width = config.width, height = config.height;\r\n\r\n        if ((width === undefined) || (height === undefined)) {\r\n            var frame = this.textureManager.getFrame(textureKey, frameKey);\r\n            var frameWidth = (frame) ? frame.cutWidth : 0;\r\n            var frameHeight = (frame) ? frame.cutHeight : 0;\r\n            if ((width === undefined) && (height === undefined)) {\r\n                width = frameWidth;\r\n                height = frameHeight;\r\n            } else if (width === undefined) {\r\n                width = frameWidth * (height / frameHeight);\r\n            } else if (height === undefined) {\r\n                height = frameHeight * (width / frameWidth);\r\n            }\r\n        }\r\n\r\n        this.images[key] = {\r\n            key: textureKey,\r\n            frame: frameKey,\r\n            width: width,\r\n            height: height,\r\n            y: GetValue(config, 'y', 0),\r\n            left: GetValue(config, 'left', 0),\r\n            right: GetValue(config, 'right', 0)\r\n        }\r\n    }\r\n\r\n    remove(key) {\r\n        if (this.images.hasOwnProperty(key)) {\r\n            delete this.images[key];\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get(key) {\r\n        if (!this.images.hasOwnProperty(key)) {\r\n            if (this.textureManager.exists(key)) {\r\n                this.add(key);\r\n            }\r\n        }\r\n        return this.images[key];\r\n    }\r\n\r\n    getOuterWidth(key) {\r\n        var data = this.get(key);\r\n        return (data) ? (data.width + data.left + data.right) : 0;\r\n    }\r\n\r\n    getFrame(key) {\r\n        var data = this.get(key);\r\n        return (data) ? this.textureManager.getFrame(data.key, data.frame) : undefined;\r\n    }\r\n\r\n    hasTexture(key) {\r\n        return !!this.getFrame(key);\r\n    }\r\n}\r\nexport default ImageManager;","import ImageManager from './ImageManager.js';\r\n\r\nvar globImageManager;\r\n\r\nexport default function(textureManager) {\r\n    if (globImageManager === undefined) {\r\n        globImageManager = new ImageManager(textureManager);\r\n    }\r\n    return globImageManager;\r\n}","import Render from './render/Render.js';\r\nimport TextStyle from './textstyle/TextStyle.js'; // extended\r\nimport CanvasTextKlass from './canvastext/CanvasText.js';\r\nimport Pool from '../../../pool.js';\r\nimport CONST from './const.js';\r\nimport GetGlobImageManager from './imagemanager/GetGlobImageManager.js';\r\n\r\nconst AddToDOM = Phaser.DOM.AddToDOM;\r\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\r\nconst GameObject = Phaser.GameObjects.GameObject;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst RemoveFromDOM = Phaser.DOM.RemoveFromDOM;\r\nconst SPLITREGEXP = CONST.SPLITREGEXP;\r\n\r\nvar PensPools = {};\r\n\r\nclass Text extends GameObject {\r\n    constructor(scene, x, y, text, style, type, parser) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n\r\n        super(scene, type);\r\n\r\n        this.renderer = scene.sys.game.renderer;\r\n\r\n        this.setPosition(x, y);\r\n        this.setOrigin(0, 0);\r\n        this.initPipeline();\r\n\r\n        this.canvas = CanvasPool.create(this);\r\n\r\n        this.context = this.canvas.getContext('2d');\r\n\r\n        if (style) {\r\n            // Override align\r\n            if (style.hasOwnProperty('align')) {\r\n                var halign = style.align;\r\n                delete style.align;\r\n                style.halign = halign;\r\n            }\r\n            // Has Stroke color but stroke thinkness, set stroke thinkness to 1\r\n            if (style.hasOwnProperty('stroke') && !style.hasOwnProperty('strokeThickness')) {\r\n                style.strokeThickness = 1;\r\n            }\r\n        }\r\n        this.style = new TextStyle(this, style);\r\n\r\n        this.autoRound = true;\r\n\r\n        this._text = undefined;\r\n\r\n        this.padding = {\r\n            left: 0,\r\n            right: 0,\r\n            top: 0,\r\n            bottom: 0\r\n        };\r\n\r\n        this.width = 1;\r\n\r\n        this.height = 1;\r\n\r\n        this.dirty = false;\r\n\r\n        //  If resolution wasn't set, then we get it from the game config\r\n        if (this.style.resolution === 0) {\r\n            this.style.resolution = scene.sys.game.config.resolution;\r\n        }\r\n\r\n        this._crop = this.resetCropObject();\r\n\r\n        //  Create a Texture for this Text object\r\n        this.texture = scene.sys.textures.addCanvas(null, this.canvas, true);\r\n\r\n        //  Get the frame\r\n        this.frame = this.texture.get();\r\n\r\n        //  Set the resolution\r\n        this.frame.source.resolution = this.style.resolution;\r\n\r\n        if (this.renderer.gl) {\r\n            //  Clear the default 1x1 glTexture, as we override it later\r\n\r\n            this.renderer.deleteTexture(this.frame.source.glTexture);\r\n\r\n            this.frame.source.glTexture = null;\r\n        }\r\n\r\n        if (!PensPools.hasOwnProperty(type)) {\r\n            PensPools[type] = new Pool();\r\n        }\r\n        this.canvasText = new CanvasTextKlass({\r\n            parent: this,\r\n            context: this.context,\r\n            parser: parser,\r\n            style: this.style,\r\n            pensPool: PensPools[type]\r\n        });\r\n\r\n        //this.initRTL();\r\n\r\n        if (style && style.padding) {\r\n            this.setPadding(style.padding);\r\n        }\r\n\r\n        this.setText(text);\r\n\r\n        scene.sys.game.events.on('contextrestored', function () {\r\n            this.dirty = true;\r\n        }, this);\r\n    }\r\n\r\n    set text(value) {\r\n        this.setText(value);\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n\r\n    initRTL() {\r\n        if (!this.style.rtl) {\r\n            return;\r\n        }\r\n\r\n        //  Here is where the crazy starts.\r\n        //\r\n        //  Due to browser implementation issues, you cannot fillText BiDi text to a canvas\r\n        //  that is not part of the DOM. It just completely ignores the direction property.\r\n\r\n        this.canvas.dir = 'rtl';\r\n\r\n        //  Experimental atm, but one day ...\r\n        this.context.direction = 'rtl';\r\n\r\n        //  Add it to the DOM, but hidden within the parent canvas.\r\n        this.canvas.style.display = 'none';\r\n\r\n        AddToDOM(this.canvas, this.scene.sys.canvas);\r\n\r\n        //  And finally we set the x origin\r\n        this.originX = 1;\r\n    }\r\n\r\n    setText(value) {\r\n        if (!value && value !== 0) {\r\n            value = '';\r\n        }\r\n\r\n        if (Array.isArray(value)) {\r\n            value = value.join('\\n');\r\n        }\r\n\r\n        if (value !== this._text) {\r\n            this._text = value.toString();\r\n\r\n            this.updateText();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setStyle(style) {\r\n        return this.style.setStyle(style);\r\n    }\r\n\r\n    setFont(font) {\r\n        return this.style.setFont(font);\r\n    }\r\n\r\n    setFontFamily(family) {\r\n        return this.style.setFontFamily(family);\r\n    }\r\n\r\n    setFontSize(size) {\r\n        return this.style.setFontSize(size);\r\n    }\r\n\r\n    setFontStyle(style) {\r\n        return this.style.setFontStyle(style);\r\n    }\r\n\r\n    setFixedSize(width, height) {\r\n        return this.style.setFixedSize(width, height);\r\n    }\r\n\r\n    setBackgroundColor(color) {\r\n        return this.style.setBackgroundColor(color);\r\n    }\r\n\r\n    setFill(color) {\r\n        return this.style.setFill(color);\r\n    }\r\n\r\n    setColor(color) {\r\n        return this.style.setColor(color);\r\n    }\r\n\r\n    setStroke(color, thickness) {\r\n        return this.style.setStroke(color, thickness);\r\n    }\r\n\r\n    setShadow(x, y, color, blur, shadowStroke, shadowFill) {\r\n        return this.style.setShadow(x, y, color, blur, shadowStroke, shadowFill);\r\n    }\r\n\r\n    setShadowOffset(x, y) {\r\n        return this.style.setShadowOffset(x, y);\r\n    }\r\n\r\n    setShadowColor(color) {\r\n        return this.style.setShadowColor(color);\r\n    }\r\n\r\n    setShadowBlur(blur) {\r\n        return this.style.setShadowBlur(blur);\r\n    }\r\n\r\n    setShadowStroke(enabled) {\r\n        return this.style.setShadowStroke(enabled);\r\n    }\r\n\r\n    setShadowFill(enabled) {\r\n        return this.style.setShadowFill(enabled);\r\n    }\r\n\r\n    setWrapMode(mode) {\r\n        return this.style.setWrapMode(mode);\r\n    }\r\n\r\n    setWrapWidth(width) {\r\n        return this.style.setWrapWidth(width);\r\n    }\r\n\r\n    setAlign(align) {\r\n        return this.style.setHAlign(align);\r\n    }\r\n\r\n    setLineSpacing(value) {\r\n        return this.style.setLineSpacing(value);\r\n    }\r\n\r\n    setPadding(left, top, right, bottom) {\r\n        if (typeof left === 'object') {\r\n            var config = left;\r\n\r\n            //  If they specify x and/or y this applies to all\r\n            var x = GetValue(config, 'x', null);\r\n\r\n            if (x !== null) {\r\n                left = x;\r\n                right = x;\r\n            } else {\r\n                left = GetValue(config, 'left', 0);\r\n                right = GetValue(config, 'right', left);\r\n            }\r\n\r\n            var y = GetValue(config, 'y', null);\r\n\r\n            if (y !== null) {\r\n                top = y;\r\n                bottom = y;\r\n            } else {\r\n                top = GetValue(config, 'top', 0);\r\n                bottom = GetValue(config, 'bottom', top);\r\n            }\r\n        } else {\r\n            if (left === undefined) {\r\n                left = 0;\r\n            }\r\n            if (top === undefined) {\r\n                top = left;\r\n            }\r\n            if (right === undefined) {\r\n                right = left;\r\n            }\r\n            if (bottom === undefined) {\r\n                bottom = top;\r\n            }\r\n        }\r\n\r\n        this.padding.left = left;\r\n        this.padding.top = top;\r\n        this.padding.right = right;\r\n        this.padding.bottom = bottom;\r\n\r\n        return this.updateText(false);\r\n    }\r\n\r\n    setResolution(value) {\r\n        return this.style.setResolution(value);\r\n    }\r\n\r\n    setMaxLines(max) {\r\n        return this.style.setMaxLines(max);\r\n    }\r\n\r\n    updateText(runWrap) {\r\n        if (runWrap === undefined) {\r\n            runWrap = true;\r\n        }\r\n        var canvasText = this.canvasText;\r\n\r\n        // wrap text to pens\r\n        var style = this.style;\r\n        if (runWrap) {\r\n            canvasText.updatePenManager(\r\n                this._text,\r\n                style.wrapMode,\r\n                style.wrapWidth,\r\n                style.lineHeight\r\n            );\r\n        }\r\n\r\n        // resize\r\n        var padding = this.padding;\r\n        var textWidth, textHeight;\r\n        if (style.fixedWidth === 0) {\r\n            this.width = canvasText.linesWidth + padding.left + padding.right;\r\n            textWidth = canvasText.linesWidth;\r\n        }\r\n        else {\r\n            this.width = style.fixedWidth;\r\n            textWidth = this.width - padding.left - padding.right;\r\n            if (textWidth < canvasText.linesWidth) {\r\n                textWidth = canvasText.linesWidth;\r\n            }\r\n        }\r\n        if (style.fixedHeight === 0) {\r\n            this.height = canvasText.linesHeight + padding.top + padding.bottom;\r\n            textHeight = canvasText.linesHeight;\r\n        }\r\n        else {\r\n            this.height = style.fixedHeight;\r\n            textHeight = this.height - padding.top - padding.bottom;\r\n            if (textHeight < canvasText.linesHeight) {\r\n                textHeight = canvasText.linesHeight;\r\n            }\r\n        }\r\n\r\n        var w = this.width;\r\n        var h = this.height;\r\n\r\n        this.updateDisplayOrigin();\r\n\r\n        var resolution = style.resolution;\r\n        w *= resolution;\r\n        h *= resolution;\r\n\r\n        w = Math.max(Math.ceil(w), 1);\r\n        h = Math.max(Math.ceil(h), 1);\r\n\r\n        var canvas = this.canvas;\r\n        var context = this.context;\r\n        if (canvas.width !== w || canvas.height !== h) {\r\n            canvas.width = w;\r\n            canvas.height = h;\r\n            this.frame.setSize(w, h);\r\n        } else {\r\n            context.clearRect(0, 0, w, h);\r\n        }\r\n\r\n        context.save();\r\n        context.scale(resolution, resolution);\r\n\r\n        // draw\r\n        canvasText.draw(\r\n            padding.left,\r\n            padding.top,\r\n            textWidth,\r\n            textHeight\r\n        );\r\n\r\n        context.restore();\r\n\r\n        if (this.renderer.gl) {\r\n            this.frame.source.glTexture = this.renderer.canvasToTexture(canvas, this.frame.source.glTexture, true);\r\n            this.frame.glTexture = this.frame.source.glTexture;\r\n        }\r\n\r\n        this.dirty = true;\r\n\r\n        var input = this.input;\r\n\r\n        if (input && !input.customHitArea) {\r\n            input.hitArea.width = this.width;\r\n            input.hitArea.height = this.height;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    getTextMetrics() {\r\n        return this.style.getTextMetrics();\r\n    }\r\n\r\n    toJSON() {\r\n        var out = Components.ToJSON(this);\r\n\r\n        //  Extra Text data is added here\r\n\r\n        var data = {\r\n            autoRound: this.autoRound,\r\n            text: this._text,\r\n            style: this.style.toJSON(),\r\n            resolution: this.resolution,\r\n            padding: {\r\n                left: this.padding.left,\r\n                right: this.padding.right,\r\n                top: this.padding.top,\r\n                bottom: this.padding.bottom\r\n            }\r\n        };\r\n\r\n        out.data = data;\r\n\r\n        return out;\r\n    }\r\n\r\n    preDestroy() {\r\n        if (this.style.rtl) {\r\n            RemoveFromDOM(this.canvas);\r\n        }\r\n\r\n        CanvasPool.remove(this.canvas);\r\n        this.canvasText.destroy();\r\n    }\r\n\r\n    setInteractive(shape, callback, dropZone) {\r\n        GameObject.prototype.setInteractive.call(this, shape, callback, dropZone);\r\n        this.canvasText.setInteractive();\r\n        return this;\r\n    }\r\n\r\n    getWrappedText(text, start, end) {\r\n        text = this.canvasText.getText(text, start, end, true);\r\n        return text.split(SPLITREGEXP);\r\n    }\r\n\r\n    getPlainText(text, start, end) {\r\n        return this.canvasText.getPlainText(text, start, end);\r\n    }\r\n\r\n    getText(text, start, end) {\r\n        return this.canvasText.getText(text, start, end, false);\r\n    }\r\n\r\n    getSubString(text, start, end) {\r\n        return this.getText(text, start, end);\r\n    }\r\n\r\n    copyPenManager(penManager) {\r\n        return this.canvasText.copyPenManager(penManager);\r\n    }\r\n\r\n    getPenManager(text, penManager) {\r\n        return this.canvasText.getPenManager(text, penManager);\r\n    }\r\n\r\n    setSize(width, height) {\r\n        return this.setFixedSize(width, height);\r\n    }\r\n\r\n    resize(width, height) {\r\n        return this.setFixedSize(width, height);\r\n    }\r\n\r\n    set lineSpacing(value) {\r\n        this.setLineSpacing(value);\r\n    }\r\n    get lineSpacing() {\r\n        return this.style.lineSpacing;\r\n    }\r\n\r\n    get imageManager() {\r\n        return GetGlobImageManager(this.scene.textures);\r\n    }\r\n\r\n    addImage(key, config) {\r\n        this.imageManager.add(key, config);\r\n        return this;\r\n    }\r\n\r\n    drawAreaBounds(graphics, color) {\r\n        this.canvasText.hitAreaManager.drawBounds(graphics, color, this);\r\n        return this;\r\n    }\r\n}\r\n\r\nconst Components = Phaser.GameObjects.Components;\r\nPhaser.Class.mixin(Text,\r\n    [\r\n        Components.Alpha,\r\n        Components.BlendMode,\r\n        Components.ComputedSize,\r\n        Components.Crop,\r\n        Components.Depth,\r\n        Components.Flip,\r\n        Components.GetBounds,\r\n        Components.Mask,\r\n        Components.Origin,\r\n        Components.Pipeline,\r\n        Components.ScrollFactor,\r\n        Components.Tint,\r\n        Components.Transform,\r\n        Components.Visible,\r\n        Render\r\n    ]\r\n);\r\n\r\nexport default Text;","import TextStyle from '../textbase/textstyle/TextStyle.js';\r\n\r\nvar GETPROP_RESULT = {\r\n    plainText: null,\r\n    prevProp: null\r\n};\r\n\r\nvar STYLE_RESULT = new TextStyle();\r\nvar PROPLIST = [];\r\n\r\nclass parser {\r\n    constructor(tags) {\r\n        if (tags === undefined) {\r\n            tags = {};\r\n        }\r\n        this.tags = tags;\r\n    }\r\n\r\n    addTag(name, prop) {\r\n        this.tags[name] = prop;\r\n    }\r\n\r\n    splitText(text, mode) {\r\n        var result = [];\r\n        var arr, m, charIdx = 0,\r\n            totalLen = text.length,\r\n            matchStart = totalLen;\r\n        var innerMatch;\r\n        while (true) {\r\n            arr = RE_SPLITTEXT.exec(text);\r\n            if (!arr) {\r\n                break;\r\n            }\r\n\r\n            m = arr[0];\r\n            matchStart = RE_SPLITTEXT.lastIndex - m.length;\r\n\r\n            if (charIdx < matchStart) {\r\n                result.push(text.substring(charIdx, matchStart));\r\n            }\r\n            if (mode === undefined) {\r\n                result.push(m);\r\n            } else if (mode === 1) { // RAWTEXTONLY_MODE\r\n                if (RE_CLASS_HEADER.test(m)) {\r\n                    innerMatch = m.match(RE_CLASS);\r\n                    result.push(innerMatch[2]);\r\n                } else if (RE_STYLE_HEADER.test(m)) {\r\n                    innerMatch = m.match(RE_STYLE);\r\n                    result.push(innerMatch[2]);\r\n                }\r\n            }\r\n\r\n            charIdx = RE_SPLITTEXT.lastIndex;\r\n        }\r\n\r\n\r\n        if (charIdx < totalLen) {\r\n            result.push(text.substring(charIdx, totalLen));\r\n        }\r\n        return result; // [text,...]\r\n    }\r\n\r\n    tagTextToProp(text, prevProp) {\r\n        var plainText, propOut;\r\n        if (RE_CLASS_HEADER.test(text)) {\r\n            var innerMatch = text.match(RE_CLASS);\r\n            if (innerMatch != null) {\r\n                var name = innerMatch[1];\r\n                var tags = this.tags;\r\n                if (tags.hasOwnProperty(name)) {\r\n                    propOut = tags[name];\r\n                } else {\r\n                    propOut = {};\r\n                }\r\n                propOut._class = name;\r\n                plainText = innerMatch[2];\r\n            }\r\n        } else if (RE_STYLE_HEADER.test(text)) {\r\n            var innerMatch = text.match(RE_STYLE);\r\n            if (innerMatch != null) {\r\n                var style = innerMatch[1];\r\n                propOut = styleToProp(style);\r\n                propOut._style = style;\r\n                plainText = innerMatch[2];\r\n            }\r\n        }\r\n\r\n        if (plainText == null) {\r\n            plainText = text;\r\n        }\r\n\r\n        if (propOut == null) {\r\n            propOut = {};\r\n        }\r\n\r\n        var result = GETPROP_RESULT;\r\n        result.plainText = plainText;\r\n        result.prop = propOut;\r\n        return result;\r\n    }\r\n\r\n    propToContextStyle(defaultStyle, prop) {\r\n        var result = STYLE_RESULT;\r\n        if (!prop.hasOwnProperty('img')) {\r\n            result.image = null;\r\n\r\n            if (prop.hasOwnProperty('family') || prop.hasOwnProperty('fontFamily') || prop.hasOwnProperty('font-family')) {\r\n                var family = (prop.hasOwnProperty('family')) ? prop.family :\r\n                    (prop.hasOwnProperty('fontFamily')) ? prop.fontFamily :\r\n                    prop['font-family'];\r\n                result.fontFamily = family;\r\n            } else {\r\n                result.fontFamily = defaultStyle.fontFamily;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('size') || prop.hasOwnProperty('fontSize') || prop.hasOwnProperty('font-size')) {\r\n                var size = (prop.hasOwnProperty('size')) ? prop.size :\r\n                    (prop.hasOwnProperty('fontSize')) ? prop.fontSize :\r\n                    prop['font-size'];\r\n                if (typeof (size) === 'number') {\r\n                    size = size.toString() + 'px';\r\n                }\r\n                result.fontSize = size;\r\n            } else {\r\n                result.fontSize = defaultStyle.fontSize;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('style') || prop.hasOwnProperty('fontStyle') || prop.hasOwnProperty('font-style')) {\r\n                var fontStyle = (prop.hasOwnProperty('style')) ? prop.style :\r\n                    (prop.hasOwnProperty('fontStyle')) ? prop.fontStyle :\r\n                    prop['font-style'];\r\n                result.fontStyle = fontStyle;\r\n            } else {\r\n                result.fontStyle = defaultStyle.fontStyle;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('color') || prop.hasOwnProperty('font-color')) {\r\n                var color = (prop.hasOwnProperty('color')) ? prop.color : prop['font-color'];\r\n                result.color = color;\r\n            } else {\r\n                result.color = defaultStyle.color;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('stroke')) {\r\n                var stroke = prop.stroke; // {color, thinkness}\r\n                result.stroke = (stroke.hasOwnProperty('color')) ? stroke.color : defaultStyle.stroke;\r\n                result.strokeThickness = (stroke.hasOwnProperty('thinkness')) ? stroke.thinkness : defaultStyle.strokeThickness;\r\n            } else {\r\n                result.stroke = defaultStyle.stroke;\r\n                result.strokeThickness = defaultStyle.strokeThickness;\r\n            }\r\n        } else {\r\n            result.image = prop.img;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('shadow')) {\r\n            var shadow = prop.shadow; // {color, offsetX, offsetY, blur}\r\n            result.shadowColor = (shadow.hasOwnProperty('color')) ? shadow.color : defaultStyle.shadowColor;\r\n            result.shadowOffsetX = (shadow.hasOwnProperty('offsetX')) ? shadow.offsetX : defaultStyle.shadowOffsetX;\r\n            result.shadowOffsetY = (shadow.hasOwnProperty('offsetY')) ? shadow.offsetY : defaultStyle.shadowOffsetY;\r\n            result.shadowBlur = (shadow.hasOwnProperty('blur')) ? shadow.blur : defaultStyle.shadowBlur;\r\n            result.shadowStroke = true;\r\n            result.shadowFill = true;\r\n        } else {\r\n            result.shadowColor = defaultStyle.shadowColor;\r\n            result.shadowOffsetX = defaultStyle.shadowOffsetX;\r\n            result.shadowOffsetY = defaultStyle.shadowOffsetY;\r\n            result.shadowBlur = defaultStyle.shadowBlur;\r\n            result.shadowStroke = defaultStyle.shadowStroke;\r\n            result.shadowFill = defaultStyle.shadowFill;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('u') || prop.hasOwnProperty('underline')) {\r\n            var u = (prop.hasOwnProperty('u')) ? prop.u : prop.underline; // {color, thinkness, offset}\r\n            result.underlineColor = (u.hasOwnProperty('color')) ? u.color : defaultStyle.underlineColor;\r\n            result.underlineThickness = (u.hasOwnProperty('thinkness')) ? u.thinkness : defaultStyle.underlineThickness;\r\n            result.underlineOffset = (u.hasOwnProperty('offset')) ? u.offset : defaultStyle.underlineOffset;\r\n        } else {\r\n            result.underlineColor = defaultStyle.underlineColor;\r\n            result.underlineThickness = defaultStyle.underlineThickness;\r\n            result.underlineOffset = defaultStyle.underlineOffset;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    propToTagText(text, prop, prevProp) {\r\n        if (prop.hasOwnProperty('_class')) { // class mode\r\n            if (text === '') {\r\n                if (this.isTextTag(prop._class)) {\r\n                    return '';\r\n                }\r\n            }\r\n            return \"<class='\" + prop._class + \"'>\" + text + \"</class>\";\r\n        } else if (prop.hasOwnProperty('_style')) { // class mode\r\n            return \"<style='\" + prop._style + \"'>\" + text + \"</style>\";\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.tags = undefined;\r\n    }\r\n\r\n    isTextTag(tagName) {\r\n        var tag = this.tags[tagName];\r\n        if (tag) {\r\n            return (tag.img == null);\r\n        } else { // tag not found\r\n            return false;\r\n        }\r\n    }\r\n};\r\n\r\nvar styleToProp = function (s) {\r\n    s = s.split(\";\");\r\n\r\n    var result = {},\r\n        prop, k, v;\r\n    for (var i = 0, slen = s.length; i < slen; i++) {\r\n        prop = s[i].split(\":\");\r\n        k = prop[0], v = prop[1];\r\n        if (isEmpty(k) || isEmpty(v)) {\r\n            continue;\r\n        }\r\n\r\n        switch (k) {\r\n            case 'stroke':\r\n                var stroke = v.split(' '); // stroke:blue 1px\r\n                var len = stroke.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = stroke[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.thinkness = parseInt(stroke[1].replace('px', ''));\r\n                }\r\n                break;\r\n            case 'shadow':\r\n                var shadow = v.split(' '); // shadow:blue 2px 2px 2px\r\n                var len = shadow.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = shadow[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.offsetX = parseInt(shadow[1].replace('px', ''));\r\n                }\r\n                if (len >= 3) {\r\n                    v.offsetY = parseInt(shadow[2].replace('px', ''));\r\n                }\r\n                if (len >= 4) {\r\n                    v.blur = parseInt(shadow[3].replace('px', ''));\r\n                }\r\n                break;\r\n            case 'u':\r\n            case 'underline': // underline:blue 3px -1px\r\n                var u = v.split(' ');\r\n                var len = u.length;\r\n                v = {};\r\n                if (len >= 1) {\r\n                    v.color = u[0];\r\n                }\r\n                if (len >= 2) {\r\n                    v.thinkness = parseInt(u[1].replace('px', ''));\r\n                }\r\n                if (len >= 3) {\r\n                    v.offset = parseInt(u[2].replace('px', ''));\r\n                }\r\n                break;\r\n        }\r\n        result[k] = v;\r\n    }\r\n    return result;\r\n};\r\n\r\nvar isEmpty = function (s) {\r\n    // Remove white spaces.\r\n    s = s.replace(RE_SPACE, '');\r\n    return (s.length === 0);\r\n};\r\n\r\nvar RE_SPLITTEXT = /<\\s*class=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/class\\s*\\>|<\\s*style=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/style\\s*\\>/g;\r\nvar RE_CLASS_HEADER = /<\\s*class=/i;\r\nvar RE_CLASS = /<\\s*class=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/class\\s*\\>/;\r\nvar RE_STYLE_HEADER = /<\\s*style=/i;\r\nvar RE_STYLE = /<\\s*style=[\"|']([^\"|']+)[\"|']\\s*\\>([\\s\\S]*?)<\\s*\\/style\\s*\\>/;\r\nvar RE_SPACE = /^\\s+|\\s+$/;\r\n\r\nexport default parser;","import Text from '../textbase/Text.js';\r\nimport ParserKlass from './Parser.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass TagText extends Text {\r\n    constructor(scene, x, y, text, style) {\r\n        var tags = GetValue(style, 'tags', undefined);\r\n        var parser = new ParserKlass(tags);\r\n        super(scene, x, y, text, style, 'rexTagText', parser);\r\n        this.parser = parser;\r\n    }\r\n\r\n    addTag(name, prop) {\r\n        this.parser.addTag(name, prop);\r\n        return this.updateText(true);\r\n    }\r\n\r\n    addTags(tags) {\r\n        for(var name in tags){\r\n            this.parser.addTag(name, tags[name]);\r\n        }\r\n        return this.updateText(true);\r\n    }\r\n\r\n    preDestroy() {\r\n        super.preDestroy();\r\n        this.parser.destroy();\r\n        this.parser = undefined;\r\n    }\r\n}\r\n\r\nexport default TagText;","import TagText from './TagText.js';\r\n\r\nconst GetAdvancedValue = Phaser.Utils.Objects.GetAdvancedValue;\r\nconst BuildGameObject = Phaser.GameObjects.BuildGameObject;\r\n\r\nexport default function (config, addToScene) {\r\n    // style Object = {\r\n    //     font: [ 'font', '16px Courier' ],\r\n    //     backgroundColor: [ 'backgroundColor', null ],\r\n    //     fill: [ 'fill', '#fff' ],\r\n    //     stroke: [ 'stroke', '#fff' ],\r\n    //     strokeThickness: [ 'strokeThickness', 0 ],\r\n    //     shadowOffsetX: [ 'shadow.offsetX', 0 ],\r\n    //     shadowOffsetY: [ 'shadow.offsetY', 0 ],\r\n    //     shadowColor: [ 'shadow.color', '#000' ],\r\n    //     shadowBlur: [ 'shadow.blur', 0 ],\r\n    //     shadowStroke: [ 'shadow.stroke', false ],\r\n    //     shadowFill: [ 'shadow.fill', false ],\r\n    //     align: [ 'align', 'left' ],\r\n    //     maxLines: [ 'maxLines', 0 ],\r\n    //     fixedWidth: [ 'fixedWidth', false ],\r\n    //     fixedHeight: [ 'fixedHeight', false ]\r\n    // }\r\n\r\n    var content = GetAdvancedValue(config, 'text', '');\r\n    var style = GetAdvancedValue(config, 'style', null);\r\n\r\n    //  Padding\r\n    //      { padding: 2 }\r\n    //      { padding: { x: , y: }}\r\n    //      { padding: { left: , top: }}\r\n    //      { padding: { left: , right: , top: , bottom: }}  \r\n\r\n    var padding = GetAdvancedValue(config, 'padding', null);\r\n\r\n    if (padding !== null) {\r\n        style.padding = padding;\r\n    }\r\n\r\n    if (addToScene !== undefined) {\r\n        config.add = addToScene;\r\n    }\r\n\r\n    var gameObject = new TagText(this.scene, 0, 0, content, style);\r\n    BuildGameObject(this.scene, gameObject, config);\r\n\r\n    //  Text specific config options:\r\n\r\n    gameObject.autoRound = GetAdvancedValue(config, 'autoRound', true);\r\n    gameObject.resolution = GetAdvancedValue(config, 'resolution', 1);\r\n\r\n    return gameObject;\r\n};","import Factory from './gameobjects/text/tagtext/Factory.js';\r\nimport Creator from './gameobjects/text/tagtext/Creator.js';\r\nimport TagText from './gameobjects/text/tagtext/TagText.js';\r\n\r\nPhaser.GameObjects.GameObjectFactory.register('rexTagText', Factory);\r\nPhaser.GameObjects.GameObjectCreator.register('rexTagText', Creator);\r\n\r\nexport default TagText;","import TagText from './TagText.js';\r\n\r\nexport default function (x, y, text, style) {\r\n    var gameObject = new TagText(this.scene, x, y, text, style);\r\n    this.scene.add.existing(gameObject);\r\n    return gameObject;\r\n}","export default {\r\n    setEventEmitter(eventEmitter, EventEmitterClass) {\r\n        if (EventEmitterClass === undefined) {\r\n            EventEmitterClass = Phaser.Events.EventEmitter; // Use built-in EventEmitter class by default\r\n        }\r\n        this._privateEE = (eventEmitter === undefined);\r\n        this._eventEmitter = (this._privateEE) ? (new EventEmitterClass()) : eventEmitter;\r\n        return this;\r\n    },\r\n\r\n    destroyEventEmitter() {\r\n        if (this._eventEmitter && this._privateEE) {\r\n            this._eventEmitter.shutdown();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    getEventEmitter() {\r\n        return this._eventEmitter;\r\n    },\r\n\r\n    on: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.on.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    once: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.once.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    off: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.off.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    emit: function (event) {\r\n        if (this._eventEmitter && event) {\r\n            this._eventEmitter.emit.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addListener: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.addListener.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    removeListener: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.removeListener.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    removeAllListeners: function () {\r\n        if (this._eventEmitter) {\r\n            this._eventEmitter.removeAllListeners.apply(this._eventEmitter, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    listenerCount: function () {\r\n        if (this._eventEmitter) {\r\n            return this._eventEmitter.listenerCount.apply(this._eventEmitter, arguments);\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    listeners: function () {\r\n        if (this._eventEmitter) {\r\n            return this._eventEmitter.listeners.apply(this._eventEmitter, arguments);\r\n        }\r\n        return [];\r\n    }\r\n};","const SceneClass = Phaser.Scene;\r\nvar IsSceneObject = function (object) {\r\n    return (object instanceof SceneClass);\r\n}\r\nexport default IsSceneObject;","import IsSceneObject from './IsSceneObject.js';\r\n\r\nvar GetSceneObject = function (object) {\r\n    if (IsSceneObject(object)) { // object = scene\r\n        return object;\r\n    } else if (object.scene && IsSceneObject(object.scene)) { // object = game object\r\n        return object.scene;\r\n    } else if (object.parent && object.parent.scene && IsSceneObject(object.parent.scene)) { // parent = bob object\r\n        return object.parent.scene;\r\n    }\r\n}\r\n\r\nexport default GetSceneObject;","import EventEmitterMethods from '../../utils/eventemitter/EventEmitterMethods.js';\r\nimport GetSceneObject from '../../utils/system/GetSceneObject.js';\r\n\r\nconst GetFastValue = Phaser.Utils.Objects.GetFastValue;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass TextTyping {\r\n    constructor(gameObject, config) {\r\n        this.gameObject = gameObject;\r\n        this.scene = GetSceneObject(gameObject);        \r\n        this.setEventEmitter(GetValue(config, 'eventEmitter', undefined));\r\n        \r\n        this.timer = null;\r\n        this.resetFromJSON(config);\r\n        this.boot();\r\n    }\r\n\r\n    /**\r\n     * Reset status by JSON object\r\n     * @param {object} o JSON object\r\n     * @returns {object} this object\r\n     */\r\n    resetFromJSON(o) {\r\n        this.setTypeMode(GetValue(o, 'typeMode', 0));\r\n        this.setTypeSpeed(GetValue(o, 'speed', 333));\r\n        this.setTextCallback = GetFastValue(o, 'setTextCallback', null);\r\n        this.setTextCallbackScope = GetFastValue(o, 'setTextCallbackScope', null);\r\n\r\n        this.typingIdx = GetFastValue(o, 'typingIdx', 0);\r\n        this.text = transferText(GetFastValue(o, 'text', ''));\r\n        this.textLen = GetFastValue(o, 'textLen', 0);\r\n        this.insertIdx = GetFastValue(o, 'insertIdx', null);\r\n\r\n        var elapsed = GetFastValue(o, 'elapsed', null);\r\n        if (elapsed !== null) {\r\n            this.start(undefined, undefined, this.typingIdx, elapsed);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Return status in JSON object\r\n     * @returns JSON object\r\n     */\r\n    toJSON() {\r\n        var elapsed;\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            elapsed = timer.elapsed;\r\n        } else {\r\n            elapsed = null;\r\n        }\r\n\r\n        return {\r\n            typeMode: this.typeMode,\r\n            speed: this.speed,\r\n            setTextCallback: this.setTextCallback,\r\n            setTextCallbackScope: this.setTextCallbackScope,\r\n\r\n            typingIdx: this.typingIdx,\r\n            text: this.text,\r\n            textLen: this.textLen,\r\n            insertIdx: this.insertIdx,\r\n            elapsed: elapsed\r\n        };\r\n    }\r\n\r\n    boot() {\r\n        if (this.gameObject.once) { // oops, bob object does not have event emitter\r\n            this.gameObject.on('destroy', this.destroy, this);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    shutdown() {\r\n        this.destroyEventEmitter();\r\n        this.freeTimer();\r\n        this.gameObject = undefined;\r\n        this.scene = undefined;\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this.shutdown();\r\n        return this;\r\n    }\r\n\r\n    setTypeMode(m) {\r\n        if (typeof (m) === 'string') {\r\n            m = TYPEMODE[m];\r\n        }\r\n        this.typeMode = m;\r\n        return this;\r\n    }\r\n\r\n    setTypeSpeed(speed) {\r\n        this.speed = speed;\r\n        return this;\r\n    }\r\n\r\n    get isTyping() {\r\n        return (this.getTimer() !== null);\r\n    }\r\n\r\n    get isLastChar() {\r\n        return (this.typingIdx === this.textLen);\r\n    }\r\n\r\n    start(text, speed, startIdx, timerStartAt) {\r\n        if (text !== undefined) {\r\n            this.setTypingContent(text);\r\n        }\r\n        if (speed !== undefined) {\r\n            this.speed = speed;\r\n        }\r\n        if (startIdx === undefined) {\r\n            startIdx = 0;\r\n        }\r\n\r\n        this.typingIdx = startIdx + 1;\r\n        if (this.speed === 0) {\r\n            this.stop(true);\r\n        } else {\r\n            this.startTimer(timerStartAt);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    appendText(text) {\r\n        var newText = this.text.concat(transferText(text));\r\n        if (this.isTyping) {\r\n            this.setTypingContent(newText);\r\n        } else {\r\n            this.start(newText, undefined, this.textLen);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    stop(showAllText) {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            this.freeTimer();\r\n        }\r\n        if (showAllText) {\r\n            this.typingIdx = this.textLen;\r\n            this.setText(this.text);\r\n            this.emit('type');\r\n            this.emit('complete', this, this.gameObject);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            timer.paused = true;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    resume() {\r\n        var timer = this.getTimer();\r\n        if (timer) {\r\n            timer.paused = false;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    setTypingContent(text) {\r\n        this.text = transferText(text);\r\n        this.textLen = this.getTextLength(this.text);\r\n        return this;\r\n    }\r\n\r\n    onTyping() {\r\n        var newText = this.getTypingString(this.text, this.typingIdx, this.textLen, this.typeMode);\r\n        this.setText(newText);\r\n        this.emit('type');\r\n\r\n        if (this.isLastChar) {\r\n            this.freeTimer();\r\n            this.emit('complete', this, this.gameObject);\r\n        } else {\r\n            this.timer.delay = this.speed; // delay of next typing            \r\n            this.typingIdx++;\r\n        }\r\n    }\r\n\r\n    getTypingString(text, typeIdx, textLen, typeMode) {\r\n        var result;\r\n        if (typeMode === 0) { //left-to-right\r\n            var startIdx = 0;\r\n            var endIdx = typeIdx;\r\n            this.insertIdx = endIdx;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 1) { //right-to-left\r\n            var endIdx = textLen;\r\n            var startIdx = endIdx - typeIdx;\r\n            this.insertIdx = 0;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 2) { //middle-to-sides\r\n            var midIdx = textLen / 2;\r\n            var startIdx = Math.floor(midIdx - (typeIdx / 2));\r\n            var endIdx = startIdx + typeIdx;\r\n            this.insertIdx = (typeIdx % 2) ? typeIdx : 0;\r\n            result = this.getSubString(text, startIdx, endIdx);\r\n\r\n        } else if (typeMode === 3) { //sides-to-middle\r\n            var lowerLen = Math.floor(typeIdx / 2);\r\n            var lowerResult;\r\n            if (lowerLen > 0) {\r\n                var endIdx = textLen;\r\n                var startIdx = endIdx - lowerLen;\r\n                lowerResult = this.getSubString(text, startIdx, endIdx);\r\n            } else {\r\n                lowerResult = \"\";\r\n            }\r\n\r\n            var upperLen = typeIdx - lowerLen;\r\n            var upperResult;\r\n            if (upperLen > 0) {\r\n                var startIdx = 0;\r\n                var endIdx = startIdx + upperLen;\r\n                this.insertIdx = endIdx;\r\n                upperResult = this.getSubString(text, startIdx, endIdx);\r\n            } else {\r\n                upperResult = \"\";\r\n                this.insertIdx = 0;\r\n            }\r\n            result = upperResult + lowerResult;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    startTimer(timerStartAt) {\r\n        if (this.timer) {\r\n            this.freeTimer();\r\n        }\r\n        var delay, startAt;\r\n        if (timerStartAt === undefined) {\r\n            delay = 0;\r\n            startAt = 0;\r\n        } else {\r\n            delay = this.speed;\r\n            startAt = timerStartAt;\r\n        }\r\n\r\n        this.timer = this.scene.time.addEvent({\r\n            delay: 0,\r\n            startAt: startAt,\r\n            loop: true,\r\n            callback: this.onTyping,\r\n            callbackScope: this\r\n        });\r\n        return this;\r\n    }\r\n\r\n    getTimer() {\r\n        return this.timer;\r\n    }\r\n\r\n    freeTimer() {\r\n        if (this.timer) {\r\n            this.timer.remove();\r\n            this.timer = null;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setText(text) {\r\n        if (this.setTextCallback) {\r\n            if (this.setTextCallbackScope) {\r\n                text = this.setTextCallback.call(this.setTextCallbackScope, text, this.isLastChar, this.insertIdx);\r\n            } else {\r\n                text = this.setTextCallback(text, this.isLastChar, this.insertIdx);\r\n            }\r\n        }\r\n        this.gameObject.setText(text);\r\n    }\r\n\r\n    getTextLength(text) {\r\n        var gameObject = this.gameObject;\r\n        var len;\r\n        if (gameObject.getPlainText) {\r\n            len = gameObject.getPlainText(text).length;\r\n        } else {\r\n            len = text.length;\r\n        }\r\n\r\n        return len;\r\n    }\r\n\r\n    getSubString(text, startIdx, endIdx) {\r\n        var gameObject = this.gameObject;\r\n        var result;\r\n        if (gameObject.getSubString) {\r\n            result = gameObject.getSubString(text, startIdx, endIdx);\r\n        } else {\r\n            result = text.slice(startIdx, endIdx);\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nObject.assign(\r\n    TextTyping.prototype,\r\n    EventEmitterMethods\r\n);\r\n\r\nvar transferText = function (text) {\r\n    if (Array.isArray(text)) {\r\n        text = text.join('\\n');\r\n    } else if (typeof (text) === 'number') {\r\n        text = text.toString();\r\n    }\r\n    return text;\r\n}\r\n\r\n/** @private */\r\nconst TYPEMODE = {\r\n    'left-to-right': 0,\r\n    'right-to-left': 1,\r\n    'middle-to-sides': 2,\r\n    'sides-to-middle': 3\r\n};\r\n\r\n\r\nexport default TextTyping;","import TextTyping from './behaviors/texttyping/TextTyping.js';\r\nexport default TextTyping;","import EventEmitter from './EventEmitter';\r\nimport FontStyleManifest from './FontStyleManifest';\r\nimport TagText from 'phaser3-rex-plugins/plugins/tagtext.js';\r\nimport TextTyping from 'phaser3-rex-plugins/plugins/texttyping.js';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(x, y, isIntro)\r\n    {\r\n        super();\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.hideEndDialogueMarkerOnMessageComplete = false;\r\n\r\n        this.endDialogueMarkerGraphics = null;\r\n\r\n        this.character = null;\r\n        this.characterWidth = null;\r\n        this.characterExpression = null;\r\n\r\n        this.speechBubbleGraphics = null;\r\n        this.speechBubbleText = null;\r\n\r\n        this.expressions = {};\r\n        this.expressions.default = { faceY: -90, bodyAngle: 0 };\r\n        this.expressions.surprise = { faceY: -105, bodyAngle: -4 };\r\n        this.expressions.sadness = { faceY: -80, bodyAngle: 5 };\r\n        this.expressions.despair = { faceY: -70, bodyAngle: 7 };\r\n        this.expressions.glee = { faceY: -100, bodyAngle: -4 };\r\n        this.expressions.nervous = { faceY: -85, bodyAngle: 0 };\r\n        this.expressions.confused = { faceY: -100, bodyAngle: -2 };\r\n        this.expressions.neutral = { faceY: -90, bodyAngle: 0 };\r\n        this.expressions.amused = { faceY: -95, bodyAngle: 0 };\r\n        this.expressions.thoughtful = { faceY: -70, bodyAngle: 0 };\r\n\r\n        this.isTalking = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        const self = this;\r\n\r\n        const speechBubbleWidth = 760;\r\n        const speechBubbleHeight = 130;\r\n\r\n        const endDialogueMarkerRadius = 10;\r\n        \r\n        this.characterWidth = 250;\r\n\r\n        const speechBubbleIntroOffset = 40;\r\n\r\n        // Speech Bubble\r\n        this.speechBubbleGraphics = context.add.graphics({ fillStyle: { color: 0xffffff } })\r\n        \r\n        if(this.isIntro)\r\n        {\r\n            this.speechBubbleGraphics.setAlpha(0);\r\n        }\r\n        \r\n        const speechBubbleGraphicsY = this.isIntro ? this.y - speechBubbleIntroOffset : this.y;\r\n        const speechBubbleGraphicsTriangleY1 = this.isIntro ? this.y + speechBubbleHeight + 20 - speechBubbleIntroOffset : this.y + speechBubbleHeight + 20;\r\n        const speechBubbleGraphicsTriangleY2 = this.isIntro ? this.y + speechBubbleHeight - speechBubbleIntroOffset : this.y + speechBubbleHeight;\r\n\r\n        this.speechBubbleGraphics.setDepth(1);\r\n        this.speechBubbleGraphics.fillRoundedRect(this.x, speechBubbleGraphicsY, speechBubbleWidth, speechBubbleHeight, 10);\r\n        this.speechBubbleGraphics.fillTriangle(\r\n            this.x + 120, speechBubbleGraphicsTriangleY1,\r\n            this.x + 105, speechBubbleGraphicsTriangleY2,\r\n            this.x + 135, speechBubbleGraphicsTriangleY2\r\n        );\r\n\r\n        // End Dialogue Marker\r\n        this.endDialogueMarkerGraphics = context.add.graphics({ fillStyle: { color: 0xcccccc } });\r\n        this.endDialogueMarkerGraphics.setDepth(1);\r\n        this.hideEndDialogueMarker();\r\n        const endDialogueMarker = new Phaser.Geom.Circle(\r\n            this.x + speechBubbleWidth - endDialogueMarkerRadius - 15,\r\n            this.y + speechBubbleHeight - endDialogueMarkerRadius - 15,\r\n            endDialogueMarkerRadius);\r\n        this.endDialogueMarkerGraphics.fillCircleShape(endDialogueMarker);\r\n\r\n        context.tweens.add({\r\n            targets: this.endDialogueMarkerGraphics,\r\n            alpha: 0,\r\n            duration: 500,\r\n            repeat: -1,\r\n            yoyo: true\r\n        });\r\n\r\n        // Speech Bubble Text\r\n        const speechBubbleTextStyle = FontStyleManifest.Default;\r\n        speechBubbleTextStyle.wrap = {\r\n            mode: 'word',\r\n            width: speechBubbleWidth - 30\r\n        };\r\n        speechBubbleTextStyle.tags = {\r\n            exclamation: {\r\n                fontStyle: 'bold'\r\n            }\r\n        };\r\n        \r\n        this.speechBubbleText = new TagText(context, this.x + 15, this.y + 15, '', speechBubbleTextStyle);\r\n        this.speechBubbleText.setDepth(1);\r\n        context.add.existing(this.speechBubbleText);\r\n\r\n        // Speech Bubble Text Typing\r\n        this.speechBubbleTextTyping = new TextTyping(this.speechBubbleText, { speed: 30 }); \r\n        this.speechBubbleTextTyping.on('complete', () => { self.messageCompleted.call(self) });\r\n\r\n        const characterX = (this.isIntro) ? (this.x - this.characterWidth) : (this.x + this.characterWidth/2);\r\n        this.character = context.add.container(characterX, this.y + speechBubbleHeight + 230);\r\n\r\n        // Character\r\n        const characterImage = context.add.image(0, 0, 'guide_character');\r\n        this.character.add(characterImage);\r\n\r\n        // Expression\r\n        const startingExpression = this.isIntro ? 'expression_surprise' : 'expression_default';\r\n        const characterExpressionY = this.isIntro ? this.expressions.surprise.faceY : this.expressions.default.faceY;\r\n        this.characterExpression = context.add.sprite(-10, characterExpressionY, startingExpression);\r\n        this.character.add(this.characterExpression);\r\n\r\n        const blinkOffset = 15;\r\n        context.tweens.addCounter({\r\n            duration: 100,\r\n            yoyo: true,\r\n            loop: -1,\r\n            loopDelay: 2000,\r\n            from: 0,\r\n            to: 1,\r\n            onUpdate: (tween) => {\r\n                const currOffset = blinkOffset * tween.getValue();\r\n                this.characterExpression.setCrop(0, currOffset, self.characterExpression.width, self.characterExpression.height);\r\n            }\r\n        });\r\n\r\n        // Intro Timeline\r\n        const introTimeline = context.tweens.createTimeline();\r\n\r\n        if(this.isIntro)\r\n        {\r\n            // Slide in the character\r\n            introTimeline.add({\r\n                delay: 200,\r\n                targets: this.character,\r\n                x: (this.x + this.characterWidth/2),\r\n                duration: 400,\r\n                angle: 15,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Sway backwards\r\n            introTimeline.add({\r\n                targets: this.character,\r\n                duration: 400,\r\n                angle: -7,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Sway into position\r\n            introTimeline.add({\r\n                targets: this.character,\r\n                duration: 400,\r\n                angle: 0,\r\n                ease: 'Power1'\r\n            });\r\n\r\n            // Speech Bubble Intro Animation\r\n            introTimeline.add({\r\n                offset: '-=300',\r\n                targets: this.speechBubbleGraphics,\r\n                props: {\r\n                    y: { value: `+=${speechBubbleIntroOffset}`, duration: 500, ease: 'Bounce.easeOut' },\r\n                    alpha: { value: 1, duration: 300, ease: 'Linear' }\r\n                },\r\n                onComplete: () => {\r\n                    this.emit('ready');\r\n                }\r\n            }); \r\n        }\r\n        else\r\n        {\r\n            introTimeline.add({\r\n                targets: this.speechBubbleGraphics,\r\n                duration: 100,\r\n                onComplete: () => {\r\n                    this.emit('ready');\r\n                }\r\n            }); \r\n        }\r\n\r\n        introTimeline.play();\r\n    }\r\n\r\n    displayMessage(message, hideEndDialogueMarkerOnMessageComplete)\r\n    {\r\n        this.isTalking = true;\r\n        this.hideEndDialogueMarker();\r\n        const convMessage = this.convertDialogToTagText(message);\r\n        this.speechBubbleTextTyping.start(convMessage);\r\n        this.hideEndDialogueMarkerOnMessageComplete = hideEndDialogueMarkerOnMessageComplete;\r\n    }\r\n\r\n    messageCompleted()\r\n    {\r\n        this.isTalking = false;\r\n        if(!this.hideEndDialogueMarkerOnMessageComplete)\r\n        {\r\n            this.showEndDialogueMarker();\r\n        }\r\n    }\r\n\r\n    showEndDialogueMarker()\r\n    {\r\n        this.endDialogueMarkerGraphics.setVisible(true);\r\n    }\r\n\r\n    hideEndDialogueMarker()\r\n    {\r\n        this.endDialogueMarkerGraphics.setVisible(false);\r\n    }\r\n\r\n    updateExpression(key, context)\r\n    {\r\n        this.characterExpression.setTexture('expression_' + key);\r\n        this.characterExpression.isCropped = false;\r\n\r\n        const expressionInfo = this.expressions[key];\r\n\r\n        context.tweens.add({\r\n            targets: this.characterExpression,\r\n            y: expressionInfo.faceY,\r\n            duration: 200,\r\n            ease: 'Power1'\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.character,\r\n            angle: expressionInfo.bodyAngle,\r\n            duration: 600,\r\n            ease: 'Power2'\r\n        });\r\n    }\r\n\r\n    hide(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.character,\r\n            x: (this.x - this.characterWidth),\r\n            duration: 800,\r\n            angle: -15,\r\n            ease: 'Power1'\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: [ this.speechBubbleGraphics, this.speechBubbleText ],\r\n            alpha: 0,\r\n            duration: 200\r\n        }); \r\n    }\r\n\r\n    convertDialogToTagText(input)\r\n    {\r\n        const styles = [\r\n            { token: '*', className: 'exclamation' },\r\n            { token: '_', className: 'underline'}\r\n        ];    \r\n\r\n        let output = '';\r\n        let currClass = '';\r\n    \r\n        for(let i=0; i<input.length; i++)\r\n        {\r\n            const currChar = input[i];\r\n            const isStyleToken = styles.some(style => style.token === currChar);\r\n    \r\n            // If the first character isn't a style token, then\r\n            // we need to open a \"normal\" class tag\r\n            if(i === 0 && !isStyleToken)\r\n            {\r\n                output += '<class=\"normal\">';\r\n                currClass = 'normal';\r\n            }\r\n    \r\n            // If the last character is a style token, we ignore it\r\n            // since we'll always end with a closing class tag anyway\r\n            if(i === input.length - 1 && isStyleToken)\r\n            {\r\n                continue;\r\n            }\r\n    \r\n            if(isStyleToken)\r\n            {\r\n                const targetStyle = styles.find(style => style.token === currChar);\r\n    \r\n                // If we've encountered a token of the class we already have open,\r\n                // that means we need to close the class\r\n                if(currClass === targetStyle.className)\r\n                {\r\n                    output += '</class>';\r\n                    output += '<class=\"normal\">';\r\n                    currClass = 'normal';\r\n                }\r\n    \r\n                // Otherwise, we need to close the existing the class and\r\n                // open the new class\r\n                else\r\n                {\r\n                    if(i !== 0)\r\n                    {\r\n                        output += '</class>';\r\n                    }\r\n    \r\n                    output += `<class=\"${targetStyle.className}\">`;\r\n                    currClass = targetStyle.className;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                output += input[i];\r\n            }\r\n        }\r\n    \r\n        output += '</class>';\r\n        return output;\r\n    }\r\n}","export default class {\r\n\r\n    constructor(x, y)\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        this.muteIcon = null;\r\n\r\n        this.isMuted = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Base Icon\r\n        const baseIcon = context.add.image(this.x, this.y, 'icon_audio');\r\n        baseIcon.setAlpha(0.7);\r\n        baseIcon.setInteractive({ cursor: 'pointer' });\r\n\r\n        // Mute Icon\r\n        this.muteIcon = context.add.image(this.x, this.y, 'icon_audio_mute');\r\n        this.muteIcon.setAlpha(0);\r\n\r\n        const self = this;\r\n        baseIcon.on('pointerdown', () => {\r\n            self.toggleMute(context);\r\n        });\r\n\r\n        if(context.sound.mute)\r\n        {\r\n            this.isMuted = true;\r\n            this.muteIcon.setAlpha(0.7);\r\n        }\r\n    }\r\n\r\n    toggleMute(context)\r\n    {\r\n        if(this.isMuted)\r\n        {\r\n            context.sound.mute = false;\r\n            this.isMuted = false;\r\n            context.tweens.add({\r\n                targets: this.muteIcon,\r\n                alpha: 0,\r\n                duration: 100\r\n            });\r\n        }\r\n        else\r\n        {\r\n            context.sound.mute = true;\r\n            this.isMuted = true;\r\n            context.tweens.add({\r\n                targets: this.muteIcon,\r\n                alpha: 0.7,\r\n                duration: 100\r\n            });\r\n        }\r\n    }\r\n}","// Source: https://stackoverflow.com/questions/5915096/get-random-item-from-javascript-array\r\nconst getRandomItem = (items) => {\r\n    return items[Math.floor(Math.random() * items.length)];\r\n}\r\n\r\nexport {\r\n    getRandomItem\r\n}","export default {\r\n    Active: 0,\r\n    Destroyed: 1\r\n};","export default [\r\n    { name: 'Red', imageKey: 'tile_01' },\r\n    { name: 'Blue', imageKey: 'tile_02' },\r\n    { name: 'Green', imageKey: 'tile_03' },\r\n    { name: 'Yellow', imageKey: 'tile_04' }\r\n];","import EventEmitter from './EventEmitter';\r\nimport { getRandomItem } from './Utility';\r\nimport Tile from './Tile';\r\nimport TileGenerationBehavior from './TileGenerationBehavior';\r\nimport TileState from './TileState';\r\nimport TileType from './TileType';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(tileGridWidth, tileGridHeight, tileSize, offsetX, offsetY, onTileSelect, onTileMatch, tileGenerationBehavior, queue)\r\n    {\r\n        super();\r\n\r\n        this.isInitialized = false;\r\n        this.isBlocked = true;\r\n\r\n        this.offsetX = offsetX;\r\n        this.offsetY = offsetY;\r\n        this.tileSize = tileSize;\r\n        this.tileGridHeight = tileGridHeight;\r\n        this.tileGridWidth = tileGridWidth;\r\n        this.tileGrid = [];\r\n        this.tileImageContainer = null;\r\n        this.playAreaOffset = (this.tileGridHeight * this.tileSize);\r\n\r\n        this.gridBackground = null;\r\n\r\n        this.onTileSelect = onTileSelect;\r\n        this.onTileMatch = onTileMatch;\r\n\r\n        this.tileGenerationBehavior = tileGenerationBehavior;\r\n\r\n        this.matchSound = null;\r\n        this.swapSound = null;\r\n\r\n        this.queue = queue;\r\n\r\n        this.matches = 0;\r\n\r\n        this.preSetTileGrid = [\r\n            [ 0, 0, 2, 3, 0, 0 ],\r\n            [ 3, 2, 2, 3, 3, 2 ],\r\n            [ 3, 2, 1, 0, 3, 2 ],\r\n            [ 1, 1, 0, 1, 0, 0 ],\r\n            [ 3, 2, 1, 0, 3, 2 ],\r\n            [ 3, 2, 2, 3, 3, 2 ]\r\n        ]\r\n\r\n        // We're going to generate a grid that's twice the height of\r\n        // the desired tile grid height since we'll use the hidden, upper\r\n        // region to stage the bricks that will fall into the play area\r\n        for(let y = 0; y < tileGridHeight * 2; y++)\r\n        {\r\n            this.tileGrid[y] = [];\r\n            for(let x = 0; x < tileGridWidth; x++)\r\n            {\r\n                this.tileGrid[y][x] = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        this.tileImageContainer = context.add.container();\r\n        this.tileImageContainer.setDepth(1);\r\n\r\n        // Create a mask to only show the play area\r\n        const maskShape = context.make.graphics();\r\n        maskShape.fillStyle(0xffffff, 1);\r\n        maskShape.fillRect(this.offsetX - (this.tileSize/2), this.offsetY + (this.tileGridHeight * this.tileSize) - (this.tileSize/2), this.tileGridWidth * this.tileSize, this.tileGridHeight * this.tileSize);\r\n    \r\n        this.tileImageContainer.mask = new Phaser.Display.Masks.GeometryMask(context, maskShape);\r\n\r\n        // Tile grid background\r\n        this.gridBackground = context.add.graphics({ fillStyle: { color: 0x012400 } }).setAlpha(0.4);\r\n        this.gridBackground.fillRoundedRect(this.offsetX - (this.tileSize/2) - 5, this.offsetY + (this.tileGridHeight * this.tileSize) - (this.tileSize/2) - 5, this.tileGridWidth * this.tileSize + 10, this.tileGridHeight * this.tileSize + 10, 6);\r\n        this.gridBackground.setAlpha(0);\r\n        this.gridBackground.setDepth(0);\r\n\r\n        this.matchSounds = [\r\n            context.sound.add('match'),\r\n            context.sound.add('match_combo_01'),\r\n            context.sound.add('match_combo_02'),\r\n            context.sound.add('match_combo_03'),\r\n            context.sound.add('match_combo_04'),\r\n            context.sound.add('match_combo_05'),\r\n        ];\r\n        this.matchSound = this.matchSounds[0];\r\n\r\n        this.swapSound = context.sound.add('swap');\r\n    }\r\n\r\n    update(context)\r\n    {\r\n        const self = this;\r\n\r\n        if(!self.isInitialized)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Detect and destroy any matches\r\n        const matchedTiles = self.getMatches();\r\n\r\n        if(matchedTiles.length > 0)\r\n        {\r\n            self.matches++;\r\n            self.onTileMatch(context, matchedTiles);\r\n            matchedTiles.forEach(t => { t.hasMatched = true });\r\n            self.emit('match');\r\n        }\r\n\r\n        let destroys = [];\r\n        matchedTiles.forEach(t => { destroys.push(t.destroy(context, this.tileImageContainer)); });\r\n\r\n        if(destroys.length > 0)\r\n        {\r\n            self.matchSound.play();\r\n            self.queue.push(() => { return Promise.all(destroys); });\r\n        }\r\n\r\n        // Remove any destroyed tiles\r\n        self.forEachTile((tile, x, y) => {\r\n\r\n            if(tile === null)\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(tile.state === TileState.Destroyed)\r\n            {\r\n                self.tileGrid[y][x] = null;\r\n            }\r\n\r\n        });\r\n\r\n        // If we destroyed tiles, return early to allow the destroyed tiles and their associated\r\n        // animations clear before figuring out the drop animations\r\n        if(destroys.length > 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Shift all of the tiles downward to fill empty spots\r\n        let drops = [];\r\n        for(let x = 0; x < this.tileGridWidth; x++)\r\n        {\r\n            let y = (this.tileGridHeight * 2) - 1;\r\n            while(y >= 0)\r\n            {\r\n                // If the tile is null...\r\n                if(self.tileGrid[y][x] === null)\r\n                {\r\n                    // ...find the closest tile that's not null...\r\n                    let closestY = y - 1;\r\n                    while(closestY >= 0)\r\n                    {\r\n                        let closestTile = self.tileGrid[closestY][x];\r\n                        if(closestTile !== null)\r\n                        {\r\n                            // ...and shift it downward\r\n                            self.tileGrid[y][x] = closestTile;\r\n                            self.tileGrid[closestY][x] = null;\r\n                            drops.push(this.getTileDrop(context, closestTile, x, y));\r\n                            y--;\r\n                        }\r\n                        closestY--;\r\n                    }\r\n                }\r\n\r\n                y--;\r\n            }\r\n        }\r\n\r\n        // Fill in all of the empty tiles\r\n        self.forEachPlayableTile((tile, x, y) => {\r\n            if(tile === null)\r\n            {\r\n                const adjustedY = y - self.tileGridHeight;\r\n\r\n                const tile = self.createTile(self.getTileType(x, y, self.tileGenerationBehavior), x, adjustedY, false);\r\n                self.tileGrid[adjustedY][x] = tile;\r\n                tile.create(context);\r\n                self.tileImageContainer.add(tile.image);\r\n            }\r\n        });\r\n\r\n        if(drops.length > 0)\r\n        {\r\n            self.queue.push(() => { return Promise.all(drops); });\r\n        }\r\n    }\r\n\r\n    swapTiles(context, firstTile, secondTile)\r\n    {\r\n        let self = this;\r\n        self.swapSound.play();\r\n\r\n        self.queue.push(() => {\r\n\r\n            let firstTileX = firstTile.x;\r\n            let firstTileY = firstTile.y;\r\n            let firstTileGridX = firstTile.tileGridX;\r\n            let firstTileGridY = firstTile.tileGridY;\r\n    \r\n            let secondTileX = secondTile.x;\r\n            let secondTileY = secondTile.y;\r\n            let secondTileGridX = secondTile.tileGridX;\r\n            let secondTileGridY = secondTile.tileGridY;\r\n    \r\n            let firstSwap = secondTile.updatePosition(context, firstTileX, firstTileY, firstTileGridX, firstTileGridY);\r\n            self.tileGrid[firstTileGridY][firstTileGridX] = secondTile;\r\n    \r\n            let secondSwap = firstTile.updatePosition(context, secondTileX, secondTileY, secondTileGridX, secondTileGridY);\r\n            self.tileGrid[secondTileGridY][secondTileGridX] = firstTile;\r\n\r\n            return Promise.all([firstSwap, secondSwap]);\r\n\r\n        });\r\n    }\r\n\r\n    hasMatches(targetGridX, targetGridY)\r\n    {\r\n        return this.getMatches(targetGridX, targetGridY).length > 0;\r\n    }\r\n\r\n    getMatches(targetGridX, targetGridY)\r\n    {\r\n        const self = this;\r\n        const matchedTiles = [];\r\n\r\n        self.forEachTile((tile, x, y) => {\r\n\r\n            if(\r\n                (typeof targetGridX !== 'undefined' && x !== targetGridX) &&\r\n                (typeof targetGridY !== 'undefined' && y !== targetGridY)\r\n              )\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(!this.isPlayable(tile))\r\n            {\r\n                return;\r\n            }\r\n\r\n            if(tile.hasMatched)\r\n            {\r\n                return;\r\n            }\r\n\r\n            const targetTileType = tile.tileType;\r\n            const matchedXTiles = [];\r\n            const matchedYTiles = [];\r\n\r\n            // Check for matches to the right\r\n            let currX = (x + 1);\r\n            while(currX < self.tileGridWidth)\r\n            {\r\n                const currTile = self.tileGrid[y][currX];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedXTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currX++;\r\n            }\r\n\r\n            // Check for matches to the left\r\n            currX = (x - 1);\r\n            while(currX > 0)\r\n            {\r\n                const currTile = self.tileGrid[y][currX];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedXTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currX--;\r\n            }\r\n\r\n            // Check matches downwards\r\n            let currY = (y + 1);\r\n            while(currY < self.tileGridHeight)\r\n            {\r\n                const currTile = self.tileGrid[currY][x];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedYTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currY++;\r\n            }\r\n\r\n            // Check matches upwards\r\n            currY = (y - 1);\r\n            while(currY > 0)\r\n            {\r\n                const currTile = self.tileGrid[currY][x];\r\n\r\n                if(currTile != null && targetTileType.name === currTile.tileType.name)\r\n                {\r\n                    matchedYTiles.push(currTile);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n\r\n                currY--;\r\n            }\r\n            \r\n            if(matchedYTiles.length > 1)\r\n            {\r\n                matchedTiles.push(...matchedYTiles);\r\n            }\r\n            \r\n            if(matchedXTiles.length > 1)\r\n            {\r\n                matchedTiles.push(...matchedXTiles);\r\n            }\r\n\r\n            if(matchedYTiles.length > 1 || matchedXTiles.length > 1)\r\n            {\r\n                matchedTiles.push(tile);\r\n            }\r\n        });\r\n\r\n        const uniqueMatchedTiles = [];\r\n        matchedTiles.forEach(tile => {\r\n            if(!uniqueMatchedTiles.some(t => t.x === tile.x && t.y === tile.y))\r\n            {\r\n                uniqueMatchedTiles.push(tile);\r\n            }\r\n        });\r\n        \r\n        return uniqueMatchedTiles;\r\n    }\r\n\r\n    forEachTile(callback)\r\n    {\r\n        for(let y = 0; y < this.tileGridHeight * 2; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                callback(this.tileGrid[y][x], x, y);\r\n            }\r\n        }\r\n    }\r\n\r\n    forEachPlayableTile(callback)\r\n    {\r\n        for(let y = this.tileGridHeight; y < this.tileGridHeight * 2; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                callback(this.tileGrid[y][x], x, y);\r\n            }\r\n        }\r\n    }\r\n\r\n    createTile(tileType, x, y, isBlocked, initialDrag)\r\n    {\r\n        return new Tile(tileType, this.getTileX(x), this.getTileY(y), x, y, initialDrag, isBlocked, this.onTileSelect);\r\n    }\r\n\r\n    getTileDrop(context, tile, x, y)\r\n    {\r\n        return tile.updatePosition(context, this.getTileX(x), this.getTileY(y), x, y, true);\r\n    }\r\n\r\n    getTileX(x)\r\n    {\r\n        return this.offsetX + (this.tileSize * x);\r\n    }\r\n\r\n    getTileY(y)\r\n    {\r\n        return this.offsetY + (this.tileSize * y);\r\n    }\r\n\r\n    canSelect(tile)\r\n    {\r\n        return this.isPlayable(tile);\r\n    }\r\n\r\n    isPlayable(tile)\r\n    {\r\n        return (tile != null) && !tile.isBlocked && (tile.tileGridY > (this.tileGridHeight - 1));\r\n    }\r\n\r\n    getTileType(x, y, behavior)\r\n    {\r\n        const aboveTile = (y < 1) ? null : this.tileGrid[y - 1][x];\r\n        const belowTile = (y >= this.tileGridHeight - 1 || !this.tileGrid[y + 1]) ? null : this.tileGrid[y + 1][x];\r\n\r\n        const leftTile = (x < 1) ? null : this.tileGrid[y][x - 1];\r\n        const rightTile = (x >= this.tileGridWidth - 1 || !this.tileGrid[y]) ? null : this.tileGrid[y][x + 1];\r\n\r\n        if(behavior === TileGenerationBehavior.EasyWin && (aboveTile != null || belowTile != null || leftTile != null || rightTile != null))\r\n        {\r\n            return getRandomItem([aboveTile, belowTile, leftTile, rightTile].filter(t => t != null).map(t => t.tileType));\r\n        }\r\n        \r\n        if(behavior === TileGenerationBehavior.Hard)\r\n        {\r\n            return getRandomItem(TileType.filter(t =>\r\n                (belowTile === null || t.name !== belowTile.tileType.name) &&\r\n                (rightTile === null || t.name !== rightTile.tileType.name) &&\r\n                (leftTile === null || t.name !== leftTile.tileType.name)\r\n            ));\r\n        }\r\n\r\n        return getRandomItem(TileType.filter(t =>\r\n            (aboveTile === null || t.name !== aboveTile.tileType.name) &&\r\n            (leftTile === null || t.name !== leftTile.tileType.name)\r\n        ));\r\n    }\r\n\r\n    block(context, exceptions)\r\n    {\r\n        this.isBlocked = true;\r\n        this.forEachTile((tile, x, y) => tile\r\n                && (typeof exceptions === 'undefined' || !exceptions.some(exception => exception[1] === x && exception[0] === y))\r\n                && tile.block(context)\r\n        );\r\n\r\n    }\r\n\r\n    unblock(context)\r\n    {\r\n        this.isBlocked = false;\r\n        this.forEachTile(tile => tile && tile.unblock(context));\r\n    }\r\n\r\n    fill(context)\r\n    {\r\n        for(let y = 0; y < this.tileGridHeight; y++)\r\n        {\r\n            for(let x = 0; x < this.tileGridWidth; x++)\r\n            {\r\n                const tileType = this.tileGenerationBehavior === TileGenerationBehavior.PreSet\r\n                    ? this.getPreSetTileType(x, y)\r\n                    : this.getTileType(x, y, TileGenerationBehavior.None);\r\n\r\n                const tile = this.createTile(tileType, x, y, true, ((this.tileGridWidth - x) / this.tileGridWidth));\r\n                tile.create(context);\r\n                \r\n                this.tileGrid[y][x] = tile;\r\n            }\r\n        }\r\n\r\n        this.isBlocked = true;\r\n        this.isInitialized = true;\r\n\r\n        context.tweens.add({\r\n            targets: this.gridBackground,\r\n            alpha: 0.5,\r\n            duration: 200\r\n        });\r\n    }\r\n\r\n    updateTileGenerationBehavior(behavior)\r\n    {\r\n        this.tileGenerationBehavior = behavior;\r\n    }\r\n\r\n    getPreSetTileType(x, y)\r\n    {\r\n        return TileType[this.preSetTileGrid[y][x]];\r\n    }\r\n\r\n    updateMatchSound(intensity)\r\n    {\r\n        const index = (intensity >= this.matchSounds.length) ? (this.matchSounds.length - 1) : intensity;\r\n        this.matchSound = this.matchSounds[index];\r\n    }\r\n}","import TileState from './TileState';\r\n\r\nexport default class {\r\n\r\n    constructor(tileType, x, y, tileGridX, tileGridY, initialDrag, isBlocked, onTileSelect)\r\n    {\r\n        this.tileType = tileType;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.tileGridX = tileGridX;\r\n        this.tileGridY = tileGridY;\r\n        this.onTileSelect = onTileSelect;\r\n        this.image = null;\r\n        this.state = TileState.Active;\r\n\r\n        this.isActivated = false;\r\n        this.isBlocked = isBlocked;\r\n        this.hasMatched = false;\r\n\r\n        this.initialDrag = (typeof initialDrag === \"undefined\") ? 1 : initialDrag;\r\n        this.hasDragged = (typeof initialDrag === \"undefined\");\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        this.image = context.add.image(this.x, this.y, this.tileType.imageKey);\r\n        this.image.setInteractive();\r\n        this.image.on('pointerdown', () => { this.onTileSelect(context, this); });\r\n\r\n        if(this.isBlocked)\r\n        {\r\n            this.image.setAlpha(0);\r\n        }\r\n    }\r\n\r\n    activate()\r\n    {\r\n        this.isActivated = true;\r\n        this.image.setTintFill(0xffffff);\r\n    }\r\n\r\n    deactivate()\r\n    {\r\n        this.isActivated = false;\r\n        this.image.clearTint();\r\n    }\r\n\r\n    updatePosition(context, x, y, tileGridX, tileGridY, isDrop)\r\n    {\r\n        const self = this;\r\n        const yDiff = Math.abs(self.y - y);\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            self.x = x;\r\n            self.y = y;\r\n            self.tileGridX = tileGridX;\r\n            self.tileGridY = tileGridY;\r\n\r\n            const tweenInfo = {\r\n                targets: self.image,\r\n                x: x,\r\n                y: y,\r\n                ease: isDrop ? 'Sine.easeIn' : 'Power1',\r\n                duration: (isDrop ? Math.max(150, yDiff) : 500),\r\n                onComplete: () => { resolve() }\r\n            };\r\n\r\n            // Handle special behavior for initial \"dragged\" drop\r\n            if(!this.hasDragged)\r\n            {\r\n                tweenInfo.delay = (200 - (200 * self.initialDrag));\r\n                tweenInfo.alpha = 0.5;\r\n                tweenInfo.ease = 'Sine';\r\n                this.hasDragged = true;\r\n            }\r\n\r\n            context.tweens.add(tweenInfo);\r\n\r\n        });\r\n    }\r\n\r\n    destroy(context, container)\r\n    {\r\n        let self = this;\r\n        \r\n        if(self.state === TileState.Destroyed)\r\n        {\r\n            return;\r\n        }\r\n\r\n        self.state = TileState.Destroyed;\r\n\r\n        // Create cover for fading the shape to white\r\n        const fadeOutCover = context.add.image(self.x, self.y, self.tileType.imageKey);\r\n        fadeOutCover.setTintFill(0xffffff);\r\n        fadeOutCover.alpha = 0;\r\n\r\n        // Create particles for \"explosion\" effect\r\n        const particleGraphics = [];\r\n        for(let i=0; i<8; i++)\r\n        {\r\n            const explodeParticleGraphics = context.add.graphics({ fillStyle: { color: 0xffffff }, alpha: 0 });\r\n            const explodeParticle = new Phaser.Geom.Circle(this.x, this.y, Phaser.Math.Between(0, 10));\r\n            explodeParticleGraphics.fillCircleShape(explodeParticle);\r\n            particleGraphics.push(explodeParticleGraphics);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            // Remove the tile image\r\n            container.remove(self.image);\r\n            self.image.destroy();\r\n\r\n            fadeOutCover.setAlpha(1);\r\n           context.tweens.add({\r\n               targets: fadeOutCover,\r\n               alpha: 0,\r\n               duration: 250,\r\n               ease: 'Cubic.easeOut',\r\n               onComplete: () => {\r\n\r\n                    // Remove the fade out cover\r\n                    container.remove(fadeOutCover);\r\n                    fadeOutCover.destroy();\r\n\r\n                    // Remove the particles\r\n                    particleGraphics.forEach((graphics) => {\r\n                        container.remove(graphics);\r\n                        graphics.destroy();\r\n                    });\r\n\r\n                    resolve();\r\n               }\r\n           });\r\n\r\n           particleGraphics.forEach((graphics, index) => {\r\n\r\n                graphics.setAlpha(1);\r\n                let xSign = null;\r\n                let ySign = null;\r\n               \r\n                switch(index)\r\n                {\r\n                    case 0:\r\n                        ySign = '-';\r\n\r\n                    case 1:\r\n                        xSign = '+';\r\n                        ySign = '-';\r\n                        break;\r\n\r\n                    case 2:\r\n                        xSign = '+';\r\n                        break;\r\n\r\n                    case 3:\r\n                        xSign = '+';\r\n                        ySign = '+';\r\n                        break;\r\n\r\n                    case 4:\r\n                        ySign = '+';\r\n                        break;\r\n\r\n                    case 5:\r\n                        ySign = '+';\r\n                        xSign = '-'\r\n\r\n                    case 6:\r\n                        xSign = '-';\r\n                        break;\r\n\r\n                    case 7:\r\n                        ySign = '-';\r\n                        xSign = '-';\r\n                        break;\r\n                }\r\n\r\n                const tween = {\r\n                    targets: graphics,\r\n                    alpha: 0,\r\n                    duration: 250,\r\n                    ease: 'Cubic.easeOut'\r\n                };\r\n\r\n                if(xSign != null)\r\n                {\r\n                    tween.x = (xSign + '=45');\r\n                }\r\n\r\n                if(ySign != null)\r\n                {\r\n                    tween.y = (ySign + '=45');\r\n                }\r\n\r\n                context.tweens.add(tween);\r\n           });\r\n\r\n        });\r\n    }\r\n\r\n    disappear(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            duration: 500,\r\n            y: '-=50',\r\n            angle: Phaser.Math.Between(-15, 15),\r\n            alpha: 0,\r\n            delay: Phaser.Math.Between(0, 500),\r\n            ease: 'Power1'\r\n        });\r\n    }\r\n\r\n    block(context)\r\n    {\r\n        this.isBlocked = true;\r\n\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            alpha: 0.5,\r\n            duration: 100\r\n        });\r\n    }\r\n\r\n    unblock(context)\r\n    {\r\n        this.isBlocked = false;\r\n\r\n        context.tweens.add({\r\n            targets: this.image,\r\n            alpha: 1,\r\n            duration: 100\r\n        });\r\n    }\r\n}","import EventEmitter from './EventEmitter';\r\nimport FontStyleManifest from './FontStyleManifest';\r\n\r\nexport default class extends EventEmitter {\r\n\r\n    constructor(x, y, ticks, isIntro)\r\n    {\r\n        super();\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.text = null;\r\n        this.icon = null;\r\n\r\n        this.warningTweens = null;\r\n        this.warningIcon = null;\r\n        this.warningSound = null;\r\n        this.timerRunOutSound = null;\r\n\r\n        this.ticks = ticks;\r\n        this.isPaused = true;\r\n        this.isDisplayingWarning = false;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Icon\r\n        this.icon = context.add.image(this.x + 15, this.y + 15, 'icon_timer');\r\n        this.icon.setAlpha(this.isIntro ? 0 : 0.7);\r\n\r\n        // Warning Icon\r\n        this.warningIcon = context.add.image(this.x + 15, this.y + 15, 'icon_timer_warning').setAlpha(0);\r\n        \r\n        // Warning Sound\r\n        this.warningSound = context.sound.add('warning_tick');\r\n\r\n        // Timer Run Out Sound\r\n        this.timerRunOutSound = context.sound.add('timer_run_out');\r\n\r\n        // Text\r\n        this.text = context.add.text(this.x + 40, this.y, this.getTimeOutput(this.ticks), FontStyleManifest.Default);\r\n\r\n        if(this.isIntro)\r\n        {\r\n            this.text.setAlpha(0);\r\n        }\r\n        \r\n        this.tick(context);\r\n        \r\n        const self = this;\r\n        context.time.addEvent({ delay: 1000, callback: () => { self.tick(context); }, callbackScope: this, loop: true })\r\n    }\r\n\r\n    show(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.icon,\r\n            duration: 250,\r\n            alpha: 0.7\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.text,\r\n            duration: 250,\r\n            alpha: 1\r\n        });\r\n    }\r\n\r\n    tick(context)\r\n    {\r\n        if(this.ticks <= 0 || this.isPaused)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.ticks <= 30 && !this.isDisplayingWarning)\r\n        {\r\n            this.displayWarning(context);\r\n        }\r\n\r\n        if(this.ticks <= 10)\r\n        {\r\n            this.warningSound.play();\r\n        }\r\n\r\n        if(this.ticks === 1)\r\n        {\r\n            this.timerRunOutSound.play();\r\n            this.warningTweens.forEach(tween => {\r\n                tween.stop(0);\r\n            })\r\n        }\r\n\r\n        this.emit('tick');\r\n        this.ticks--;\r\n\r\n        this.output();\r\n    }\r\n\r\n    update(ticks)\r\n    {\r\n        this.ticks = ticks;\r\n        this.output();\r\n    }\r\n\r\n    start()\r\n    {\r\n        this.isPaused = false;\r\n    }\r\n\r\n    stop()\r\n    {\r\n        this.isPaused = true;\r\n    }\r\n\r\n    getTimeOutput(input)\r\n    {\r\n        const minutes = Math.floor(input / 60);\r\n\r\n        let seconds = (input % 60);\r\n        if(seconds < 10)\r\n        {\r\n            seconds = '0' + seconds;\r\n        }\r\n\r\n        return `${minutes}:${seconds}`;\r\n    }\r\n\r\n    output()\r\n    {\r\n        this.text.setText(this.getTimeOutput(this.ticks));\r\n    }\r\n\r\n    displayWarning(context)\r\n    {\r\n        this.isDisplayingWarning = true;\r\n\r\n        this.warningTweens = [];\r\n\r\n        this.warningTweens.push(context.tweens.add({\r\n            targets: [ this.icon, this.warningIcon ],\r\n            angle: -60,\r\n            duration: 400,\r\n            yoyo: true,\r\n            repeat: -1\r\n        }));\r\n\r\n        this.warningTweens.push(context.tweens.add({\r\n            targets: this.warningIcon,\r\n            alpha: 0.6,\r\n            duration: 300,\r\n            repeatDelay: 100,\r\n            yoyo: true,\r\n            repeat: -1\r\n        }));\r\n    }\r\n}","import ActionScriptManifest from '../ActionScriptManifest';\r\nimport ActionQueue from '../ActionQueue';\r\nimport Director from '../Director';\r\nimport Guide from '../Guide';\r\nimport LevelManifest from '../LevelManifest';\r\nimport MuteControl from '../MuteControl';\r\nimport ScoreDisplay from '../ScoreDisplay';\r\nimport TileGrid from '../TileGrid';\r\nimport Timer from '../Timer';\r\nimport EventEmitter from '../EventEmitter';\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('RoundScene');\r\n\r\n        this.isAwaitingRoundTransition = false;\r\n        this.isReadyForRoundTransition = false;\r\n        this.isTransitioningRounds = false;\r\n        this.isBlockingMatches = false;\r\n\r\n        this.score = null;\r\n        this.comboCount = null;\r\n        this.queue = null;\r\n        this.selectedTiles = null;\r\n        this.tileGrid = null;\r\n        this.scoreDisplay = null;\r\n        this.timer = null;\r\n        this.background = null;\r\n\r\n        this.levelClearMessage = null;\r\n        this.levelClearMessageHighlight = null;\r\n \r\n        this.director = null;\r\n        this.guide = null;\r\n        this.level = null;\r\n\r\n        this.emitter = null;\r\n\r\n        this.totalMatches = null;\r\n\r\n        this.tileSelectSound = null;\r\n        this.lightsOffSound = null;\r\n        this.roundClearSound = null;\r\n    }\r\n\r\n    init(data)\r\n    {\r\n        this.level = data.level || 0;\r\n    }\r\n\r\n    create()\r\n    {\r\n        this.isTransitioningRounds = false;\r\n        this.isRoundTransitionComplete = false;\r\n        this.isBlockingMatches = LevelManifest[this.level].blockMatching;\r\n\r\n        this.score = 0;\r\n        this.totalMatches = 0;\r\n\r\n        this.queue = new ActionQueue();\r\n\r\n        this.background = this.add.image(400, 330, 'background');\r\n\r\n        const tileGenerationBehavior = LevelManifest[this.level].behavior;\r\n\r\n        this.selectedTiles = [];\r\n        this.tileGrid = new TileGrid(6, 6, 80, 335, -260, this.onTileSelect, this.onTileMatch, tileGenerationBehavior, this.queue);\r\n        this.scoreDisplay = new ScoreDisplay(110, 585, this.level === 0);\r\n\r\n        const timerSeconds = LevelManifest[this.level].timer;\r\n        this.timer = (timerSeconds > 0) ? new Timer(110, 625, timerSeconds, this.level === 1) : null;\r\n\r\n        this.guide = new Guide(20, 20, (this.level === 0));\r\n\r\n        this.tileGrid.create(this);\r\n        this.scoreDisplay.create(this);\r\n        this.timer && this.timer.create(this);\r\n        this.guide.create(this);\r\n        this.emitter = new EventEmitter();\r\n\r\n        const actionScript = ActionScriptManifest.getScript(this.level);\r\n        this.director = new Director(actionScript, this.guide, this.timer, this.scoreDisplay, this.tileGrid, this, this);\r\n\r\n        const self = this;\r\n        this.input.on('pointerdown', () => { self.director.next(self); });\r\n\r\n        this.tileSelectSound = this.sound.add('tile_select');\r\n        this.lightsOffSound = this.sound.add('lights_off');\r\n        this.musicSwitchSound = this.sound.add('music_switch');\r\n        this.roundClearSound = this.sound.add('round_clear');\r\n\r\n        // Mute Button\r\n        const muteControl = new MuteControl(40, 640);\r\n        muteControl.create(this);\r\n    }\r\n\r\n    update()\r\n    {\r\n        if(this.isTransitioningRounds)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.isRoundTransitionComplete)\r\n        {\r\n            this.nextLevel();\r\n            return;\r\n        }\r\n\r\n        // Have we run out of time?\r\n        if(this.timer != null && this.timer.ticks <= 0)\r\n        {\r\n            this.isTransitioningRounds = true;\r\n            this.emitter.emit('gameOver');\r\n            return;\r\n        }\r\n\r\n        if(this.isLevelComplete())\r\n        {\r\n            this.isTransitioningRounds = true;\r\n            this.tileGrid.block(this);\r\n            this.emitter.emit('win');\r\n            return;\r\n        }\r\n\r\n        // Are we currently executing a queued action?\r\n        if(this.queue.isActionRunning())\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Do we have any queued actions on the stack?\r\n        if(this.queue.hasActions())\r\n        {\r\n            this.queue.next();\r\n            return;\r\n        }\r\n\r\n        // If nothing's left in the queue, we can move the game's state forward\r\n        this.tileGrid.update(this);\r\n    }\r\n\r\n    onTileSelect(context, tile)\r\n    {\r\n        // Are we currently executing a queued action?\r\n        if(context.queue.isActionRunning() || context.queue.hasActions())\r\n        {\r\n            return;\r\n        }\r\n\r\n        // Is the guide currently blocking gameplay?\r\n        if(context.guide.isBlockingGameplay)\r\n        {\r\n            return;\r\n        }\r\n    \r\n        // Can we select this tile?\r\n        if(!context.tileGrid.canSelect(tile))\r\n        {\r\n            return;\r\n        }\r\n\r\n        // If the user is selecting a tile, reset the combo count\r\n        context.comboCount = 0;\r\n        context.tileGrid.updateMatchSound(context.comboCount);\r\n\r\n        // Is this tile already selected?\r\n        if(tile.isActivated)\r\n        {\r\n            context.clearSelectedTiles(context);\r\n            return;\r\n        }\r\n    \r\n        if(context.selectedTiles.length === 0)\r\n        {\r\n            context.tileSelectSound.play();\r\n            context.selectedTiles.push(tile);\r\n            tile.activate();\r\n            return;\r\n        }\r\n    \r\n        if(context.selectedTiles.length === 1)\r\n        {\r\n            const selectedTile = context.selectedTiles[0];\r\n            const xDiff = Math.abs(selectedTile.tileGridX - tile.tileGridX);\r\n            const yDiff = Math.abs(selectedTile.tileGridY - tile.tileGridY);\r\n    \r\n            if((xDiff === 1 && yDiff === 0) || (xDiff === 0 && yDiff === 1))\r\n            {\r\n                context.selectedTiles.push(tile);\r\n    \r\n                let firstSelectedTile = context.selectedTiles[0];\r\n                let secondSelectedTile = context.selectedTiles[1];\r\n    \r\n                context.tileGrid.swapTiles(context, firstSelectedTile, secondSelectedTile);\r\n                context.emitter.emit('swap');\r\n    \r\n                context.queue.push(() => {\r\n    \r\n                    // If there are no matches (or we're in a round where matches are blocked), swap the tiles back\r\n                    if(\r\n                        context.isBlockingMatches ||\r\n                        (!context.tileGrid.hasMatches(firstSelectedTile.tileGridX, firstSelectedTile.tileGridY) &&\r\n                        !context.tileGrid.hasMatches(secondSelectedTile.tileGridX, secondSelectedTile.tileGridY))\r\n                    )\r\n                    {\r\n                        context.tileGrid.swapTiles(context, firstSelectedTile, secondSelectedTile);\r\n                    }\r\n    \r\n                    return Promise.resolve();\r\n    \r\n                });\r\n    \r\n                context.clearSelectedTiles(context);\r\n            }\r\n        }\r\n    }\r\n\r\n    clearSelectedTiles(context)\r\n    {\r\n        context.selectedTiles.forEach((tile) => { tile.deactivate(); });\r\n        context.selectedTiles = [];\r\n    }\r\n\r\n    onTileMatch(context, matchedTiles)\r\n    {\r\n        // If any of the tiles are selected, let's clear\r\n        // the selected tiles to prevent a bug where the game\r\n        // tries to swap a tile that has already been cleared\r\n        if(matchedTiles.some(tile => tile.isActivated))\r\n        {\r\n            context.clearSelectedTiles(context);\r\n        }\r\n\r\n        context.totalMatches++;\r\n\r\n        context.comboCount++;\r\n        context.tileGrid.updateMatchSound(context.comboCount);\r\n\r\n        context.score += matchedTiles.length;\r\n        context.scoreDisplay.updateScore(context.score);\r\n    }\r\n    \r\n    isLevelComplete()\r\n    {\r\n        return this.score >= LevelManifest[this.level].score;\r\n    }\r\n\r\n    endLevel()\r\n    {\r\n        const self = this;\r\n        const endLevelTimeline = this.tweens.createTimeline();\r\n\r\n        // Level Clear Message\r\n        const levelClearMessage = this.add.image(400, 400, 'round_clear');\r\n        levelClearMessage.setAlpha(0);\r\n        levelClearMessage.setDepth(1);\r\n        levelClearMessage.setScale(0.75, 0.75);\r\n\r\n        // Flash Backdrop\r\n        const flashBackdropGraphics = this.add.graphics({ fillStyle: { color: 0xffffff } });\r\n        flashBackdropGraphics.setAlpha(0);\r\n        const flashBackdrop = new Phaser.Geom.Rectangle(0, 0, 800, 700);\r\n        flashBackdropGraphics.fillRectShape(flashBackdrop);\r\n\r\n        // Level Clear Backdrop\r\n        const levelClearBackdrop = this.add.image(400, 400, 'round_clear_backdrop');\r\n        levelClearBackdrop.setAlpha(0);\r\n\r\n        endLevelTimeline.add({\r\n            targets: [ levelClearBackdrop, flashBackdropGraphics ],\r\n            alpha: 1,\r\n            duration: 30\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearBackdrop,\r\n            alpha: 0.7,\r\n            duration: 1000,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 0,\r\n            duration: 1000,\r\n            offset: '-=1000'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearMessage,\r\n            alpha: 1,\r\n            duration: 500,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            offset: '-=2000',\r\n            ease: 'Back',\r\n            completeDelay: 100,\r\n            onComplete: () => {\r\n                this.tileGrid.forEachPlayableTile((tile) => tile && tile.disappear(self));\r\n\r\n                self.tweens.add({\r\n                    targets: this.tileGrid.gridBackground,\r\n                    alpha: 0,\r\n                    duration: 200\r\n                });\r\n            }\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearMessage,\r\n            alpha: 0,\r\n            duration: 500,\r\n            scaleX: 0.75,\r\n            scaleY: 0.75,\r\n            ease: 'Quad.easeOut'\r\n        });\r\n\r\n        endLevelTimeline.add({\r\n            targets: levelClearBackdrop,\r\n            alpha: 0,\r\n            duration: 500,\r\n            offset: '-=500',\r\n            ease: 'Quad.easeOut',\r\n            onComplete: () => {\r\n                self.isRoundTransitionComplete = true;\r\n                self.isTransitioningRounds = false; \r\n            }\r\n        });\r\n\r\n        this.roundClearSound.play();\r\n        endLevelTimeline.play();\r\n    }\r\n\r\n    nextLevel()\r\n    {\r\n        this.scene.restart({ level: (this.level + 1) });\r\n    }\r\n    \r\n    turnOffLights()\r\n    {\r\n        this.lightsOffSound.play();\r\n\r\n        this.lights.enable().setAmbientColor(0x555555);\r\n        this.background.setPipeline('Light2D');\r\n        this.lights.addLight(550, 900, 500).setColor(0xffffff).setIntensity(2);\r\n    }\r\n\r\n    pauseBackgroundMusic(playMusicSwitch)\r\n    {\r\n        if(playMusicSwitch)\r\n        {\r\n            this.musicSwitchSound.once('complete', () => { this.game.backgroundMusic.pause(); });\r\n            this.musicSwitchSound.play();\r\n        }\r\n        else\r\n        {\r\n            this.game.backgroundMusic.pause();\r\n        }\r\n    }\r\n\r\n    resumeBackgroundMusic(playMusicSwitch)\r\n    {\r\n        if(playMusicSwitch)\r\n        {\r\n            this.musicSwitchSound.once('complete', () => { this.game.backgroundMusic.resume(); });\r\n            this.musicSwitchSound.play();\r\n        }\r\n        else\r\n        {\r\n            this.game.backgroundMusic.resume();\r\n        }\r\n    }\r\n}","export default class {\r\n\r\n    constructor()\r\n    {\r\n        this.queuedActions = [];\r\n        this.currentAction = null;\r\n    }\r\n\r\n    isActionRunning()\r\n    {\r\n        return this.currentAction != null;\r\n    }\r\n\r\n    hasActions()\r\n    {\r\n        return this.queuedActions.length > 0;\r\n    }\r\n\r\n    next()\r\n    {\r\n        this.currentAction = this.queuedActions.shift();\r\n        this.currentAction();\r\n    }\r\n\r\n    push(action)\r\n    {\r\n        var self = this;\r\n        self.queuedActions.push(() => { action().then(() => { self.currentAction = null; }) });\r\n    }\r\n\r\n}","import FontStyleManifest from './FontStyleManifest';\r\n\r\nexport default class {\r\n\r\n    constructor(x, y, isIntro)\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.isIntro = isIntro;\r\n\r\n        this.scoreBackground = null;\r\n        this.scoreIcon = null;\r\n        this.scoreText = null;\r\n\r\n        this.score = 0;\r\n    }\r\n\r\n    create(context)\r\n    {\r\n        // Background\r\n        this.scoreBackground = context.add.graphics({ fillStyle: { color: 0x85ff7d } });\r\n        this.scoreBackground.setAlpha(this.isIntro ? 0 : 0.25);\r\n\r\n        this.scoreBackground.fillRoundedRect(this.x - 150, this.y - 10, 300, 90, 10);\r\n\r\n        // Icon\r\n        this.scoreIcon = context.add.image(this.x + 15, this.y + 15, 'icon_tile');\r\n        this.scoreIcon.setAlpha(this.isIntro ? 0 : 0.7);\r\n\r\n        // Text\r\n        this.scoreText = context.add.text(this.x + 40, this.y, this.score, FontStyleManifest.Default);\r\n\r\n        if(this.isIntro)\r\n        {\r\n            this.scoreText.setAlpha(0);\r\n        }\r\n\r\n        this.updateScore(this.score);\r\n    }\r\n\r\n    updateScore(score)\r\n    {\r\n        this.score = score;\r\n        this.scoreText.setText(score);\r\n    }\r\n\r\n    show(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: this.scoreBackground,\r\n            duration: 250,\r\n            alpha: 0.25\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.scoreIcon,\r\n            duration: 250,\r\n            alpha: 0.7\r\n        });\r\n\r\n        context.tweens.add({\r\n            targets: this.scoreText,\r\n            duration: 250,\r\n            alpha: 1\r\n        });\r\n    }\r\n\r\n    hide(context)\r\n    {\r\n        context.tweens.add({\r\n            targets: [ this.scoreBackground, this.scoreIcon, this.scoreText ],\r\n            x: '-=300',\r\n            duration: 300\r\n        });\r\n    }\r\n}","import LevelManifest from \"./LevelManifest\";\r\n\r\nexport default class {\r\n\r\n    constructor(script, guide, timer, scoreDisplay, tileGrid, scene, context)\r\n    {\r\n        this.guide = guide;\r\n        this.timer = timer;\r\n        this.scoreDisplay = scoreDisplay;\r\n        this.tileGrid = tileGrid;\r\n        this.scene = scene;\r\n\r\n        this.gameOverSubscriptions = [];\r\n        this.queuedActions = null;\r\n\r\n        this.isGuideReady = false;\r\n        this.isWaiting = false;\r\n\r\n        const self = this;\r\n        this.guide.on('ready', () => { self.isGuideReady = true; self.next(context); });\r\n\r\n        this.queueActions(script);\r\n    }\r\n\r\n    queueActions(script, context)\r\n    {\r\n        if(!script)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const self = this;\r\n\r\n        if(self.queuedActions === null)\r\n        {\r\n            self.queuedActions = [];\r\n        }\r\n\r\n        self.queuedActions.push(...script);\r\n\r\n        self.next(context);\r\n    }\r\n\r\n    next(context)\r\n    {\r\n        if(!this.isGuideReady)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.guide.isTalking)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.isWaiting)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(this.queuedActions.length === 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const action = this.queuedActions.shift();\r\n\r\n        // Simple dialog message\r\n        if(typeof action === \"string\")\r\n        {\r\n            // Are there any more messages after this one?\r\n            const isLastMessage = this.queuedActions.every(a => typeof a !== \"string\");\r\n\r\n            this.handleMessage(action, isLastMessage);\r\n            this.next(context);\r\n        }\r\n\r\n        // Game action\r\n        else if(action.hasOwnProperty('do'))\r\n        {\r\n            this.handleAction(action.do, action.value, context);\r\n            this.next(context);\r\n        }\r\n\r\n        // Event\r\n        else if(action.hasOwnProperty('on'))\r\n        {\r\n            this.handleEvent(action.on, action.actions, action.filter, context, action.persist);\r\n            this.next(context);\r\n        }\r\n\r\n        // Wait\r\n        else if(action.hasOwnProperty('wait'))\r\n        {\r\n            this.isWaiting = true;\r\n            context.time.addEvent({ delay: action.wait, callback: () => { this.isWaiting = false; this.next(context); }, callbackScope: this, loop: false })\r\n        }\r\n    }\r\n\r\n    handleMessage(action, hideEndDialogMarker)\r\n    {\r\n        this.guide.displayMessage(action, hideEndDialogMarker);\r\n    }\r\n\r\n    handleAction(action, value, context)\r\n    {\r\n        switch(action)\r\n        {\r\n            // Tile Actions\r\n\r\n            case 'dropTiles':\r\n                this.tileGrid.fill(context);\r\n                break;\r\n\r\n            case 'unblockTileGrid':\r\n                this.tileGrid.unblock(context);\r\n                break;\r\n\r\n            case 'blockTileGrid':\r\n                this.scene.clearSelectedTiles(this.scene);\r\n                this.tileGrid.block(context, value);\r\n                break;\r\n\r\n            case 'updateTileGenerationBehavior':\r\n                this.tileGrid.updateTileGenerationBehavior(value);\r\n                break;\r\n\r\n\r\n            // Guide Actions\r\n\r\n            case 'updateGuideExpression':\r\n                this.guide.updateExpression(value, context);\r\n                break;\r\n\r\n            case 'hideGuide':\r\n                this.guide.hide(context);\r\n                break;\r\n\r\n\r\n            // Timer Actions\r\n\r\n            case 'startTimer':\r\n                this.timer.start();\r\n                break;\r\n\r\n            case 'updateTimer':\r\n                this.timer.ticks = value;\r\n                break;\r\n\r\n            case 'stopTimer':\r\n                this.timer.stop();\r\n                break;\r\n\r\n            case 'updateTimerRelativeToScore':\r\n                const levelInfo = LevelManifest[this.scene.level];\r\n                this.timer.update(this.getScoreRelativeTicks(levelInfo.timer, this.scene.score, levelInfo.score));\r\n                break;\r\n\r\n            case 'showTimerDisplay':\r\n                this.timer.show(context);\r\n                break;\r\n\r\n\r\n            // Score Actions\r\n\r\n            case 'hideScoreDisplay':\r\n                this.scoreDisplay.hide(context);\r\n                break;\r\n\r\n            case 'showScoreDisplay':\r\n                this.scoreDisplay.show(context);\r\n                break;\r\n\r\n            \r\n            // Level Actions\r\n\r\n            case 'endLevel':\r\n                this.scene.endLevel();\r\n                break;\r\n\r\n            case 'revokeLevelTransition':\r\n                this.scene.isTransitioningRounds = false;\r\n                break;\r\n\r\n            case 'revokeBlockMatching':\r\n                this.scene.isBlockingMatches = false;\r\n                break;\r\n\r\n            \r\n            // Scene Actions\r\n\r\n            case 'turnOffLights':\r\n                this.scene.turnOffLights();\r\n                break;\r\n\r\n            case 'pauseBackgroundMusic':\r\n                this.scene.pauseBackgroundMusic(typeof value == 'undefined' ? true : value);\r\n                break;\r\n\r\n            case 'resumeBackgroundMusic':\r\n                this.scene.resumeBackgroundMusic(typeof value == 'undefined' ? true : value);\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleEvent(event, actions, filter, context, persist)\r\n    {\r\n        let target = null;\r\n\r\n        switch(event)\r\n        {\r\n            case 'match':\r\n                target = this.tileGrid;\r\n                break;\r\n\r\n            case 'swap':\r\n            case 'win':\r\n            case 'gameOver':\r\n                target = this.scene.emitter;\r\n                break;\r\n\r\n            case 'tick':\r\n                target = this.timer;\r\n                break;\r\n        }\r\n\r\n        this.setUpEvent(target, event, actions, filter, context, persist);\r\n    }\r\n\r\n    setUpEvent(target, eventName, actions, filter, context, persist)\r\n    {\r\n        const self = this;\r\n\r\n        target.on(\r\n            eventName,\r\n            this.wrapFilter(filter),\r\n            () => {\r\n                self.queuedActions = [];\r\n                self.queueActions(actions, context);\r\n            },\r\n            persist\r\n        );\r\n    }\r\n\r\n    wrapFilter(filter)\r\n    {\r\n        const self = this;\r\n\r\n        if(typeof filter === 'undefined')\r\n        {\r\n            return null;\r\n        }\r\n\r\n        return () => { return filter(self.getCurrentState()); };\r\n    }\r\n\r\n    getCurrentState()\r\n    {\r\n        return {\r\n            matches: this.tileGrid.matches,\r\n            score: this.scene.score,\r\n            ticks: this.timer ? this.timer.ticks : null,\r\n            isBlockingMatches: this.scene.isBlockingMatches\r\n        };\r\n    }\r\n\r\n    getScoreRelativeTicks(targetTicks, currScore, targetScore)\r\n    {\r\n        return Math.max(Math.trunc(targetTicks - ((currScore / targetScore) * targetTicks)), 1);\r\n    }\r\n}","import { getRandomItem } from \"../Utility\";\r\nimport MuteControl from \"../MuteControl\";\r\n\r\nexport default class extends Phaser.Scene {\r\n\r\n    constructor()\r\n    {\r\n        super('TitleScene');\r\n\r\n        this.startingLevel = 0;\r\n\r\n        this.isExiting = false;\r\n\r\n        this.tileInfos = [];\r\n        this.title = null;\r\n        this.startBtn = null;\r\n        this.startBtnOverlay = null;\r\n    }\r\n\r\n    create()\r\n    {\r\n        const self = this;\r\n\r\n        // Background\r\n        this.add.image(400, 330, 'background');\r\n\r\n        // Flash Backdrop\r\n        const flashBackdropGraphics = this.add.graphics({ fillStyle: { color: 0xffffff } });\r\n        flashBackdropGraphics.setAlpha(0);\r\n        const flashBackdrop = new Phaser.Geom.Rectangle(0, 0, 800, 700);\r\n        flashBackdropGraphics.fillRectShape(flashBackdrop);\r\n\r\n        // Tile\r\n        this.tileInfos = [];\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '+=180', yChange: '+=180', angle: 15, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_03', xChange: '-=180', yChange: '+=180', angle: -15, scale: 0.9 });\r\n        this.tileInfos.push({ imageKey: 'tile_04', xChange: '-=200', yChange: '-=180', angle: -5, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '+=0', yChange: '-=180', angle: -15, scale: 0.7 });\r\n        this.tileInfos.push({ imageKey: 'tile_02', xChange: '+=200', yChange: '-=180', angle: 15, scale: 1 });\r\n        this.tileInfos.push({ imageKey: 'tile_02', xChange: '+=0', yChange: '+=180', angle: -15, scale: 1 });\r\n        this.tileInfos.push({ imageKey: 'tile_03', xChange: '+=290', yChange: '+=30', angle: 15, scale: 0.8 });\r\n        this.tileInfos.push({ imageKey: 'tile_01', xChange: '-=290', yChange: '+=40', angle: -15, scale: 0.9 });\r\n\r\n        this.tileInfos.forEach(tileInfo => {\r\n            tileInfo.tile = self.add.image(400, 230, tileInfo.imageKey);\r\n            tileInfo.tile.setAlpha(0);\r\n            tileInfo.tile.setScale(0.5, 0.5);\r\n\r\n            tileInfo.tileFlash = self.add.image(400, 230, tileInfo.imageKey);\r\n            tileInfo.tileFlash.setTintFill(0xffffff);\r\n            tileInfo.tileFlash.setAlpha(0);\r\n        });\r\n\r\n        // Title\r\n        this.title = this.add.image(400, 230, 'title');\r\n        this.title.setAlpha(0);\r\n        this.title.setScale(2, 2);\r\n\r\n        this.startBtn = this.add.image(400, 540, 'start');\r\n        this.startBtn.setInteractive({ cursor: 'pointer' });\r\n        this.startBtn.setAlpha(0);\r\n\r\n        const startBtnFlash = this.add.image(400, 540, 'start');\r\n        startBtnFlash.setAlpha(0);\r\n        startBtnFlash.setTintFill(0xffffff);\r\n\r\n        this.startBtnOverlay = this.add.image(400, 540, 'start-active');\r\n        this.startBtnOverlay.setAlpha(0);\r\n\r\n        // Mute Button\r\n        const muteControl = new MuteControl(40, 640);\r\n        muteControl.create(this);\r\n\r\n        this.startBtn.on('pointerover', () => {\r\n            self.tweens.add({\r\n                targets: self.startBtnOverlay,\r\n                alpha: 1,\r\n                duration: 100,\r\n                ease: 'Sine.easeInOut'\r\n            });\r\n        });\r\n\r\n        this.startBtn.on('pointerout', () => {\r\n            self.tweens.add({\r\n                targets: self.startBtnOverlay,\r\n                alpha: 0,\r\n                duration: 100,\r\n                ease: 'Sine.easeInOut'\r\n            });\r\n        });\r\n\r\n        this.selectSound = this.sound.add('select');\r\n        this.startBtn.on('pointerdown', () => {\r\n            self.transitionToNextScene();\r\n        });\r\n\r\n        // Intro Timeline\r\n        const introTimeline = this.tweens.createTimeline();\r\n\r\n        // Slam in the title\r\n        introTimeline.add({\r\n            delay: 800,\r\n            targets: this.title,\r\n            alpha: 1,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            duration: 500,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        // Fling the tiles from the impact of the title slam\r\n        this.tileInfos.forEach((tileInfo, i) => {\r\n            introTimeline.add({\r\n                targets: tileInfo.tile,\r\n                x: tileInfo.xChange,\r\n                y: tileInfo.yChange,\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                alpha: 1,\r\n                scaleX: tileInfo.scale,\r\n                scaleY: tileInfo.scale,\r\n                angle: tileInfo.angle,\r\n                duration: 300,\r\n                ease: 'Quad.easeOut',\r\n                offset: (i === 0) ? '-=0' : '-=300'\r\n            });\r\n        });\r\n\r\n        this.game.backgroundMusic = this.sound.add('background_music');\r\n        this.game.backgroundMusic.loop = true;\r\n        this.game.backgroundMusic.play();\r\n\r\n        const introSlideSound = this.sound.add('intro_slide');\r\n\r\n        // Display the flash from the title slam\r\n        introTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 1,\r\n            duration: 30,\r\n            offset: '-=300',\r\n            onComplete: () => {\r\n                introSlideSound.play();\r\n            }\r\n        });\r\n\r\n        // Fade out the flash from the title slam\r\n        introTimeline.add({\r\n            targets: flashBackdropGraphics,\r\n            alpha: 0,\r\n            duration: 700,\r\n            offset: 1500,\r\n            ease: 'Quad.easeIn'\r\n        });\r\n\r\n        // Flash in the start button\r\n        introTimeline.add({\r\n            targets: [ this.startBtn, startBtnFlash ],\r\n            alpha: 1,\r\n            offset: 2200,\r\n            duration: 100\r\n        });\r\n\r\n        // Fade out the start button flash effect\r\n        introTimeline.add({\r\n            targets: startBtnFlash,\r\n            alpha: 0,\r\n            duration: 300,\r\n            offset: 2300,\r\n            ease: 'Quad.easeOut',\r\n            onComplete: this.flashTiles.apply(self)\r\n        });\r\n\r\n        introTimeline.add({\r\n            targets: this.title,\r\n            scaleX: 1.02,\r\n            scaleY: 1.02,\r\n            yoyo: true,\r\n            repeat: -1,\r\n            duration: 500,\r\n            offset: 2600,\r\n            ease: 'Quad'\r\n        });\r\n\r\n        introTimeline.play();\r\n    }\r\n\r\n    flashTiles()\r\n    {\r\n        const self = this;\r\n\r\n        // Start randomly flashing tiles\r\n        self.time.addEvent({\r\n            delay: 3000,\r\n            callback: () => {\r\n                if(self.isExiting)\r\n                {\r\n                    return;\r\n                }\r\n\r\n                const tileInfo = getRandomItem(self.tileInfos);\r\n\r\n                tileInfo.tileFlash.x = tileInfo.tile.x;\r\n                tileInfo.tileFlash.y = tileInfo.tile.y;\r\n                tileInfo.tileFlash.angle = tileInfo.tile.angle;\r\n                tileInfo.tileFlash.scaleX = tileInfo.tile.scaleX;\r\n                tileInfo.tileFlash.scaleY = tileInfo.tile.scaleY;\r\n\r\n                self.tweens.add({\r\n                    targets: tileInfo.tileFlash,\r\n                    alpha: 1,\r\n                    duration: 10\r\n                });\r\n\r\n                self.tweens.add({\r\n                    targets: tileInfo.tileFlash,\r\n                    alpha: 0,\r\n                    duration: 1000,\r\n                    ease: 'Power1',\r\n                    delay: 10\r\n                });\r\n\r\n                self.tweens.add({\r\n                    targets: [ tileInfo.tile, tileInfo.tileFlash ],\r\n                    scaleX: '*=1.1',\r\n                    scaleY: '*=1.1',\r\n                    duration: 500,\r\n                    yoyo: true,\r\n                    ease: 'Power1'\r\n                });\r\n            },\r\n            callbackScope: this,\r\n            loop: true\r\n        });\r\n    }\r\n\r\n    transitionToNextScene()\r\n    {\r\n        const self = this;\r\n\r\n        this.isExiting = true;\r\n\r\n        this.selectSound.play();\r\n        this.startBtn.setAlpha(0);\r\n\r\n        const exitTimeline = this.tweens.createTimeline();\r\n\r\n        this.tileInfos.forEach((tileInfo, i) => {\r\n            exitTimeline.add({\r\n                targets: [ tileInfo.tile, tileInfo.tileFlash ],\r\n                x: tileInfo.xChange,\r\n                y: tileInfo.yChange,\r\n                alpha: 0,\r\n                duration: 500,\r\n                offset: (i === 0) ? '-=0' : '-=1000',\r\n                ease: 'Quad.easeOut'\r\n            });\r\n        });\r\n\r\n        exitTimeline.add({\r\n            targets: this.title,\r\n            scaleX: 1.1,\r\n            scaleY: 1.1,\r\n            duration: 700,\r\n            offset: '-=1000',\r\n            alpha: 0,\r\n            ease: 'Quad.easeOut'\r\n        });\r\n\r\n        exitTimeline.add({\r\n            targets: this.startBtnOverlay,\r\n            y: '+=300',\r\n            duration: 500,\r\n            offset: '-=1000',\r\n            ease: 'Quad.easeOut',\r\n            completeDelay: 300,\r\n            onComplete: () => {\r\n                self.scene.transition({ target: 'RoundScene', data: { level: self.startingLevel }, remove: true });\r\n            }\r\n        });\r\n\r\n        exitTimeline.play();\r\n    }\r\n}","import LoadingScene from './scenes/LoadingScene';\r\nimport RoundScene from './scenes/RoundScene';\r\nimport TitleScene from './scenes/TitleScene';\r\n\r\nconst config = {\r\n    type: Phaser.AUTO,\r\n    width: 800,\r\n    height: 700,\r\n    scene: [LoadingScene, TitleScene, RoundScene]\r\n};\r\n\r\nconst game = new Phaser.Game(config);"],"sourceRoot":""}